import{$ as Wr,$a as De,A as mc,Aa as wc,Ab as Vp,B as Di,Ba as Zr,Bb as X,C as qr,Ca as Ye,Cb as Ri,D as pc,Da as Cn,Db as Np,E as gc,Ea as Si,Eb as No,F as re,Fa as Jr,Fb as Lp,G as fp,Ga as xc,Gb as Lo,H as yc,Ha as Ep,Hb as ts,I as Do,Ia as Cp,Ib as Bp,J as An,Ja as ft,Jb as Bo,K as vc,Ka as H,Kb as Mi,L as mp,La as ot,Lb as jp,M as pp,Ma as St,N as So,Na as Dn,O as We,Oa as Ce,Ob as Dc,P as Ae,Pa as To,Pb as Sc,Q as Ke,Qa as Ro,R as Lt,Ra as Mo,Rb as Tn,S as Ct,Sa as Kn,Sb as Tc,T as Wn,Ta as pe,Tb as Rc,U as N,Ua as Xe,V as $,Va as oe,W as gp,Wa as ko,X as j,Xa as yt,Y as _c,Ya as vt,Z as ht,Za as Ze,_ as w,_a as Ac,a as k,aa as yp,ab as Sn,b as it,ba as In,bb as Se,ca as Qe,cb as Ic,d as S,da as Ie,db as Oo,e as Hn,ea as Mt,eb as Qn,f as cp,fa as kt,fb as Yn,g as Ao,ga as vp,gb as Zt,h as hc,ha as _p,hb as Dp,i as fc,ia as Ft,ib as Ec,j as tt,ja as at,jb as Fo,k as Xt,ka as bc,kb as Sp,l as xn,la as bp,lb as Tp,m as ie,ma as gt,mb as Rp,n as G,na as wp,nb as ge,o as $r,oa as Kr,ob as Mp,p as Io,pa as xp,pb as kp,q as up,qa as Ee,qb as Cc,r as st,ra as Fe,rb as Op,s as Hr,sa as Qr,sb as Je,t as me,ta as Ap,tb as Fp,u as Eo,ua as Ip,ub as ye,v as qn,va as En,vb as Po,w as dp,wa as Yr,wb as tn,x as hp,xa as Xr,xb as Vo,y as Co,ya as se,yb as Ti,z as Ht,za as bt,zb as Pp}from"./chunk-PW34ZOWF.js";var kc=class extends Vp{supportsDOMEvents=!0},Oc=class n extends kc{static makeCurrent(){Pp(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Nw();return e==null?null:Lw(e)}resetBaseElement(){es=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Np(document.cookie,t)}},es=null;function Nw(){return es=es||document.querySelector("base"),es?es.getAttribute("href"):null}function Lw(n){return new URL(n,document.baseURI).pathname}var Bw=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),Fc=new j(""),qp=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new Ct(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(ht(Fc),ht(at))};static \u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),Uo=class{_doc;constructor(t){this._doc=t}manager},jo="ng-app-id";function Up(n){for(let t of n)t.remove()}function Gp(n,t){let e=t.createElement("style");return e.textContent=n,e}function jw(n,t,e,i){let r=n.head?.querySelectorAll(`style[${jo}="${t}"],link[${jo}="${t}"]`);if(r)for(let s of r)s.removeAttribute(jo),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function Pc(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Wp=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=Mi(s),jw(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,Gp);i?.forEach(r=>this.addUsage(r,this.external,Pc))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(Up(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Up(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,Gp(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,Pc(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(jo,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ht(X),ht(Kr),ht(Qr,8),ht(Ee))};static \u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),Mc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Nc=/%COMP%/g,Kp="%COMP%",Uw=`_nghost-${Kp}`,Gw=`_ngcontent-${Kp}`,zw=!0,$w=new j("",{providedIn:"root",factory:()=>zw});function Hw(n){return Gw.replace(Nc,n)}function qw(n){return Uw.replace(Nc,n)}function Qp(n,t){return t.map(e=>e.replace(Nc,n))}var Go=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,a,l,c,h=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=h,this.platformIsServer=Mi(l),this.defaultRenderer=new ns(e,a,c,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Yr.ShadowDom&&(i=it(k({},i),{encapsulation:Yr.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof zo?r.applyToHost(e):r instanceof is&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Yr.Emulated:s=new zo(c,h,i,this.appId,f,a,l,p);break;case Yr.ShadowDom:return new Vc(c,h,e,i,a,l,this.nonce,p);default:s=new is(c,h,i,f,a,l,p);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(i){return new(i||n)(ht(qp),ht(Wp),ht(Kr),ht($w),ht(X),ht(Ee),ht(at),ht(Qr))};static \u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),ns=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Mc[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(zp(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(zp(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Ct(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=Mc[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Mc[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Xr.DashCase|Xr.Important)?t.style.setProperty(e,i,r&Xr.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Xr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Ti().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function zp(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vc=class extends ns{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,s,a,l,c){super(t,s,a,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=Qp(r.id,r.styles);for(let p of h){let _=document.createElement("style");l&&_.setAttribute("nonce",l),_.textContent=p,this.shadowRoot.appendChild(_)}let f=r.getExternalStyles?.();if(f)for(let p of f){let _=Pc(p,s);l&&_.setAttribute("nonce",l),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},is=class extends ns{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,a,l,c){super(t,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?Qp(c,i.styles):i.styles,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zo=class extends is{contentAttr;hostAttr;constructor(t,e,i,r,s,a,l,c){let h=r+"-"+i.id;super(t,e,i,s,a,l,c,h),this.contentAttr=Hw(h),this.hostAttr=qw(h)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},Ww=(()=>{class n extends Uo{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static \u0275fac=function(i){return new(i||n)(ht(X))};static \u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),$p=["alt","control","meta","shift"],Kw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qw={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Yw=(()=>{class n extends Uo{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ti().onAndCancel(e,s.domEventName,a))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),$p.forEach(h=>{let f=i.indexOf(h);f>-1&&(i.splice(f,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=a,c}static matchEventFullKeyCode(e,i){let r=Kw[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),$p.forEach(a=>{if(a!==r){let l=Qw[a];l(e)&&(s+=a+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(ht(X))};static \u0275prov=N({token:n,factory:n.\u0275fac})}return n})();function Yp(n,t){return Fp(k({rootComponent:n},Xw(t)))}function Xw(n){return{appProviders:[...n0,...n?.providers??[]],platformProviders:e0}}function Zw(){Oc.makeCurrent()}function Jw(){return new bc}function t0(){return wp(document),document}var e0=[{provide:Ee,useValue:Bp},{provide:xp,useValue:Zw,multi:!0},{provide:X,useFactory:t0,deps:[]}];var n0=[{provide:yp,useValue:"root"},{provide:bc,useFactory:Jw,deps:[]},{provide:Fc,useClass:Ww,multi:!0,deps:[X,at,Ee]},{provide:Fc,useClass:Yw,multi:!0,deps:[X]},Go,Wp,qp,{provide:Ye,useExisting:Go},{provide:jp,useClass:Bw,deps:[]},[]];var Xp=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(ht(X))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var K="primary",bs=Symbol("RouteTitle"),Gc=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ni(n){return new Gc(n)}function r0(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let a=i[s],l=n[s];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function s0(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Pe(n[e],t[e]))return!1;return!0}function Pe(n,t){let e=n?zc(n):void 0,i=t?zc(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!sg(n[r],t[r]))return!1;return!0}function zc(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sg(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function og(n){return n.length>0?n[n.length-1]:null}function Rn(n){return Io(n)?n:Ro(n)?ie(Promise.resolve(n)):G(n)}var o0={exact:lg,subset:cg},ag={exact:a0,subset:l0,ignored:()=>!0};function Zp(n,t,e){return o0[e.paths](n.root,t.root,e.matrixParams)&&ag[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function a0(n,t){return Pe(n,t)}function lg(n,t,e){if(!Zn(n.segments,t.segments)||!Wo(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!lg(n.children[i],t.children[i],e))return!1;return!0}function l0(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>sg(n[e],t[e]))}function cg(n,t,e){return ug(n,t,t.segments,e)}function ug(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Zn(r,e)||t.hasChildren()||!Wo(r,e,i))}else if(n.segments.length===e.length){if(!Zn(n.segments,e)||!Wo(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!cg(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Zn(n.segments,r)||!Wo(n.segments,r,i)||!n.children[K]?!1:ug(n.children[K],t,s,i)}}function Wo(n,t,e){return t.every((i,r)=>ag[e](n[r].parameters,i.parameters))}var nn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new lt([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){return d0.serialize(this)}},lt=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ko(this)}},Xn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Ni(this.parameters),this._parameterMap}toString(){return hg(this)}};function c0(n,t){return Zn(n,t)&&n.every((e,i)=>Pe(e.parameters,t[i].parameters))}function Zn(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function u0(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===K&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==K&&(e=e.concat(t(r,i)))}),e}var pu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:()=>new us,providedIn:"root"})}return n})(),us=class{parse(t){let e=new Hc(t);return new nn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${rs(t.root,!0)}`,i=m0(t.queryParams),r=typeof t.fragment=="string"?`#${h0(t.fragment)}`:"";return`${e}${i}${r}`}},d0=new us;function Ko(n){return n.segments.map(t=>hg(t)).join("/")}function rs(n,t){if(!n.hasChildren())return Ko(n);if(t){let e=n.children[K]?rs(n.children[K],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==K&&i.push(`${r}:${rs(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=u0(n,(i,r)=>r===K?[rs(n.children[K],!1)]:[`${r}:${rs(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[K]!=null?`${Ko(n)}/${e[0]}`:`${Ko(n)}/(${e.join("//")})`}}function dg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ho(n){return dg(n).replace(/%3B/gi,";")}function h0(n){return encodeURI(n)}function $c(n){return dg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qo(n){return decodeURIComponent(n)}function Jp(n){return Qo(n.replace(/\+/g,"%20"))}function hg(n){return`${$c(n.path)}${f0(n.parameters)}`}function f0(n){return Object.entries(n).map(([t,e])=>`;${$c(t)}=${$c(e)}`).join("")}function m0(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Ho(e)}=${Ho(r)}`).join("&"):`${Ho(e)}=${Ho(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var p0=/^[^\/()?;#]+/;function Lc(n){let t=n.match(p0);return t?t[0]:""}var g0=/^[^\/()?;=#]+/;function y0(n){let t=n.match(g0);return t?t[0]:""}var v0=/^[^=?&#]+/;function _0(n){let t=n.match(v0);return t?t[0]:""}var b0=/^[^&#]+/;function w0(n){let t=n.match(b0);return t?t[0]:""}var Hc=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new lt([],{}):new lt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[K]=new lt(t,e)),i}parseSegment(){let t=Lc(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ct(4009,!1);return this.capture(t),new Xn(Qo(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=y0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Lc(this.remaining);r&&(i=r,this.capture(i))}t[Qo(e)]=Qo(i)}parseQueryParam(t){let e=_0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let a=w0(this.remaining);a&&(i=a,this.capture(i))}let r=Jp(e),s=Jp(i);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Lc(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ct(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=K);let a=this.parseChildren();e[s]=Object.keys(a).length===1?a[K]:new lt([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ct(4011,!1)}};function fg(n){return n.segments.length>0?new lt([],{[K]:n}):n}function mg(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=mg(r);if(i===K&&s.segments.length===0&&s.hasChildren())for(let[a,l]of Object.entries(s.children))t[a]=l;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new lt(n.segments,t);return x0(e)}function x0(n){if(n.numberOfChildren===1&&n.children[K]){let t=n.children[K];return new lt(n.segments.concat(t.segments),t.children)}return n}function ds(n){return n instanceof nn}function A0(n,t,e=null,i=null){let r=pg(n);return gg(r,t,e,i)}function pg(n){let t;function e(s){let a={};for(let c of s.children){let h=e(c);a[c.outlet]=h}let l=new lt(s.url,a);return s===n&&(t=l),l}let i=e(n.root),r=fg(i);return t??r}function gg(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return Bc(r,r,r,e,i);let s=I0(t);if(s.toRoot())return Bc(r,r,new lt([],{}),e,i);let a=E0(s,r,n),l=a.processChildren?as(a.segmentGroup,a.index,s.commands):vg(a.segmentGroup,a.index,s.commands);return Bc(r,a.segmentGroup,l,e,i)}function Yo(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function hs(n){return typeof n=="object"&&n!=null&&n.outlets}function Bc(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([c,h])=>{s[c]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let a;n===t?a=e:a=yg(n,t,e);let l=fg(mg(a));return new nn(l,s,r)}function yg(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=yg(s,t,e)}),new lt(n.segments,i)}var Xo=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Yo(i[0]))throw new Ct(4003,!1);let r=i.find(hs);if(r&&r!==og(i))throw new Ct(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function I0(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Xo(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([c,h])=>{l[c]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:a===0?(s.split("/").forEach((l,c)=>{c==0&&l==="."||(c==0&&l===""?e=!0:l===".."?t++:l!=""&&r.push(l))}),r):[...r,s]},[]);return new Xo(e,t,i)}var Fi=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function E0(n,t,e){if(n.isAbsolute)return new Fi(t,!0,0);if(!e)return new Fi(t,!1,NaN);if(e.parent===null)return new Fi(e,!0,0);let i=Yo(n.commands[0])?0:1,r=e.segments.length-1+i;return C0(e,r,n.numberOfDoubleDots)}function C0(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ct(4005,!1);r=i.segments.length}return new Fi(i,!1,r-s)}function D0(n){return hs(n[0])?n[0].outlets:{[K]:n}}function vg(n,t,e){if(n??=new lt([],{}),n.segments.length===0&&n.hasChildren())return as(n,t,e);let i=S0(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new lt(n.segments.slice(0,i.pathIndex),{});return s.children[K]=new lt(n.segments.slice(i.pathIndex),n.children),as(s,0,r)}else return i.match&&r.length===0?new lt(n.segments,{}):i.match&&!n.hasChildren()?qc(n,t,e):i.match?as(n,0,r):qc(n,t,e)}function as(n,t,e){if(e.length===0)return new lt(n.segments,{});{let i=D0(e),r={};if(Object.keys(i).some(s=>s!==K)&&n.children[K]&&n.numberOfChildren===1&&n.children[K].segments.length===0){let s=as(n.children[K],t,e);return new lt(n.segments,s.children)}return Object.entries(i).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[s]=vg(n.children[s],t,a))}),Object.entries(n.children).forEach(([s,a])=>{i[s]===void 0&&(r[s]=a)}),new lt(n.segments,r)}}function S0(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let a=n.segments[r],l=e[i];if(hs(l))break;let c=`${l}`,h=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&h&&typeof h=="object"&&h.outlets===void 0){if(!eg(c,h,a))return s;i+=2}else{if(!eg(c,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function qc(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(hs(s)){let c=T0(s.outlets);return new lt(i,c)}if(r===0&&Yo(e[0])){let c=n.segments[t];i.push(new Xn(c.path,tg(e[0]))),r++;continue}let a=hs(s)?s.outlets[K]:`${s}`,l=r<e.length-1?e[r+1]:null;a&&l&&Yo(l)?(i.push(new Xn(a,tg(l))),r+=2):(i.push(new Xn(a,{})),r++)}return new lt(i,{})}function T0(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=qc(new lt([],{}),0,i))}),t}function tg(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function eg(n,t,e){return n==e.path&&Pe(t,e.parameters)}var ls="imperative",Bt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Bt||{}),ve=class{id;url;constructor(t,e){this.id=t,this.url=e}},fs=class extends ve{type=Bt.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jn=class extends ve{urlAfterRedirects;type=Bt.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},le=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(le||{}),Wc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wc||{}),en=class extends ve{reason;code;type=Bt.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ti=class extends ve{reason;code;type=Bt.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},ms=class extends ve{error;target;type=Bt.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zo=class extends ve{urlAfterRedirects;state;type=Bt.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kc=class extends ve{urlAfterRedirects;state;type=Bt.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qc=class extends ve{urlAfterRedirects;state;shouldActivate;type=Bt.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yc=class extends ve{urlAfterRedirects;state;type=Bt.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xc=class extends ve{urlAfterRedirects;state;type=Bt.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zc=class{route;type=Bt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jc=class{route;type=Bt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},tu=class{snapshot;type=Bt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eu=class{snapshot;type=Bt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nu=class{snapshot;type=Bt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iu=class{snapshot;type=Bt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ps=class{},Li=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function R0(n,t){return n.providers&&!n._injector&&(n._injector=Cp(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Te(n){return n.outlet||K}function M0(n,t){let e=n.filter(i=>Te(i)===t);return e.push(...n.filter(i=>Te(i)!==t)),e}function ws(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var ru=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ws(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new sa(this.rootInjector)}},sa=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new ru(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(ht(In))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jo=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=su(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=su(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=ou(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return ou(t,this._root).map(e=>e.value)}};function su(n,t){if(n===t.value)return t;for(let e of t.children){let i=su(n,e);if(i)return i}return null}function ou(n,t){if(n===t.value)return[t];for(let e of t.children){let i=ou(n,e);if(i.length)return i.unshift(t),i}return[]}var ae=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Oi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var ta=class extends Jo{snapshot;constructor(t,e){super(t),this.snapshot=e,gu(this,t)}toString(){return this.snapshot.toString()}};function _g(n){let t=k0(n),e=new Xt([new Xn("",{})]),i=new Xt({}),r=new Xt({}),s=new Xt({}),a=new Xt(""),l=new Bi(e,i,s,a,r,K,n,t.root);return l.snapshot=t.root,new ta(new ae(l,[]),t)}function k0(n){let t={},e={},i={},r="",s=new Pi([],t,i,r,e,K,n,null,{});return new na("",new ae(s,[]))}var Bi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,a,l,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=l,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(st(h=>h[bs]))??G(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(st(t=>Ni(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(st(t=>Ni(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ea(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:k(k({},t.params),n.params),data:k(k({},t.data),n.data),resolve:k(k(k(k({},n.data),t.data),r?.data),n._resolvedData)}:i={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},r&&wg(r)&&(i.resolve[bs]=r.title),i}var Pi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[bs]}constructor(t,e,i,r,s,a,l,c,h){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=l,this.routeConfig=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ni(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},na=class extends Jo{url;constructor(t,e){super(e),this.url=t,gu(this,e)}toString(){return bg(this._root)}};function gu(n,t){t.value._routerState=n,t.children.forEach(e=>gu(n,e))}function bg(n){let t=n.children.length>0?` { ${n.children.map(bg).join(", ")} } `:"";return`${n.value}${t}`}function jc(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Pe(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Pe(t.params,e.params)||n.paramsSubject.next(e.params),s0(t.url,e.url)||n.urlSubject.next(e.url),Pe(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function au(n,t){let e=Pe(n.params,t.params)&&c0(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||au(n.parent,t.parent))}function wg(n){return typeof n.title=="string"||n.title===null}var O0=new j(""),yu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=K;activateEvents=new Ft;deactivateEvents=new Ft;attachEvents=new Ft;detachEvents=new Ft;routerOutletData=bp(void 0);parentContexts=w(sa);location=w(Si);changeDetector=w(Je);inputBinder=w(vu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ct(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ct(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ct(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Ct(4013,!1);this._activatedRoute=e;let r=this.location,a=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new lu(e,l,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ie]})}return n})(),lu=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Bi?this.route:t===sa?this.childContexts:t===O0?this.outletData:this.parent.get(t,e)}},vu=new j("");function F0(n,t,e){let i=gs(n,t._root,e?e._root:void 0);return new ta(i,t)}function gs(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=P0(n,t,e);return new ae(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(l=>gs(n,l)),a}}let i=V0(t.value),r=t.children.map(s=>gs(n,s));return new ae(i,r)}}function P0(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return gs(n,i,r);return gs(n,i)})}function V0(n){return new Bi(new Xt(n.url),new Xt(n.params),new Xt(n.queryParams),new Xt(n.fragment),new Xt(n.data),n.outlet,n.component,n)}var ys=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},xg="ngNavigationCancelingError";function ia(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=ds(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Ag(!1,le.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function Ag(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[xg]=!0,e.cancellationCode=t,e}function N0(n){return Ig(n)&&ds(n.url)}function Ig(n){return!!n&&n[xg]}var L0=(n,t,e,i)=>st(r=>(new cu(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),cu=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),jc(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Oi(e);t.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(t,e,a.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Oi(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Oi(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Oi(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new iu(s.value.snapshot))}),t.children.length&&this.forwardEvent(new eu(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(jc(r),r===s)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),jc(l.route.value),this.activateChildRoutes(t,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}else this.activateChildRoutes(t,null,i)}},ra=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Vi=class{component;route;constructor(t,e){this.component=t,this.route=e}};function B0(n,t,e){let i=n._root,r=t?t._root:null;return ss(i,r,e,[i.value])}function j0(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Ui(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!gp(n)?n:t.get(n):i}function ss(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Oi(t);return n.children.forEach(a=>{U0(a,s[a.value.outlet],e,i.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,l])=>cs(l,e.getContext(a),r)),r}function U0(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=t?t.value:null,l=e?e.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let c=G0(a,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new ra(i)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?ss(n,t,l?l.children:null,i,r):ss(n,t,e,i,r),c&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new Vi(l.outlet.component,a))}else a&&cs(t,l,r),r.canActivateChecks.push(new ra(i)),s.component?ss(n,null,l?l.children:null,i,r):ss(n,null,e,i,r);return r}function G0(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Zn(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Zn(n.url,t.url)||!Pe(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!au(n,t)||!Pe(n.queryParams,t.queryParams);case"paramsChange":default:return!au(n,t)}}function cs(n,t,e){let i=Oi(n),r=n.value;Object.entries(i).forEach(([s,a])=>{r.component?t?cs(a,t.children.getContext(s),e):cs(a,null,e):cs(a,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Vi(t.outlet.component,r)):e.canDeactivateChecks.push(new Vi(null,r)):e.canDeactivateChecks.push(new Vi(null,r))}function xs(n){return typeof n=="function"}function z0(n){return typeof n=="boolean"}function $0(n){return n&&xs(n.canLoad)}function H0(n){return n&&xs(n.canActivate)}function q0(n){return n&&xs(n.canActivateChild)}function W0(n){return n&&xs(n.canDeactivate)}function K0(n){return n&&xs(n.canMatch)}function Eg(n){return n instanceof up||n?.name==="EmptyError"}var qo=Symbol("INITIAL_VALUE");function ji(){return Ae(n=>Hr(n.map(t=>t.pipe(re(1),We(qo)))).pipe(st(t=>{for(let e of t)if(e!==!0){if(e===qo)return qo;if(e===!1||Q0(e))return e}return!0}),Ht(t=>t!==qo),re(1)))}function Q0(n){return ds(n)||n instanceof ys}function Y0(n,t){return me(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=e;return a.length===0&&s.length===0?G(it(k({},e),{guardsResult:!0})):X0(a,i,r,n).pipe(me(l=>l&&z0(l)?Z0(i,s,n,t):G(l)),st(l=>it(k({},e),{guardsResult:l})))})}function X0(n,t,e,i){return ie(n).pipe(me(r=>ix(r.component,r.route,e,t,i)),An(r=>r!==!0,!0))}function Z0(n,t,e,i){return ie(t).pipe(qr(r=>Eo(tx(r.route.parent,i),J0(r.route,i),nx(n,r.path,e),ex(n,r.route,e))),An(r=>r!==!0,!0))}function J0(n,t){return n!==null&&t&&t(new nu(n)),G(!0)}function tx(n,t){return n!==null&&t&&t(new tu(n)),G(!0)}function ex(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return G(!0);let r=i.map(s=>qn(()=>{let a=ws(t)??e,l=Ui(s,a),c=H0(l)?l.canActivate(t,n):Qe(a,()=>l(t,n));return Rn(c).pipe(An())}));return G(r).pipe(ji())}function nx(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>j0(a)).filter(a=>a!==null).map(a=>qn(()=>{let l=a.guards.map(c=>{let h=ws(a.node)??e,f=Ui(c,h),p=q0(f)?f.canActivateChild(i,n):Qe(h,()=>f(i,n));return Rn(p).pipe(An())});return G(l).pipe(ji())}));return G(s).pipe(ji())}function ix(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let a=s.map(l=>{let c=ws(t)??r,h=Ui(l,c),f=W0(h)?h.canDeactivate(n,t,e,i):Qe(c,()=>h(n,t,e,i));return Rn(f).pipe(An())});return G(a).pipe(ji())}function rx(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return G(!0);let s=r.map(a=>{let l=Ui(a,n),c=$0(l)?l.canLoad(t,e):Qe(n,()=>l(t,e));return Rn(c)});return G(s).pipe(ji(),Cg(i))}function Cg(n){return cp(Lt(t=>{if(typeof t!="boolean")throw ia(n,t)}),st(t=>t===!0))}function sx(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return G(!0);let s=r.map(a=>{let l=Ui(a,n),c=K0(l)?l.canMatch(t,e):Qe(n,()=>l(t,e));return Rn(c)});return G(s).pipe(ji(),Cg(i))}var vs=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},_s=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function ki(n){return $r(new vs(n))}function ox(n){return $r(new Ct(4e3,!1))}function ax(n){return $r(Ag(!1,le.GuardRejected))}var uu=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return G(i);if(r.numberOfChildren>1||!r.children[K])return ox(`${t.redirectTo}`);r=r.children[K]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let l=e,{queryParams:c,fragment:h,routeConfig:f,url:p,outlet:_,params:D,data:T,title:F}=r,O=Qe(s,()=>l({params:D,data:T,queryParams:c,fragment:h,routeConfig:f,url:p,outlet:_,title:F}));if(O instanceof nn)throw new _s(O);e=O}let a=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new _s(a);return a}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new nn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);i[r]=e[l]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),a={};return Object.entries(e.children).forEach(([l,c])=>{a[l]=this.createSegmentGroup(t,c,i,r)}),new lt(s,a)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Ct(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},du={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lx(n,t,e,i,r){let s=Dg(n,t,e);return s.matched?(i=R0(t,i),sx(i,t,e,r).pipe(st(a=>a===!0?s:k({},du)))):G(s)}function Dg(n,t,e){if(t.path==="**")return cx(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?k({},du):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||r0)(e,n,t);if(!r)return k({},du);let s={};Object.entries(r.posParams??{}).forEach(([l,c])=>{s[l]=c.path});let a=r.consumed.length>0?k(k({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function cx(n){return{matched:!0,parameters:n.length>0?og(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ng(n,t,e,i){return e.length>0&&hx(n,e,i)?{segmentGroup:new lt(t,dx(i,new lt(e,n.children))),slicedSegments:[]}:e.length===0&&fx(n,e,i)?{segmentGroup:new lt(n.segments,ux(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new lt(n.segments,n.children),slicedSegments:e}}function ux(n,t,e,i){let r={};for(let s of e)if(oa(n,t,s)&&!i[Te(s)]){let a=new lt([],{});r[Te(s)]=a}return k(k({},i),r)}function dx(n,t){let e={};e[K]=t;for(let i of n)if(i.path===""&&Te(i)!==K){let r=new lt([],{});e[Te(i)]=r}return e}function hx(n,t,e){return e.some(i=>oa(n,t,i)&&Te(i)!==K)}function fx(n,t,e){return e.some(i=>oa(n,t,i))}function oa(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function mx(n,t,e){return t.length===0&&!n.children[e]}var hu=class{};function px(n,t,e,i,r,s,a="emptyOnly"){return new fu(n,t,e,i,r,a,s).recognize()}var gx=31,fu=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,a,l){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new uu(this.urlSerializer,this.urlTree)}noMatchError(t){return new Ct(4002,`'${t.segmentGroup}'`)}recognize(){let t=ng(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(st(({children:e,rootSnapshot:i})=>{let r=new ae(i,e),s=new na("",r),a=A0(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(t){let e=new Pi([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,K,e).pipe(st(i=>({children:i,rootSnapshot:e})),Di(i=>{if(i instanceof _s)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof vs?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(st(a=>a instanceof ae?[a]:[]))}processChildren(t,e,i,r){let s=[];for(let a of Object.keys(i.children))a==="primary"?s.unshift(a):s.push(a);return ie(s).pipe(qr(a=>{let l=i.children[a],c=M0(e,a);return this.processSegmentGroup(t,c,l,a,r)}),pp((a,l)=>(a.push(...l),a)),gc(null),mp(),me(a=>{if(a===null)return ki(i);let l=Sg(a);return yx(l),G(l)}))}processSegment(t,e,i,r,s,a,l){return ie(e).pipe(qr(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,s,a,l).pipe(Di(h=>{if(h instanceof vs)return G(null);throw h}))),An(c=>!!c),Di(c=>{if(Eg(c))return mx(i,r,s)?G(new hu):ki(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,s,a,l,c){return Te(i)!==a&&(a===K||!oa(r,s,i))?ki(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,a,c):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,a,c):ki(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,a,l){let{matched:c,parameters:h,consumedSegments:f,positionalParamSegments:p,remainingSegments:_}=Dg(e,r,s);if(!c)return ki(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gx&&(this.allowRedirects=!1));let D=new Pi(s,h,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ig(r),Te(r),r.component??r._loadedComponent??null,r,rg(r)),T=ea(D,l,this.paramsInheritanceStrategy);D.params=Object.freeze(T.params),D.data=Object.freeze(T.data);let F=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,p,D,t);return this.applyRedirects.lineralizeSegments(r,F).pipe(me(O=>this.processSegment(t,i,e,O.concat(_),a,!1,l)))}matchSegmentAgainstRoute(t,e,i,r,s,a){let l=lx(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),l.pipe(Ae(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Ae(({routes:h})=>{let f=i._loadedInjector??t,{parameters:p,consumedSegments:_,remainingSegments:D}=c,T=new Pi(_,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ig(i),Te(i),i.component??i._loadedComponent??null,i,rg(i)),F=ea(T,a,this.paramsInheritanceStrategy);T.params=Object.freeze(F.params),T.data=Object.freeze(F.data);let{segmentGroup:O,slicedSegments:W}=ng(e,_,D,h);if(W.length===0&&O.hasChildren())return this.processChildren(f,h,O,T).pipe(st(Q=>new ae(T,Q)));if(h.length===0&&W.length===0)return G(new ae(T,[]));let Y=Te(i)===s;return this.processSegment(f,h,O,W,Y?K:s,!0,T).pipe(st(Q=>new ae(T,Q instanceof ae?[Q]:[])))}))):ki(e)))}getChildConfig(t,e,i){return e.children?G({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?G({routes:e._loadedRoutes,injector:e._loadedInjector}):rx(t,e,i,this.urlSerializer).pipe(me(r=>r?this.configLoader.loadChildren(t,e).pipe(Lt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):ax(e))):G({routes:[],injector:t})}};function yx(n){n.sort((t,e)=>t.value.outlet===K?-1:e.value.outlet===K?1:t.value.outlet.localeCompare(e.value.outlet))}function vx(n){let t=n.value.routeConfig;return t&&t.path===""}function Sg(n){let t=[],e=new Set;for(let i of n){if(!vx(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=Sg(i.children);t.push(new ae(i.value,r))}return t.filter(i=>!e.has(i))}function ig(n){return n.data||{}}function rg(n){return n.resolve||{}}function _x(n,t,e,i,r,s){return me(a=>px(n,t,e,i,a.extractedUrl,r,s).pipe(st(({state:l,tree:c})=>it(k({},a),{targetSnapshot:l,urlAfterRedirects:c}))))}function bx(n,t){return me(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return G(e);let s=new Set(r.map(c=>c.route)),a=new Set;for(let c of s)if(!a.has(c))for(let h of Tg(c))a.add(h);let l=0;return ie(a).pipe(qr(c=>s.has(c)?wx(c,i,n,t):(c.data=ea(c,c.parent,n).resolve,G(void 0))),Lt(()=>l++),vc(1),me(c=>l===a.size?G(e):xn))})}function Tg(n){let t=n.children.map(e=>Tg(e)).flat();return[n,...t]}function wx(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!wg(r)&&(s[bs]=r.title),xx(s,n,t,i).pipe(st(a=>(n._resolvedData=a,n.data=ea(n,n.parent,e).resolve,null)))}function xx(n,t,e,i){let r=zc(n);if(r.length===0)return G({});let s={};return ie(r).pipe(me(a=>Ax(n[a],t,e,i).pipe(An(),Lt(l=>{if(l instanceof ys)throw ia(new us,l);s[a]=l}))),vc(1),fp(s),Di(a=>Eg(a)?xn:$r(a)))}function Ax(n,t,e,i){let r=ws(t)??i,s=Ui(n,r),a=s.resolve?s.resolve(t,e):Qe(r,()=>s(t,e));return Rn(a)}function Uc(n){return Ae(t=>{let e=n(t);return e?ie(e).pipe(st(()=>t)):G(t)})}var Rg=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===K);return i}getResolvedTitleForRoute(e){return e.data[bs]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:()=>w(Ix),providedIn:"root"})}return n})(),Ix=(()=>{class n extends Rg{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(ht(Xp))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_u=new j("",{providedIn:"root",factory:()=>({})}),Ex=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,r){i&1&&Ze(0,"router-outlet")},dependencies:[yu],encapsulation:2})}return n})();function bu(n){let t=n.children&&n.children.map(bu),e=t?it(k({},n),{children:t}):k({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==K&&(e.component=Ex),e}var wu=new j(""),Cx=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(Cc);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return G(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Rn(e.loadComponent()).pipe(st(Mg),Lt(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Do(()=>{this.componentLoaders.delete(e)})),r=new fc(i,()=>new tt).pipe(hc());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return G({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Dx(i,this.compiler,e,this.onLoadEndListener).pipe(Do(()=>{this.childrenLoaders.delete(i)})),a=new fc(s,()=>new tt).pipe(hc());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dx(n,t,e,i){return Rn(n.loadChildren()).pipe(st(Mg),me(r=>r instanceof Ep||Array.isArray(r)?G(r):ie(t.compileModuleAsync(r))),st(r=>{i&&i(n);let s,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(s=r.create(e).injector,a=s.get(wu,[],{optional:!0,self:!0}).flat()),{routes:a.map(bu),injector:s}}))}function Sx(n){return n&&typeof n=="object"&&"default"in n}function Mg(n){return Sx(n)?n.default:n}var xu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:()=>w(Tx),providedIn:"root"})}return n})(),Tx=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rx=new j("");var Mx=new j(""),kx=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new tt;transitionAbortSubject=new tt;configLoader=w(Cx);environmentInjector=w(In);urlSerializer=w(pu);rootContexts=w(sa);location=w(Ri);inputBindingEnabled=w(vu,{optional:!0})!==null;titleStrategy=w(Rg);options=w(_u,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(xu);createViewTransition=w(Rx,{optional:!0});navigationErrorHandler=w(Mx,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;constructor(){let e=r=>this.events.next(new Zc(r)),i=r=>this.events.next(new Jc(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(it(k(k({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Xt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ls,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ht(s=>s.id!==0),st(s=>it(k({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ae(s=>{let a=!1,l=!1;return G(s).pipe(Ae(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",le.SupersededByNewNavigation),xn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?it(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!h&&f!=="reload"){let p="";return this.events.next(new ti(c.id,this.urlSerializer.serialize(c.rawUrl),p,Wc.IgnoredSameUrlNavigation)),c.resolve(!1),xn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return G(c).pipe(Ae(p=>{let _=this.transitions?.getValue();return this.events.next(new fs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions?.getValue()?xn:Promise.resolve(p)}),_x(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Lt(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=it(k({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let _=new Zo(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:_,source:D,restoredState:T,extras:F}=c,O=new fs(p,this.urlSerializer.serialize(_),D,T);this.events.next(O);let W=_g(this.rootComponentType).snapshot;return this.currentTransition=s=it(k({},c),{targetSnapshot:W,urlAfterRedirects:_,extras:it(k({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,G(s)}else{let p="";return this.events.next(new ti(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Wc.IgnoredByUrlHandlingStrategy)),c.resolve(!1),xn}}),Lt(c=>{let h=new Kc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),st(c=>(this.currentTransition=s=it(k({},c),{guards:B0(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),Y0(this.environmentInjector,c=>this.events.next(c)),Lt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw ia(this.urlSerializer,c.guardsResult);let h=new Qc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Ht(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",le.GuardRejected),!1)),Uc(c=>{if(c.guards.canActivateChecks.length)return G(c).pipe(Lt(h=>{let f=new Yc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),Ae(h=>{let f=!1;return G(h).pipe(bx(this.paramsInheritanceStrategy,this.environmentInjector),Lt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",le.NoDataFromResolver)}}))}),Lt(h=>{let f=new Xc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),Uc(c=>{let h=f=>{let p=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(f.routeConfig).pipe(Lt(_=>{f.component=_}),st(()=>{})));for(let _ of f.children)p.push(...h(_));return p};return Hr(h(c.targetSnapshot.root)).pipe(gc(null),re(1))}),Uc(()=>this.afterPreactivation()),Ae(()=>{let{currentSnapshot:c,targetSnapshot:h}=s,f=this.createViewTransition?.(this.environmentInjector,c.root,h.root);return f?ie(f).pipe(st(()=>s)):G(s)}),st(c=>{let h=F0(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=it(k({},c),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),Lt(()=>{this.events.next(new ps)}),L0(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),re(1),Lt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Ke(this.transitionAbortSubject.pipe(Lt(c=>{throw c}))),Do(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",le.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Di(c=>{if(l=!0,Ig(c))this.events.next(new en(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),N0(c)?this.events.next(new Li(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let h=new ms(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let f=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(f instanceof ys){let{message:p,cancellationCode:_}=ia(this.urlSerializer,f);this.events.next(new en(s.id,this.urlSerializer.serialize(s.extractedUrl),p,_)),this.events.next(new Li(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(h),c}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return xn}))}))}cancelNavigationTransition(e,i,r){let s=new en(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ox(n){return n!==ls}var Fx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:()=>w(Px),providedIn:"root"})}return n})(),mu=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Px=(()=>{class n extends mu{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:()=>w(Vx),providedIn:"root"})}return n})(),Vx=(()=>{class n extends kg{location=w(Ri);urlSerializer=w(pu);options=w(_u,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=w(xu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new nn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=_g(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof fs)this.stateMemento=this.createStateMemento();else if(e instanceof ti)this.rawUrlTree=i.initialUrl;else if(e instanceof Zo){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof ps?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof en&&(e.code===le.GuardRejected||e.code===le.NoDataFromResolver)?this.restoreHistory(i):e instanceof ms?this.restoreHistory(i,!0):e instanceof Jn&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof nn?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,a=k(k({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",a)}else{let s=k(k({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),os=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(os||{});function Nx(n,t){n.events.pipe(Ht(e=>e instanceof Jn||e instanceof en||e instanceof ms||e instanceof ti),st(e=>e instanceof Jn||e instanceof ti?os.COMPLETE:(e instanceof en?e.code===le.Redirect||e.code===le.SupersededByNewNavigation:!1)?os.REDIRECTING:os.FAILED),Ht(e=>e!==os.REDIRECTING),re(1)).subscribe(()=>{t()})}var Lx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Og=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(To);stateManager=w(kg);options=w(_u,{optional:!0})||{};pendingTasks=w(_p);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(kx);urlSerializer=w(pu);location=w(Ri);urlHandlingStrategy=w(xu);_events=new tt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(Fx);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(wu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(vu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Hn;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof en&&i.code!==le.Redirect&&i.code!==le.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Jn)this.navigated=!0;else if(i instanceof Li){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=k({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ox(r.source)},a);this.scheduleNavigation(l,ls,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Ux(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let c=k({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(e);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(bu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,h=c?this.currentUrlTree.fragment:a,f=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":f=k(k({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let _=r?r.snapshot:this.routerState.snapshot.root;p=pg(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),p=this.currentUrlTree.root}return gg(p,e,f,h??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=ds(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ls,null,i)}navigate(e,i={skipLocationChange:!1}){return jx(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=k({},Lx):i===!1?r=k({},Bx):r=i,ds(e))return Zp(this.currentUrlTree,e,r);let s=this.parseUrl(e);return Zp(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,h;a?(l=a.resolve,c=a.reject,h=a.promise):h=new Promise((p,_)=>{l=p,c=_});let f=this.pendingTasks.add();return Nx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(p=>Promise.reject(p))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jx(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Ct(4008,!1)}function Ux(n){return!(n instanceof ps)&&!(n instanceof Li)}var Gx=new j("");function Fg(n,...t){return Wr([{provide:wu,multi:!0,useValue:n},[],{provide:Bi,useFactory:zx,deps:[Og]},{provide:Mo,multi:!0,useFactory:$x},t.map(e=>e.\u0275providers)])}function zx(n){return n.routerState.root}function $x(){let n=w(kt);return t=>{let e=n.get(Kn);if(t!==e.components[0])return;let i=n.get(Og),r=n.get(Hx);n.get(qx)===1&&i.initialNavigation(),n.get(Wx,null,_c.Optional)?.setUpPreloading(),n.get(Gx,null,_c.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Hx=new j("",{factory:()=>new tt}),qx=new j("",{providedIn:"root",factory:()=>1});var Wx=new j("");var Pg=[];var Kx="@",Qx=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=w(vp,{optional:!0});loadingSchedulerFn=w(Yx,{optional:!0});_engine;constructor(e,i,r,s,a){this.doc=e,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-6RXMEXSB.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(r=>{throw new Ct(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,i){let r=this.delegate.createRenderer(e,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new Au(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(e,i);s.use(l),this.scheduler?.notify(11)}).catch(a=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(i){wc()};static \u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),Au=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(Kx)}},Yx=new j("");function Vg(n="animations"){return Ap("NgAsyncAnimations"),Wr([{provide:Ye,useFactory:(t,e,i)=>new Qx(t,e,i,n),deps:[X,Go,at]},{provide:Fe,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Ng={providers:[Op({eventCoalescing:!0}),Fg(Pg),Vg()]};var Eu;try{Eu=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Eu=!1}var At=(()=>{class n{_platformId=w(Ee);isBrowser=this._platformId?Bo(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Eu)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var As;function Xx(){if(As==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>As=!0}))}finally{As=As||!1}return As}function Gi(n){return Xx()?n:!!n.capture}var ei;function Cu(){if(ei==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ei=!1,ei;if("scrollBehavior"in document.documentElement.style)ei=!0;else{let n=Element.prototype.scrollTo;n?ei=!/\{\s*\[native code\]\s*\}/.test(n.toString()):ei=!1}}return ei}var Iu;function Zx(){if(Iu==null){let n=typeof document<"u"?document.head:null;Iu=!!(n&&(n.createShadowRoot||n.attachShadow))}return Iu}function Lg(n){if(Zx()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Is(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function _e(n){return n.composedPath?n.composedPath()[0]:n.target}function Du(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var aa=new WeakMap,rn=(()=>{class n{_appRef;_injector=w(kt);_environmentInjector=w(In);load(e){let i=this._appRef=this._appRef||this._injector.get(Kn),r=aa.get(i);r||(r={loaders:new Set,refs:[]},aa.set(i,r),i.onDestroy(()=>{aa.get(i)?.refs.forEach(s=>s.destroy()),aa.delete(i)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(Vo(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Su=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function la(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ca(n,t=0){return Jx(n)?Number(n):arguments.length===2?t:0}function Jx(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function zi(n){return Array.isArray(n)?n:[n]}function Dt(n){return n==null?"":typeof n=="string"?n:`${n}px`}function sn(n){return n instanceof gt?n.nativeElement:n}var tA=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({providers:[tA]})}return n})();var jg=new Set,ni,eA=(()=>{class n{_platform=w(At);_nonce=w(Qr,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):iA}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&nA(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nA(n,t){if(!jg.has(n))try{ni||(ni=document.createElement("style"),t&&ni.setAttribute("nonce",t),ni.setAttribute("type","text/css"),document.head.appendChild(ni)),ni.sheet&&(ni.sheet.insertRule(`@media ${n} {body{ }}`,0),jg.add(n))}catch(e){console.error(e)}}function iA(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Gg=(()=>{class n{_mediaMatcher=w(eA);_zone=w(at);_queries=new Map;_destroySubject=new tt;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Ug(zi(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=Ug(zi(e)).map(a=>this._registerQuery(a).observable),s=Hr(r);return s=Eo(s.pipe(re(1)),s.pipe(So(1),pc(0))),s.pipe(st(a=>{let l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:h})=>{l.matches=l.matches||c,l.breakpoints[h]=c}),l}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),s={observable:new Ao(a=>{let l=c=>this._zone.run(()=>a.next(c));return i.addListener(l),()=>{i.removeListener(l)}}).pipe(We(i),st(({matches:a})=>({query:e,matches:a})),Ke(this._destroySubject)),mql:i};return this._queries.set(e,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ug(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var ku=(()=>{class n{_platform=w(At);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return oA(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=sA(mA(e));if(i&&(zg(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=zg(e);return e.hasAttribute("contenteditable")?s!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!hA(e)?!1:r==="audio"?e.hasAttribute("controls")?s!==-1:!1:r==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return fA(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sA(n){try{return n.frameElement}catch{return null}}function oA(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function aA(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function lA(n){return uA(n)&&n.type=="hidden"}function cA(n){return dA(n)&&n.hasAttribute("href")}function uA(n){return n.nodeName.toLowerCase()=="input"}function dA(n){return n.nodeName.toLowerCase()=="a"}function qg(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function zg(n){if(!qg(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function hA(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function fA(n){return lA(n)?!1:aA(n)||cA(n)||n.hasAttribute("contenteditable")||qg(n)}function mA(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var Mu=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,e,i,r,s=!1,a){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._injector=a,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?En(t,{injector:this._injector}):setTimeout(t)}},Wg=(()=>{class n{_checker=w(ku);_ngZone=w(at);_document=w(X);_injector=w(kt);constructor(){w(rn).load(Su)}create(e,i=!1){return new Mu(e,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ou(n){return n.buttons===0||n.detail===0}function Fu(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var pA=new j("cdk-input-modality-detector-options"),gA={ignoreKeys:[18,17,224,91,16]},Kg=650,$i=Gi({passive:!0,capture:!0}),yA=(()=>{class n{_platform=w(At);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Xt(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=_e(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<Kg||(this._modality.next(Ou(e)?"keyboard":"mouse"),this._mostRecentTarget=_e(e))};_onTouchstart=e=>{if(Fu(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=_e(e)};constructor(){let e=w(at),i=w(X),r=w(pA,{optional:!0});this._options=k(k({},gA),r),this.modalityDetected=this._modality.pipe(So(1)),this.modalityChanged=this.modalityDetected.pipe(yc()),this._platform.isBrowser&&e.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,$i),i.addEventListener("mousedown",this._onMousedown,$i),i.addEventListener("touchstart",this._onTouchstart,$i)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,$i),document.removeEventListener("mousedown",this._onMousedown,$i),document.removeEventListener("touchstart",this._onTouchstart,$i))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var da=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(da||{}),vA=new j("cdk-focus-monitor-default-options"),ua=Gi({passive:!0,capture:!0}),ha=(()=>{class n{_ngZone=w(at);_platform=w(At);_inputModalityDetector=w(yA);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=w(X,{optional:!0});_stopInputModalityDetector=new tt;constructor(){let e=w(vA,{optional:!0});this._detectionMode=e?.detectionMode||da.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=_e(e);for(let r=i;r;r=r.parentElement)e.type==="focus"?this._onFocus(e,r):this._onBlur(e,r)};monitor(e,i=!1){let r=sn(e);if(!this._platform.isBrowser||r.nodeType!==1)return G();let s=Lg(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return i&&(a.checkChildren=!0),a.subject;let l={checkChildren:i,subject:new tt,rootNode:s};return this._elementInfo.set(r,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(e){let i=sn(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let s=sn(e),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([l,c])=>this._originChanged(l,i,c)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===da.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===da.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?Kg:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),s=_e(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,ua),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,ua)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ke(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ua),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ua),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ii=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(ii||{}),$g="cdk-high-contrast-black-on-white",Hg="cdk-high-contrast-white-on-black",Tu="cdk-high-contrast-active",Pu=(()=>{class n{_platform=w(At);_hasCheckedHighContrastMode;_document=w(X);_breakpointSubscription;constructor(){this._breakpointSubscription=w(Gg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ii.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ii.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ii.BLACK_ON_WHITE}return ii.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Tu,$g,Hg),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ii.BLACK_ON_WHITE?e.add(Tu,$g):i===ii.WHITE_ON_BLACK&&e.add(Tu,Hg)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qg=(()=>{class n{constructor(){w(Pu)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[Bg]})}return n})(),Ru={},ri=(()=>{class n{_appId=w(Kr);getId(e){return this._appId!=="ng"&&(e+=this._appId),Ru.hasOwnProperty(e)||(Ru[e]=0),`${e}${Ru[e]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _A=new j("cdk-dir-doc",{providedIn:"root",factory:bA});function bA(){return w(X)}var wA=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function xA(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?wA.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Hi=(()=>{class n{value="ltr";change=new Ft;constructor(){let e=w(_A,{optional:!0});if(e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=xA(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ve=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({})}return n})();var Jt=(()=>{class n{constructor(){w(Pu)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[Ve,Ve]})}return n})();var iy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var be=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(be||{}),Lu=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=be.HIDDEN;constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},Yg=Gi({passive:!0,capture:!0}),Bu=class{_events=new Map;addHandler(t,e,i,r){let s=this._events.get(e);if(s){let a=s.get(i);a?a.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Yg)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Yg)))}_delegateEventHandler=t=>{let e=_e(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}},ma={enterDuration:225,exitDuration:150},AA=800,Xg=Gi({passive:!0,capture:!0}),Zg=["mousedown","touchstart"],Jg=["mouseup","mouseleave","touchend","touchcancel"],IA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})(),ju=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Bu;constructor(t,e,i,r,s){this._target=t,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=sn(i)),s&&s.get(rn).load(IA)}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=k(k({},ma),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let a=i.radius||EA(t,e,r),l=t-r.left,c=e-r.top,h=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${l-a}px`,f.style.top=`${c-a}px`,f.style.height=`${a*2}px`,f.style.width=`${a*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),_=p.transitionProperty,D=p.transitionDuration,T=_==="none"||D==="0s"||D==="0s, 0s"||r.width===0&&r.height===0,F=new Lu(this,f,i,T);f.style.transform="scale3d(1, 1, 1)",F.state=be.FADING_IN,i.persistent||(this._mostRecentTransientRipple=F);let O=null;return!T&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let W=()=>{O&&(O.fallbackTimer=null),clearTimeout(Q),this._finishRippleTransition(F)},Y=()=>this._destroyRipple(F),Q=setTimeout(Y,h+100);f.addEventListener("transitionend",W),f.addEventListener("transitioncancel",Y),O={onTransitionEnd:W,onTransitionCancel:Y,fallbackTimer:Q}}),this._activeRipples.set(F,O),(T||!h)&&this._finishRippleTransition(F),F}fadeOutRipple(t){if(t.state===be.FADING_OUT||t.state===be.HIDDEN)return;let e=t.element,i=k(k({},ma),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=be.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=sn(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Zg.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Jg.forEach(e=>{this._triggerElement.addEventListener(e,this,Xg)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===be.FADING_IN?this._startFadeOutTransition(t):t.state===be.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=be.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=be.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Ou(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+AA;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Fu(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===be.VISIBLE||t.config.terminateOnPointerUp&&t.state===be.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(Zg.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(Jg.forEach(e=>t.removeEventListener(e,this,Xg)),this._pointerUpEventsRegistered=!1))}};function EA(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var CA=new j("mat-ripple-global-options");var ry=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[Jt,Jt]})}return n})();var ty={capture:!0},ey=["focus","mousedown","mouseenter","touchstart"],Vu="mat-ripple-loader-uninitialized",Nu="mat-ripple-loader-class-name",ny="mat-ripple-loader-centered",fa="mat-ripple-loader-disabled",sy=(()=>{class n{_document=w(X,{optional:!0});_animationMode=w(Fe,{optional:!0});_globalRippleOptions=w(CA,{optional:!0});_platform=w(At);_ngZone=w(at);_injector=w(kt);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(let e of ey)this._document?.addEventListener(e,this._onInteraction,ty)})}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);for(let i of ey)this._document?.removeEventListener(i,this._onInteraction,ty)}configureRipple(e,i){e.setAttribute(Vu,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(Nu))&&e.setAttribute(Nu,i.className||""),i.centered&&e.setAttribute(ny,""),i.disabled&&e.setAttribute(fa,"")}setDisabled(e,i){let r=this._hosts.get(e);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):i?e.setAttribute(fa,""):e.removeAttribute(fa)}_onInteraction=e=>{let i=_e(e);if(i instanceof HTMLElement){let r=i.closest(`[${Vu}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(Nu)),e.append(i);let r=this._animationMode==="NoopAnimations",s=this._globalRippleOptions,a=r?0:s?.animation?.enterDuration??ma.enterDuration,l=r?0:s?.animation?.exitDuration??ma.exitDuration,c={rippleDisabled:r||s?.disabled||e.hasAttribute(fa),rippleConfig:{centered:e.hasAttribute(ny),terminateOnPointerUp:s?.terminateOnPointerUp,animation:{enterDuration:a,exitDuration:l}}},h=new ju(c,this._ngZone,i,this._platform,this._injector),f=!c.rippleDisabled;f&&h.setupTriggerEvents(e),this._hosts.set(e,{target:c,renderer:h,hasSetUpEvents:f}),e.removeAttribute(Vu)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DA=["*",[["mat-toolbar-row"]]],SA=["*","mat-toolbar-row"],TA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),oy=(()=>{class n{_elementRef=w(gt);_platform=w(At);_document=w(X);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(i&1&&Ic(s,TA,5),i&2){let a;Qn(a=Yn())&&(r._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(ko(r.color?"mat-"+r.color:""),oe("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:SA,decls:2,vars:0,template:function(i,r){i&1&&(Sn(DA),Se(0),Se(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return n})();var ay=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[Jt,Jt]})}return n})();var MA=["mat-button",""],kA=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],OA=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var FA=new j("MAT_BUTTON_CONFIG");var PA=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],VA=(()=>{class n{_elementRef=w(gt);_platform=w(At);_ngZone=w(at);_animationMode=w(Fe,{optional:!0});_focusMonitor=w(ha);_rippleLoader=w(sy);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){w(rn).load(iy);let e=w(FA,{optional:!0}),i=this._elementRef.nativeElement,r=i.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"});for(let{attribute:s,mdcClasses:a}of PA)i.hasAttribute(s)&&r.add(...a)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ye],disabled:[2,"disabled","disabled",ye],ariaDisabled:[2,"aria-disabled","ariaDisabled",ye],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ye]},features:[Dn]})}return n})();var ly=(()=>{class n extends VA{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275cmp=ft({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(pe("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),ko(r.color?"mat-"+r.color:""),oe("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[St],attrs:MA,ngContentSelectors:OA,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Sn(kA),Ze(0,"span",0),Se(1),yt(2,"span",1),Se(3,1),vt(),Se(4,2),Ze(5,"span",2)(6,"span",3)),i&2&&oe("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-focus-indicator::before,.mat-mdc-raised-button:focus .mat-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return n})();var cy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[Jt,ry,Jt]})}return n})();var LA=["*"];var BA=new j("MAT_CARD_CONFIG"),uy=(()=>{class n{appearance;constructor(){let e=w(BA,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&oe("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:LA,decls:1,vars:0,template:function(i,r){i&1&&(Sn(),Se(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})();var dy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return n})();var hy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[Jt,Jt]})}return n})();var wy=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(bt(Cn),bt(gt))};static \u0275dir=ot({type:n})}return n})(),xy=(()=>{class n extends wy{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275dir=ot({type:n,features:[St]})}return n})(),Hu=new j("");var UA={provide:Hu,useExisting:Wn(()=>ba),multi:!0};function GA(){let n=Ti()?Ti().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var zA=new j(""),ba=(()=>{class n extends wy{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!GA())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(bt(Cn),bt(gt),bt(zA,8))};static \u0275dir=ot({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&De("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[ge([UA]),St]})}return n})();function ga(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var qu=new j(""),$A=new j("");function HA(n){return t=>{if(ga(t.value)||ga(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function qA(n){return t=>{if(ga(t.value)||ga(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function fy(n){return null}function Ay(n){return n!=null}function Iy(n){return Ro(n)?ie(n):n}function Ey(n){let t={};return n.forEach(e=>{t=e!=null?k(k({},t),e):t}),Object.keys(t).length===0?null:t}function Cy(n,t){return t.map(e=>e(n))}function WA(n){return!n.validate}function Dy(n){return n.map(t=>WA(t)?t:e=>t.validate(e))}function KA(n){if(!n)return null;let t=n.filter(Ay);return t.length==0?null:function(e){return Ey(Cy(e,t))}}function Sy(n){return n!=null?KA(Dy(n)):null}function QA(n){if(!n)return null;let t=n.filter(Ay);return t.length==0?null:function(e){let i=Cy(e,t).map(Iy);return dp(i).pipe(st(Ey))}}function Ty(n){return n!=null?QA(Dy(n)):null}function my(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function YA(n){return n._rawValidators}function XA(n){return n._rawAsyncValidators}function Uu(n){return n?Array.isArray(n)?n:[n]:[]}function ya(n,t){return Array.isArray(n)?n.includes(t):n===t}function py(n,t){let e=Uu(t);return Uu(n).forEach(r=>{ya(e,r)||e.push(r)}),e}function gy(n,t){return Uu(t).filter(e=>!ya(n,e))}var va=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Sy(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ty(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Gu=class extends va{name;get formDirective(){return null}get path(){return null}},Ts=class extends va{_parent=null;name=null;valueAccessor=null},zu=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ZA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hO=it(k({},ZA),{"[class.ng-submitted]":"isSubmitted"}),Ry=(()=>{class n extends zu{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(bt(Ts,2))};static \u0275dir=ot({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&oe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[St]})}return n})();var Es="VALID",pa="INVALID",qi="PENDING",Cs="DISABLED",Ki=class{},_a=class extends Ki{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Ds=class extends Ki{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Ss=class extends Ki{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Wi=class extends Ki{status;source;constructor(t,e){super(),this.status=t,this.source=e}};function JA(n){return(wa(n)?n.validators:n)||null}function tI(n){return Array.isArray(n)?Sy(n):n||null}function eI(n,t){return(wa(t)?t.asyncValidators:n)||null}function nI(n){return Array.isArray(n)?Ty(n):n||null}function wa(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var $u=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return tn(this.statusReactive)}set status(t){tn(()=>this.statusReactive.set(t))}_status=Po(()=>this.statusReactive());statusReactive=Jr(void 0);get valid(){return this.status===Es}get invalid(){return this.status===pa}get pending(){return this.status==qi}get disabled(){return this.status===Cs}get enabled(){return this.status!==Cs}errors;get pristine(){return tn(this.pristineReactive)}set pristine(t){tn(()=>this.pristineReactive.set(t))}_pristine=Po(()=>this.pristineReactive());pristineReactive=Jr(!0);get dirty(){return!this.pristine}get touched(){return tn(this.touchedReactive)}set touched(t){tn(()=>this.touchedReactive.set(t))}_touched=Po(()=>this.touchedReactive());touchedReactive=Jr(!1);get untouched(){return!this.touched}_events=new tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(py(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(py(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gy(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gy(t,this._rawAsyncValidators))}hasValidator(t){return ya(this._rawValidators,t)}hasAsyncValidator(t){return ya(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(it(k({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Ss(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Ss(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(it(k({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Ds(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Ds(!0,i))}markAsPending(t={}){this.status=qi;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Wi(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(it(k({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Cs,this.errors=null,this._forEachChild(r=>{r.disable(it(k({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _a(this.value,i)),this._events.next(new Wi(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(it(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Es,this._forEachChild(i=>{i.enable(it(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(it(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Es||this.status===qi)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _a(this.value,e)),this._events.next(new Wi(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(it(k({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cs:Es}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=qi,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=Iy(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Wi(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Ft,this.statusChanges=new Ft}_calculateStatus(){return this._allControlsDisabled()?Cs:this.errors?pa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qi)?qi:this._anyControlsHaveStatus(pa)?pa:Es}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Ds(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ss(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wa(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=tI(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=nI(this._rawAsyncValidators)}};var My=new j("CallSetDisabledState",{providedIn:"root",factory:()=>Wu}),Wu="always";function iI(n,t){return[...t.path,n]}function rI(n,t,e=Wu){oI(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),aI(n,t),cI(n,t),lI(n,t),sI(n,t)}function yy(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function sI(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function oI(n,t){let e=YA(n);t.validator!==null?n.setValidators(my(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=XA(n);t.asyncValidator!==null?n.setAsyncValidators(my(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();yy(t._rawValidators,r),yy(t._rawAsyncValidators,r)}function aI(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ky(n,t)})}function lI(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ky(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function ky(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function cI(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function uI(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function dI(n){return Object.getPrototypeOf(n.constructor)===xy}function hI(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===ba?e=s:dI(s)?i=s:r=s}),r||i||e||null}function vy(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function _y(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var fI=class extends $u{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(JA(e),eI(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wa(e)&&(e.nonNullable||e.initialValueIsDefault)&&(_y(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){vy(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){vy(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){_y(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var mI={provide:Ts,useExisting:Wn(()=>Ku)},by=Promise.resolve(),Ku=(()=>{class n extends Ts{_changeDetectorRef;callSetDisabledState;control=new fI;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ft;constructor(e,i,r,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=hI(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),uI(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){by.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&ye(i);by.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?iI(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(bt(Gu,9),bt(qu,10),bt($A,10),bt(Hu,10),bt(Je,8),bt(My,8))};static \u0275dir=ot({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ge([mI]),St,Ie]})}return n})();var pI={provide:Hu,useExisting:Wn(()=>Qu),multi:!0},Qu=(()=>{class n extends xy{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&De("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[ge([pI]),St]})}return n})();function Oy(n){return typeof n=="number"?n:parseFloat(n)}var Fy=(()=>{class n{_validator=fy;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fy,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,features:[Ie]})}return n})(),gI={provide:qu,useExisting:Wn(()=>Yu),multi:!0},Yu=(()=>{class n extends Fy{max;inputName="max";normalizeInput=e=>Oy(e);createValidator=e=>qA(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&pe("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[ge([gI]),St]})}return n})(),yI={provide:qu,useExisting:Wn(()=>Xu),multi:!0},Xu=(()=>{class n extends Fy{min;inputName="min";normalizeInput=e=>Oy(e);createValidator=e=>HA(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&pe("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[ge([yI]),St]})}return n})();var vI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({})}return n})();var Py=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:My,useValue:e.callSetDisabledState??Wu}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[vI]})}return n})();var wI=20,Ny=(()=>{class n{_ngZone=w(at);_platform=w(At);_document=w(X,{optional:!0});constructor(){}_scrolled=new tt;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=wI){return this._platform.isBrowser?new Ao(i=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(mc(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):G()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Ht(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=sn(i),s=e.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return hp(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xI=20,Zu=(()=>{class n{_platform=w(At);_listeners;_viewportSize;_change=new tt;_document=w(X,{optional:!0});constructor(){let e=w(at),i=w(Ye).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=s=>this._change.next(s);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),a=-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,l=-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:a,left:l}}change(e=xI){return e>0?this._change.pipe(mc(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({})}return n})(),Ju=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({imports:[Ve,Vy,Ve,Vy]})}return n})();var Rs=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Qi=class extends Rs{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=s}},Yi=class extends Rs{templateRef;viewContainerRef;context;injector;constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},td=class extends Rs{element;constructor(t){super(),this.element=t instanceof gt?t.nativeElement:t}},Xi=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Qi)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Yi)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof td)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var xa=class extends Xi{outletElement;_appRef;_defaultInjector;_document;constructor(t,e,i,r,s){super(),this.outletElement=t,this._appRef=i,this._defaultInjector=r,this._document=s}attachComponentPortal(t){let e;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,r=i.get(xc,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else e=Vo(t.component,{elementInjector:t.injector||this._defaultInjector||kt.NULL,environmentInjector:this._appRef.injector,projectableNodes:t.projectableNodes||void 0}),this._appRef.attachView(e.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(e.hostView),e.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}attachDomPortal=t=>{let e=t.element;e.parentNode;let i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var Ms=(()=>{class n extends Xi{_moduleRef=w(xc,{optional:!0});_document=w(X);_viewContainerRef=w(Si);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new Ft;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,r=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let r=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[St]})}return n})();var si=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({})}return n})();var Ly=Cu(),ed=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Dt(-this._previousScrollPosition.left),t.style.top=Dt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,s=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Ly&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ly&&(i.scrollBehavior=s,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var nd=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Ht(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},Aa=class{enable(){}disable(){}attach(){}};function id(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,s=n.right<e.left,a=n.left>e.right;return i||r||s||a})}function By(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,s=n.left<e.left,a=n.right>e.right;return i||r||s||a})}var rd=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();id(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},AI=(()=>{class n{_scrollDispatcher=w(Ny);_viewportRuler=w(Zu);_ngZone=w(at);_document=w(X);constructor(){}noop=()=>new Aa;close=e=>new nd(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new ed(this._viewportRuler,this._document);reposition=e=>new rd(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ks=class{positionStrategy;scrollStrategy=new Aa;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var sd=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Hy=(()=>{class n{_attachedOverlays=[];_document=w(X);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),II=(()=>{class n extends Hy{_ngZone=w(at);_renderer=w(Ye).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EI=(()=>{class n extends Hy{_platform=w(At);_ngZone=w(at,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(e){if(super.add(e),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=e=>{this._pointerDownEventTarget=_e(e)};_clickListener=e=>{let i=_e(e),r=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let a=s.length-1;a>-1;a--){let l=s[a];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(jy(l.overlayElement,i)||jy(l.overlayElement,r))break;let c=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(e)):c.next(e)}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jy(n,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===n)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var qy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),Ia=(()=>{class n{_platform=w(At);_containerElement;_document=w(X);_styleLoader=w(rn);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Du()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(e),Du()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(qy)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zi=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropElement=null;_backdropTimeout;_backdropClick=new tt;_attachments=new tt;_detachments=new tt;_positionStrategy;_scrollStrategy;_locationChanges=Hn.EMPTY;_cleanupBackdropClick;_cleanupBackdropTransitionEnd;_previousHostParent;_keydownEvents=new tt;_outsidePointerEvents=new tt;_renders=new tt;_afterRenderRef;_afterNextRenderRef;constructor(t,e,i,r,s,a,l,c,h,f=!1,p,_){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=a,this._document=l,this._location=c,this._outsideClickDispatcher=h,this._animationsDisabled=f,this._injector=p,this._renderer=_,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=tn(()=>Ip(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=En(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=k(k({},this._config),t),this._updateElementSize()}setDirection(t){this._config=it(k({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Dt(this._config.width),t.height=Dt(this._config.height),t.minWidth=Dt(this._config.minWidth),t.minHeight=Dt(this._config.minHeight),t.maxWidth=Dt(this._config.maxWidth),t.maxHeight=Dt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._cleanupBackdropClick?.(),this._cleanupBackdropClick=this._renderer.listen(this._backdropElement,"click",e=>this._backdropClick.next(e)),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{this._cleanupBackdropTransitionEnd?.(),this._cleanupBackdropTransitionEnd=this._renderer.listen(t,"transitionend",e=>{this._disposeBackdrop(e.target)})}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=zi(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(Ke(Co(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){this._cleanupBackdropClick?.(),this._cleanupBackdropTransitionEnd?.(),t&&(t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Uy="cdk-overlay-connected-position-bounding-box",CI=/([A-Za-z%]+)$/,od=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new tt;_resizeSubscription=Hn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Uy),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],a;for(let l of this._preferredPositions){let c=this._getOriginPoint(t,r,l),h=this._getOverlayPoint(c,e,l),f=this._getOverlayFit(h,e,i,l);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,c);return}if(this._canFitWithFlexibleDimensions(f,h,i)){s.push({position:l,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,l)});continue}(!a||a.overlayFit.visibleArea<f.visibleArea)&&(a={overlayFit:f,overlayPoint:h,originPoint:c,position:l,overlayRect:e})}if(s.length){let l=null,c=-1;for(let h of s){let f=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);f>c&&(c=f,l=h)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&oi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Uy),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let a=this._isRtl()?t.right:t.left,l=this._isRtl()?t.left:t.right;r=i.originX=="start"?a:l}e.left<0&&(r-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){let s=zy(e),{x:a,y:l}=t,c=this._getOffset(r,"x"),h=this._getOffset(r,"y");c&&(a+=c),h&&(l+=h);let f=0-a,p=a+s.width-i.width,_=0-l,D=l+s.height-i.height,T=this._subtractOverflows(s.width,f,p),F=this._subtractOverflows(s.height,_,D),O=T*F;return{visibleArea:O,isCompletelyWithinViewport:s.width*s.height===O,fitsInViewportVertically:F===s.height,fitsInViewportHorizontally:T==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,s=i.right-e.x,a=Gy(this._overlayRef.getConfig().minHeight),l=Gy(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||a!=null&&a<=r,h=t.fitsInViewportHorizontally||l!=null&&l<=s;return c&&h}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=zy(e),s=this._viewportRect,a=Math.max(t.x+r.width-s.width,0),l=Math.max(t.y+r.height-s.height,0),c=Math.max(s.top-i.top-t.y,0),h=Math.max(s.left-i.left-t.x,0),f=0,p=0;return r.width<=s.width?f=h||-a:f=t.x<this._viewportMargin?s.left-i.left-t.x:0,r.height<=s.height?p=c||-l:p=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:f,y:p},{x:t.x+f,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!DI(this._lastScrollVisibility,i)){let r=new sd(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),s,a,l;if(e.overlayY==="top")a=t.y,s=i.height-a+this._viewportMargin;else if(e.overlayY==="bottom")l=i.height-t.y+this._viewportMargin*2,s=i.height-l+this._viewportMargin;else{let D=Math.min(i.bottom-t.y+i.top,t.y),T=this._lastBoundingBoxSize.height;s=D*2,a=t.y-D,s>T&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-T/2)}let c=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,h=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,f,p,_;if(h)_=i.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(c)p=t.x,f=i.right-t.x;else{let D=Math.min(i.right-t.x+i.left,t.x),T=this._lastBoundingBoxSize.width;f=D*2,p=t.x-D,f>T&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-T/2)}return{top:a,left:p,bottom:l,right:_,width:f,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=Dt(i.height),r.top=Dt(i.top),r.bottom=Dt(i.bottom),r.width=Dt(i.width),r.left=Dt(i.left),r.right=Dt(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Dt(s)),a&&(r.maxWidth=Dt(a))}this._lastBoundingBoxSize=i,oi(this._boundingBox.style,r)}_resetBoundingBoxStyles(){oi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){oi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();oi(i,this._getExactOverlayY(e,t,f)),oi(i,this._getExactOverlayX(e,t,f))}else i.position="static";let l="",c=this._getOffset(e,"x"),h=this._getOffset(e,"y");c&&(l+=`translateX(${c}px) `),h&&(l+=`translateY(${h}px)`),i.transform=l.trim(),a.maxHeight&&(r?i.maxHeight=Dt(a.maxHeight):s&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=Dt(a.maxWidth):s&&(i.maxWidth="")),oi(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(s.y+this._overlayRect.height)}px`}else r.top=Dt(s.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let a;if(this._isRtl()?a=t.overlayX==="end"?"left":"right":a=t.overlayX==="end"?"right":"left",a==="right"){let l=this._document.documentElement.clientWidth;r.right=`${l-(s.x+this._overlayRect.width)}px`}else r.left=Dt(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:By(t,i),isOriginOutsideView:id(t,i),isOverlayClipped:By(e,i),isOverlayOutsideView:id(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&zi(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof gt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function oi(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Gy(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(CI);return!e||e==="px"?parseFloat(t):null}return n||null}function zy(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function DI(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var $y="cdk-global-overlay-wrapper",ad=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add($y),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:a,maxHeight:l}=i,c=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),h=(s==="100%"||s==="100vh")&&(!l||l==="100%"||l==="100vh"),f=this._xPosition,p=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",D="",T="",F="";c?F="flex-start":f==="center"?(F="center",_?T=p:D=p):_?f==="left"||f==="end"?(F="flex-end",D=p):(f==="right"||f==="start")&&(F="flex-start",T=p):f==="left"||f==="start"?(F="flex-start",D=p):(f==="right"||f==="end")&&(F="flex-end",T=p),t.position=this._cssPosition,t.marginLeft=c?"0":D,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":T,e.justifyContent=F,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove($y),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},SI=(()=>{class n{_viewportRuler=w(Zu);_document=w(X);_platform=w(At);_overlayContainer=w(Ia);constructor(){}global(){return new ad}flexibleConnectedTo(e){return new od(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),on=(()=>{class n{scrollStrategies=w(AI);_overlayContainer=w(Ia);_positionBuilder=w(SI);_keyboardDispatcher=w(II);_injector=w(kt);_ngZone=w(at);_document=w(X);_directionality=w(Hi);_location=w(Ri);_outsideClickDispatcher=w(EI);_animationsModuleType=w(Fe,{optional:!0});_idGenerator=w(ri);_renderer=w(Ye).createRenderer(null,null);_appRef;_styleLoader=w(rn);constructor(){}create(e){this._styleLoader.load(qy);let i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),a=new ks(e);return a.direction=a.direction||this._directionality.value,new Zi(s,i,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(In),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Kn)),new xa(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var TI=new j("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=w(on);return()=>n.scrollStrategies.reposition()}});function RI(n){return()=>n.scrollStrategies.reposition()}var MI={provide:TI,deps:[on],useFactory:RI},Ea=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({providers:[on,MI],imports:[Ve,si,Ju,Ju]})}return n})();function kI(n,t){}var Mn=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var ud=(()=>{class n extends Xi{_elementRef=w(gt);_focusTrapFactory=w(Wg);_config;_interactivityChecker=w(ku);_ngZone=w(at);_overlayRef=w(Zi);_focusMonitor=w(ha);_renderer=w(Cn);_platform=w(At);_document=w(X,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=w(Je);_injector=w(kt);_isDestroyed=!1;constructor(){super(),this._config=w(Mn,{optional:!0})||new Mn,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{s(),a(),e.removeAttribute("tabindex")},s=this._renderer.listen(e,"blur",r),a=this._renderer.listen(e,"mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||En(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=Is(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,i=Is();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Is()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ft({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&Oo(Ms,7),i&2){let s;Qn(s=Yn())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&pe("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[St],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Ce(0,kI,0,0,"ng-template",0)},dependencies:[Ms],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})(),Os=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new tt;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,e){this.overlayRef=t,this.config=e,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!la(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},OI=new j("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=w(on);return()=>n.scrollStrategies.block()}}),FI=new j("DialogData"),PI=new j("DefaultDialogConfig");var dd=(()=>{class n{_overlay=w(on);_injector=w(kt);_defaultOptions=w(PI,{optional:!0});_parentDialog=w(n,{optional:!0,skipSelf:!0});_overlayContainer=w(Ia);_idGenerator=w(ri);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new tt;_afterOpenedAtThisLevel=new tt;_ariaHiddenElements=new Map;_scrollStrategy=w(OI);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=qn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(We(void 0)));constructor(){}open(e,i){let r=this._defaultOptions||new Mn;i=k(k({},r),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),a=this._overlay.create(s),l=new Os(a,i),c=this._attachContainer(a,l,i);return l.containerInstance=c,this._attachDialogContent(e,l,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){ld(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){ld(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),ld(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new ks({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){let s=r.injector||r.viewContainerRef?.injector,a=[{provide:Mn,useValue:r},{provide:Os,useValue:i},{provide:Zi,useValue:e}],l;r.container?typeof r.container=="function"?l=r.container:(l=r.container.type,a.push(...r.container.providers(r))):l=ud;let c=new Qi(l,r.viewContainerRef,kt.create({parent:s||this._injector,providers:a}));return e.attach(c).instance}_attachDialogContent(e,i,r,s){if(e instanceof Zr){let a=this._createInjector(s,i,r,void 0),l={$implicit:s.data,dialogRef:i};s.templateContext&&(l=k(k({},l),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),r.attachTemplatePortal(new Yi(e,null,l,a))}else{let a=this._createInjector(s,i,r,this._injector),l=r.attachComponentPortal(new Qi(e,s.viewContainerRef,a));i.componentRef=l,i.componentInstance=l.instance}}_createInjector(e,i,r,s){let a=e.injector||e.viewContainerRef?.injector,l=[{provide:FI,useValue:e.data},{provide:Os,useValue:i}];return e.providers&&(typeof e.providers=="function"?l.push(...e.providers(i,e,r)):l.push(...e.providers)),e.direction&&(!a||!a.get(Hi,null,{optional:!0}))&&l.push({provide:Hi,useValue:{value:e.direction,change:G()}}),kt.create({parent:a||s,providers:l})}_removeOpenDialog(e,i){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ld(n,t){let e=n.length;for(;e--;)t(n[e])}var Wy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({providers:[dd],imports:[Ea,si,Qg,si]})}return n})();function VI(n,t){}var Da=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},hd="mdc-dialog--open",Ky="mdc-dialog--opening",Qy="mdc-dialog--closing",NI=150,LI=75,BI=(()=>{class n extends ud{_animationMode=w(Fe,{optional:!0});_animationStateChanged=new Ft;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Xy(this._config.enterAnimationDuration)??NI:0;_exitAnimationDuration=this._animationsEnabled?Xy(this._config.exitAnimationDuration)??LI:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Yy,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ky,hd)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(hd),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(hd),this._animationsEnabled?(this._hostElement.style.setProperty(Yy,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Qy)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Ky,Qy)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mt(n)))(r||n)}})();static \u0275cmp=ft({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(Ac("id",r._config.id),pe("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),oe("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},features:[St],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(yt(0,"div",0)(1,"div",1),Ce(2,VI,0,0,"ng-template",2),vt()())},dependencies:[Ms],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})(),Yy="--mat-dialog-transition-duration";function Xy(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?ca(n.substring(0,n.length-2)):n.endsWith("s")?ca(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var Ca=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(Ca||{}),fd=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new tt;_beforeClosed=new tt;_result;_closeFallbackTimeout;_state=Ca.OPEN;_closeInteractionType;constructor(t,e,i){this._ref=t,this._containerInstance=i,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Ht(r=>r.state==="opened"),re(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ht(r=>r.state==="closed"),re(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Co(this.backdropClick(),this.keydownEvents().pipe(Ht(r=>r.keyCode===27&&!this.disableClose&&!la(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),jI(this,r.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Ht(e=>e.state==="closing"),re(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=Ca.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=Ca.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function jI(n,t,e){return n._closeInteractionType=t,n.close(e)}var md=new j("MatMdcDialogData"),UI=new j("mat-mdc-dialog-default-options"),GI=new j("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=w(on);return()=>n.scrollStrategies.block()}});var pd=(()=>{class n{_overlay=w(on);_defaultOptions=w(UI,{optional:!0});_scrollStrategy=w(GI);_parentDialog=w(n,{optional:!0,skipSelf:!0});_idGenerator=w(ri);_dialog=w(dd);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new tt;_afterOpenedAtThisLevel=new tt;dialogConfigClass=Da;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=qn(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(We(void 0)));constructor(){this._dialogRefConstructor=fd,this._dialogContainerType=BI,this._dialogDataToken=md}open(e,i){let r;i=k(k({},this._defaultOptions||new Da),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(e,it(k({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Mn,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(a,l,c)=>(r=new this._dialogRefConstructor(a,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(r);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sa=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=H({type:n});static \u0275inj=$({providers:[pd],imports:[Wy,Ea,si,Jt,Jt]})}return n})();function HI(n,t){if(n&1&&(yt(0,"li"),Zt(1),vt()),n&2){let e=t.$implicit;se(),Fo("",e.rank," of ",e.suit,"")}}function qI(n,t){if(n&1&&(yt(0,"li")(1,"strong"),Zt(2),Mp(3,"date"),vt(),yt(4,"ul"),Ce(5,HI,2,2,"li",2),vt()()),n&2){let e=t.$implicit;se(2),Dp(kp(3,2,e.timestamp.toDate(),"short")),se(3),Xe("ngForOf",e.dealtCards)}}var Ta=class n{constructor(t){this.data=t}static \u0275fac=function(e){return new(e||n)(bt(md))};static \u0275cmp=ft({type:n,selectors:[["app-deck-history-dialog"]],features:[ge([Lo])],decls:5,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(yt(0,"h1",0),Zt(1,"Dealt Cards History"),vt(),yt(2,"div",1)(3,"ul"),Ce(4,qI,6,5,"li",2),vt()()),e&2&&(se(4),Xe("ngForOf",i.data.history))},dependencies:[ts,No,Lo],encapsulation:2})};function WI(n,t){return()=>{if(Bo(t)){let e=Array.from(n.querySelectorAll(`[class*=${Jy}]`)),i=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${Jy}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}}var KI={provide:Mo,useFactory:WI,deps:[X,Ee],multi:!0},Jy="flex-layout-";var Ji=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=H({type:n}),n.\u0275inj=$({providers:[KI]}),n})();var Ra={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Fs=new j("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Ra});var Ma=new j("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1});var gd=new j("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});var tv="(orientation: portrait) and (max-width: 599.98px)",ev="(orientation: landscape) and (max-width: 959.98px)",nv="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",iv="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",rv="(orientation: portrait) and (min-width: 840px)",sv="(orientation: landscape) and (min-width: 1280px)",an={HANDSET:`${tv}, ${ev}`,TABLET:`${nv} , ${iv}`,WEB:`${rv}, ${sv} `,HANDSET_PORTRAIT:`${tv}`,TABLET_PORTRAIT:`${nv} `,WEB_PORTRAIT:`${rv}`,HANDSET_LANDSCAPE:`${ev}`,TABLET_LANDSCAPE:`${iv}`,WEB_LANDSCAPE:`${sv}`},aP=[{alias:"handset",priority:2e3,mediaQuery:an.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:an.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:an.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:an.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:an.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:an.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:an.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:an.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:an.WEB_PORTRAIT,overlapping:!0}];var yd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=H({type:n}),n.\u0275inj=$({imports:[Ji]}),n})();var vd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=H({type:n}),n.\u0275inj=$({imports:[Ji,Ve]}),n})();var _d=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=H({type:n}),n.\u0275inj=$({imports:[Ji]}),n})();var lv=(()=>{class n{constructor(e,i){Mi(i)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,i=[]){return{ngModule:n,providers:e.serverLoaded?[{provide:Fs,useValue:k(k({},Ra),e)},{provide:gd,useValue:i,multi:!0},{provide:Ma,useValue:!0}]:[{provide:Fs,useValue:k(k({},Ra),e)},{provide:gd,useValue:i,multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)(ht(Ma),ht(Ee))},n.\u0275mod=H({type:n}),n.\u0275inj=$({imports:[vd,yd,_d,vd,yd,_d]}),n})();var uv=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},QI=function(n){let t=[],e=0,i=0;for(;e<n.length;){let r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[e++],a=n[e++],l=n[e++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[e++],a=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return t.join("")},dv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],a=r+1<n.length,l=a?n[r+1]:0,c=r+2<n.length,h=c?n[r+2]:0,f=s>>2,p=(s&3)<<4|l>>4,_=(l&15)<<2|h>>6,D=h&63;c||(D=64,a||(_=64)),i.push(e[f],e[p],e[_],e[D])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(uv(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):QI(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=e[n.charAt(r++)],l=r<n.length?e[n.charAt(r)]:0;++r;let h=r<n.length?e[n.charAt(r)]:64;++r;let p=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||l==null||h==null||p==null)throw new bd;let _=s<<2|l>>4;if(i.push(_),h!==64){let D=l<<4&240|h>>2;if(i.push(D),p!==64){let T=h<<6&192|p;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},YI=function(n){let t=uv(n);return dv.encodeByteArray(t,!0)},Ps=function(n){return YI(n).replace(/\./g,"")},XI=function(n){try{return dv.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ZI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var JI=()=>ZI().__FIREBASE_DEFAULTS__,tE=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&XI(n[1]);return t&&JSON.parse(t)},wd=()=>{try{return JI()||tE()||eE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nE=n=>{var t,e;return(e=(t=wd())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},hv=n=>{let t=nE(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},xd=()=>{var n;return(n=wd())===null||n===void 0?void 0:n.config};var ka=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}};function fv(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ps(JSON.stringify(e)),Ps(JSON.stringify(a)),""].join(".")}function mv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iE(){var n;let t=(n=wd())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pv(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gv(){return!iE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vs(){try{return typeof indexedDB=="object"}catch{return!1}}function Oa(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}function yv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var rE="FirebaseError",ce=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=rE,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ln.prototype.create)}},ln=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],a=s?sE(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new ce(r,l,i)}};function sE(n,t){return n.replace(oE,(e,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var oE=/\{\$([^}]+)}/g;function ai(n,t){if(n===t)return!0;let e=Object.keys(n),i=Object.keys(t);for(let r of e){if(!i.includes(r))return!1;let s=n[r],a=t[r];if(cv(s)&&cv(a)){if(!ai(s,a))return!1}else if(s!==a)return!1}for(let r of i)if(!e.includes(r))return!1;return!0}function cv(n){return n!==null&&typeof n=="object"}var aE=1e3,lE=2,cE=4*60*60*1e3,uE=.5;function Ad(n,t=aE,e=lE){let i=t*Math.pow(e,n),r=Math.round(uE*i*(Math.random()-.5)*2);return Math.min(cE,i+r)}function cn(n){return n&&n._delegate?n._delegate:n}var Yt=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var li="[DEFAULT]";var Id=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let i=new ka;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hE(t))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(let[e,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=li){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return S(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=li){return this.instances.has(t)}getOptions(t=li){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(let[s,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(t,e){var i;let r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);let a=this.instances.get(r);return a&&t(a,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let i=this.onInitCallbacks.get(e);if(i)for(let r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dE(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=li){return this.component?this.component.multipleInstances?t:li:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dE(n){return n===li?void 0:n}function hE(n){return n.instantiationMode==="EAGER"}var Fa=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new Id(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var fE=[],et=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(et||{}),mE={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},pE=et.INFO,gE={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},yE=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),r=gE[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},kn=class{constructor(t){this.name=t,this._logLevel=pE,this._logHandler=yE,this._userLogHandler=null,fE.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}};var vE=(n,t)=>t.some(e=>n instanceof e),vv,_v;function _E(){return vv||(vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bE(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bv=new WeakMap,Cd=new WeakMap,wv=new WeakMap,Ed=new WeakMap,Sd=new WeakMap;function wE(n){let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{e(Ne(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&bv.set(e,n)}).catch(()=>{}),Sd.set(t,n),t}function xE(n){if(Cd.has(n))return;let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{e(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Cd.set(n,t)}var Dd={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Cd.get(n);if(t==="objectStoreNames")return n.objectStoreNames||wv.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ne(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function xv(n){Dd=n(Dd)}function AE(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let i=n.call(Pa(this),t,...e);return wv.set(i,t.sort?t.sort():[t]),Ne(i)}:bE().includes(n)?function(...t){return n.apply(Pa(this),t),Ne(bv.get(this))}:function(...t){return Ne(n.apply(Pa(this),t))}}function IE(n){return typeof n=="function"?AE(n):(n instanceof IDBTransaction&&xE(n),vE(n,_E())?new Proxy(n,Dd):n)}function Ne(n){if(n instanceof IDBRequest)return wE(n);if(Ed.has(n))return Ed.get(n);let t=IE(n);return t!==n&&(Ed.set(n,t),Sd.set(t,n)),t}var Pa=n=>Sd.get(n);function Va(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){let a=indexedDB.open(n,t),l=Ne(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Ne(a.result),c.oldVersion,c.newVersion,Ne(a.transaction),c)}),e&&a.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}var EE=["get","getKey","getAll","getAllKeys","count"],CE=["put","add","delete","clear"],Td=new Map;function Av(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Td.get(t))return Td.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,r=CE.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||EE.includes(e)))return;let s=function(a,...l){return S(this,null,function*(){let c=this.transaction(a,r?"readwrite":"readonly"),h=c.store;return i&&(h=h.index(l.shift())),(yield Promise.all([h[e](...l),r&&c.done]))[0]})};return Td.set(t,s),s}xv(n=>it(k({},n),{get:(t,e,i)=>Av(t,e)||n.get(t,e,i),has:(t,e)=>!!Av(t,e)||n.has(t,e)}));var Md=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(DE(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function DE(n){let t=n.getComponent();return t?.type==="VERSION"}var kd="@firebase/app",Iv="0.10.17";var un=new kn("@firebase/app"),SE="@firebase/app-compat",TE="@firebase/analytics-compat",RE="@firebase/analytics",ME="@firebase/app-check-compat",kE="@firebase/app-check",OE="@firebase/auth",FE="@firebase/auth-compat",PE="@firebase/database",VE="@firebase/data-connect",NE="@firebase/database-compat",LE="@firebase/functions",BE="@firebase/functions-compat",jE="@firebase/installations",UE="@firebase/installations-compat",GE="@firebase/messaging",zE="@firebase/messaging-compat",$E="@firebase/performance",HE="@firebase/performance-compat",qE="@firebase/remote-config",WE="@firebase/remote-config-compat",KE="@firebase/storage",QE="@firebase/storage-compat",YE="@firebase/firestore",XE="@firebase/vertexai",ZE="@firebase/firestore-compat",JE="firebase",tC="11.1.0";var Od="[DEFAULT]",eC={[kd]:"fire-core",[SE]:"fire-core-compat",[RE]:"fire-analytics",[TE]:"fire-analytics-compat",[kE]:"fire-app-check",[ME]:"fire-app-check-compat",[OE]:"fire-auth",[FE]:"fire-auth-compat",[PE]:"fire-rtdb",[VE]:"fire-data-connect",[NE]:"fire-rtdb-compat",[LE]:"fire-fn",[BE]:"fire-fn-compat",[jE]:"fire-iid",[UE]:"fire-iid-compat",[GE]:"fire-fcm",[zE]:"fire-fcm-compat",[$E]:"fire-perf",[HE]:"fire-perf-compat",[qE]:"fire-rc",[WE]:"fire-rc-compat",[KE]:"fire-gcs",[QE]:"fire-gcs-compat",[YE]:"fire-fst",[ZE]:"fire-fst-compat",[XE]:"fire-vertex","fire-js":"fire-js",[JE]:"fire-js-all"};var Na=new Map,nC=new Map,Fd=new Map;function Ev(n,t){try{n.container.addComponent(t)}catch(e){un.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Re(n){let t=n.name;if(Fd.has(t))return un.debug(`There were multiple attempts to register component ${t}.`),!1;Fd.set(t,n);for(let e of Na.values())Ev(e,n);for(let e of nC.values())Ev(e,n);return!0}function Fn(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}var iC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new ln("app","Firebase",iC);var Pd=class{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}};var Tv=tC;function Ld(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let i=Object.assign({name:Od,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw On.create("bad-app-name",{appName:String(r)});if(e||(e=xd()),!e)throw On.create("no-options");let s=Na.get(r);if(s){if(ai(e,s.options)&&ai(i,s.config))return s;throw On.create("duplicate-app",{appName:r})}let a=new Fa(r);for(let c of Fd.values())a.addComponent(c);let l=new Pd(e,i,a);return Na.set(r,l),l}function Ls(n=Od){let t=Na.get(n);if(!t&&n===Od&&xd())return Ld();if(!t)throw On.create("no-app",{appName:n});return t}function te(n,t,e){var i;let r=(i=eC[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);let s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),un.warn(l.join(" "));return}Re(new Yt(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var rC="firebase-heartbeat-database",sC=1,Ns="firebase-heartbeat-store",Rd=null;function Rv(){return Rd||(Rd=Va(rC,sC,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ns)}catch(e){console.warn(e)}}}}).catch(n=>{throw On.create("idb-open",{originalErrorMessage:n.message})})),Rd}function oC(n){return S(this,null,function*(){try{let e=(yield Rv()).transaction(Ns),i=yield e.objectStore(Ns).get(Mv(n));return yield e.done,i}catch(t){if(t instanceof ce)un.warn(t.message);else{let e=On.create("idb-get",{originalErrorMessage:t?.message});un.warn(e.message)}}})}function Cv(n,t){return S(this,null,function*(){try{let i=(yield Rv()).transaction(Ns,"readwrite");yield i.objectStore(Ns).put(t,Mv(n)),yield i.done}catch(e){if(e instanceof ce)un.warn(e.message);else{let i=On.create("idb-set",{originalErrorMessage:e?.message});un.warn(i.message)}}})}function Mv(n){return`${n.name}!${n.options.appId}`}var aC=1024,lC=30*24*60*60*1e3,Vd=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Nd(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return S(this,null,function*(){var t,e;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Dv();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let l=new Date(a.date).valueOf();return Date.now()-l<=lC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){un.warn(i)}})}getHeartbeatsHeader(){return S(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Dv(),{heartbeatsToSend:i,unsentEntries:r}=cC(this._heartbeatsCache.heartbeats),s=Ps(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return un.warn(e),""}})}};function Dv(){return new Date().toISOString().substring(0,10)}function cC(n,t=aC){let e=[],i=n.slice();for(let r of n){let s=e.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Sv(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Sv(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var Nd=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Vs()?Oa().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield oC(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Cv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return S(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Cv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function Sv(n){return Ps(JSON.stringify({version:2,heartbeats:n})).length}function uC(n){Re(new Yt("platform-logger",t=>new Md(t),"PRIVATE")),Re(new Yt("heartbeat",t=>new Vd(t),"PRIVATE")),te(kd,Iv,n),te(kd,Iv,"esm2017"),te("fire-js","")}uC("");var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ov={};var Pn,Bd;(function(){var n;function t(A,g){function v(){}v.prototype=g.prototype,A.D=g.prototype,A.prototype=new v,A.prototype.constructor=A,A.C=function(b,x,E){for(var y=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)y[$e-2]=arguments[$e];return g.prototype[x].apply(b,y)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,g,v){v||(v=0);var b=Array(16);if(typeof g=="string")for(var x=0;16>x;++x)b[x]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(x=0;16>x;++x)b[x]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=A.g[0],v=A.g[1],x=A.g[2];var E=A.g[3],y=g+(E^v&(x^E))+b[0]+3614090360&4294967295;g=v+(y<<7&4294967295|y>>>25),y=E+(x^g&(v^x))+b[1]+3905402710&4294967295,E=g+(y<<12&4294967295|y>>>20),y=x+(v^E&(g^v))+b[2]+606105819&4294967295,x=E+(y<<17&4294967295|y>>>15),y=v+(g^x&(E^g))+b[3]+3250441966&4294967295,v=x+(y<<22&4294967295|y>>>10),y=g+(E^v&(x^E))+b[4]+4118548399&4294967295,g=v+(y<<7&4294967295|y>>>25),y=E+(x^g&(v^x))+b[5]+1200080426&4294967295,E=g+(y<<12&4294967295|y>>>20),y=x+(v^E&(g^v))+b[6]+2821735955&4294967295,x=E+(y<<17&4294967295|y>>>15),y=v+(g^x&(E^g))+b[7]+4249261313&4294967295,v=x+(y<<22&4294967295|y>>>10),y=g+(E^v&(x^E))+b[8]+1770035416&4294967295,g=v+(y<<7&4294967295|y>>>25),y=E+(x^g&(v^x))+b[9]+2336552879&4294967295,E=g+(y<<12&4294967295|y>>>20),y=x+(v^E&(g^v))+b[10]+4294925233&4294967295,x=E+(y<<17&4294967295|y>>>15),y=v+(g^x&(E^g))+b[11]+2304563134&4294967295,v=x+(y<<22&4294967295|y>>>10),y=g+(E^v&(x^E))+b[12]+1804603682&4294967295,g=v+(y<<7&4294967295|y>>>25),y=E+(x^g&(v^x))+b[13]+4254626195&4294967295,E=g+(y<<12&4294967295|y>>>20),y=x+(v^E&(g^v))+b[14]+2792965006&4294967295,x=E+(y<<17&4294967295|y>>>15),y=v+(g^x&(E^g))+b[15]+1236535329&4294967295,v=x+(y<<22&4294967295|y>>>10),y=g+(x^E&(v^x))+b[1]+4129170786&4294967295,g=v+(y<<5&4294967295|y>>>27),y=E+(v^x&(g^v))+b[6]+3225465664&4294967295,E=g+(y<<9&4294967295|y>>>23),y=x+(g^v&(E^g))+b[11]+643717713&4294967295,x=E+(y<<14&4294967295|y>>>18),y=v+(E^g&(x^E))+b[0]+3921069994&4294967295,v=x+(y<<20&4294967295|y>>>12),y=g+(x^E&(v^x))+b[5]+3593408605&4294967295,g=v+(y<<5&4294967295|y>>>27),y=E+(v^x&(g^v))+b[10]+38016083&4294967295,E=g+(y<<9&4294967295|y>>>23),y=x+(g^v&(E^g))+b[15]+3634488961&4294967295,x=E+(y<<14&4294967295|y>>>18),y=v+(E^g&(x^E))+b[4]+3889429448&4294967295,v=x+(y<<20&4294967295|y>>>12),y=g+(x^E&(v^x))+b[9]+568446438&4294967295,g=v+(y<<5&4294967295|y>>>27),y=E+(v^x&(g^v))+b[14]+3275163606&4294967295,E=g+(y<<9&4294967295|y>>>23),y=x+(g^v&(E^g))+b[3]+4107603335&4294967295,x=E+(y<<14&4294967295|y>>>18),y=v+(E^g&(x^E))+b[8]+1163531501&4294967295,v=x+(y<<20&4294967295|y>>>12),y=g+(x^E&(v^x))+b[13]+2850285829&4294967295,g=v+(y<<5&4294967295|y>>>27),y=E+(v^x&(g^v))+b[2]+4243563512&4294967295,E=g+(y<<9&4294967295|y>>>23),y=x+(g^v&(E^g))+b[7]+1735328473&4294967295,x=E+(y<<14&4294967295|y>>>18),y=v+(E^g&(x^E))+b[12]+2368359562&4294967295,v=x+(y<<20&4294967295|y>>>12),y=g+(v^x^E)+b[5]+4294588738&4294967295,g=v+(y<<4&4294967295|y>>>28),y=E+(g^v^x)+b[8]+2272392833&4294967295,E=g+(y<<11&4294967295|y>>>21),y=x+(E^g^v)+b[11]+1839030562&4294967295,x=E+(y<<16&4294967295|y>>>16),y=v+(x^E^g)+b[14]+4259657740&4294967295,v=x+(y<<23&4294967295|y>>>9),y=g+(v^x^E)+b[1]+2763975236&4294967295,g=v+(y<<4&4294967295|y>>>28),y=E+(g^v^x)+b[4]+1272893353&4294967295,E=g+(y<<11&4294967295|y>>>21),y=x+(E^g^v)+b[7]+4139469664&4294967295,x=E+(y<<16&4294967295|y>>>16),y=v+(x^E^g)+b[10]+3200236656&4294967295,v=x+(y<<23&4294967295|y>>>9),y=g+(v^x^E)+b[13]+681279174&4294967295,g=v+(y<<4&4294967295|y>>>28),y=E+(g^v^x)+b[0]+3936430074&4294967295,E=g+(y<<11&4294967295|y>>>21),y=x+(E^g^v)+b[3]+3572445317&4294967295,x=E+(y<<16&4294967295|y>>>16),y=v+(x^E^g)+b[6]+76029189&4294967295,v=x+(y<<23&4294967295|y>>>9),y=g+(v^x^E)+b[9]+3654602809&4294967295,g=v+(y<<4&4294967295|y>>>28),y=E+(g^v^x)+b[12]+3873151461&4294967295,E=g+(y<<11&4294967295|y>>>21),y=x+(E^g^v)+b[15]+530742520&4294967295,x=E+(y<<16&4294967295|y>>>16),y=v+(x^E^g)+b[2]+3299628645&4294967295,v=x+(y<<23&4294967295|y>>>9),y=g+(x^(v|~E))+b[0]+4096336452&4294967295,g=v+(y<<6&4294967295|y>>>26),y=E+(v^(g|~x))+b[7]+1126891415&4294967295,E=g+(y<<10&4294967295|y>>>22),y=x+(g^(E|~v))+b[14]+2878612391&4294967295,x=E+(y<<15&4294967295|y>>>17),y=v+(E^(x|~g))+b[5]+4237533241&4294967295,v=x+(y<<21&4294967295|y>>>11),y=g+(x^(v|~E))+b[12]+1700485571&4294967295,g=v+(y<<6&4294967295|y>>>26),y=E+(v^(g|~x))+b[3]+2399980690&4294967295,E=g+(y<<10&4294967295|y>>>22),y=x+(g^(E|~v))+b[10]+4293915773&4294967295,x=E+(y<<15&4294967295|y>>>17),y=v+(E^(x|~g))+b[1]+2240044497&4294967295,v=x+(y<<21&4294967295|y>>>11),y=g+(x^(v|~E))+b[8]+1873313359&4294967295,g=v+(y<<6&4294967295|y>>>26),y=E+(v^(g|~x))+b[15]+4264355552&4294967295,E=g+(y<<10&4294967295|y>>>22),y=x+(g^(E|~v))+b[6]+2734768916&4294967295,x=E+(y<<15&4294967295|y>>>17),y=v+(E^(x|~g))+b[13]+1309151649&4294967295,v=x+(y<<21&4294967295|y>>>11),y=g+(x^(v|~E))+b[4]+4149444226&4294967295,g=v+(y<<6&4294967295|y>>>26),y=E+(v^(g|~x))+b[11]+3174756917&4294967295,E=g+(y<<10&4294967295|y>>>22),y=x+(g^(E|~v))+b[2]+718787259&4294967295,x=E+(y<<15&4294967295|y>>>17),y=v+(E^(x|~g))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+g&4294967295,A.g[1]=A.g[1]+(x+(y<<21&4294967295|y>>>11))&4294967295,A.g[2]=A.g[2]+x&4294967295,A.g[3]=A.g[3]+E&4294967295}i.prototype.u=function(A,g){g===void 0&&(g=A.length);for(var v=g-this.blockSize,b=this.B,x=this.h,E=0;E<g;){if(x==0)for(;E<=v;)r(this,A,E),E+=this.blockSize;if(typeof A=="string"){for(;E<g;)if(b[x++]=A.charCodeAt(E++),x==this.blockSize){r(this,b),x=0;break}}else for(;E<g;)if(b[x++]=A[E++],x==this.blockSize){r(this,b),x=0;break}}this.h=x,this.o+=g},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var g=1;g<A.length-8;++g)A[g]=0;var v=8*this.o;for(g=A.length-8;g<A.length;++g)A[g]=v&255,v/=256;for(this.u(A),A=Array(16),g=v=0;4>g;++g)for(var b=0;32>b;b+=8)A[v++]=this.g[g]>>>b&255;return A};function s(A,g){var v=l;return Object.prototype.hasOwnProperty.call(v,A)?v[A]:v[A]=g(A)}function a(A,g){this.h=g;for(var v=[],b=!0,x=A.length-1;0<=x;x--){var E=A[x]|0;b&&E==g||(v[x]=E,b=!1)}this.g=v}var l={};function c(A){return-128<=A&&128>A?s(A,function(g){return new a([g|0],0>g?-1:0)}):new a([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return O(h(-A));for(var g=[],v=1,b=0;A>=v;b++)g[b]=A/v|0,v*=4294967296;return new a(g,0)}function f(A,g){if(A.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(A.charAt(0)=="-")return O(f(A.substring(1),g));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(g,8)),b=p,x=0;x<A.length;x+=8){var E=Math.min(8,A.length-x),y=parseInt(A.substring(x,x+E),g);8>E?(E=h(Math.pow(g,E)),b=b.j(E).add(h(y))):(b=b.j(v),b=b.add(h(y)))}return b}var p=c(0),_=c(1),D=c(16777216);n=a.prototype,n.m=function(){if(F(this))return-O(this).m();for(var A=0,g=1,v=0;v<this.g.length;v++){var b=this.i(v);A+=(0<=b?b:4294967296+b)*g,g*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(F(this))return"-"+O(this).toString(A);for(var g=h(Math.pow(A,6)),v=this,b="";;){var x=wt(v,g).g;v=W(v,x.j(g));var E=((0<v.g.length?v.g[0]:v.h)>>>0).toString(A);if(v=x,T(v))return E+b;for(;6>E.length;)E="0"+E;b=E+b}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(var g=0;g<A.g.length;g++)if(A.g[g]!=0)return!1;return!0}function F(A){return A.h==-1}n.l=function(A){return A=W(this,A),F(A)?-1:T(A)?0:1};function O(A){for(var g=A.g.length,v=[],b=0;b<g;b++)v[b]=~A.g[b];return new a(v,~A.h).add(_)}n.abs=function(){return F(this)?O(this):this},n.add=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],b=0,x=0;x<=g;x++){var E=b+(this.i(x)&65535)+(A.i(x)&65535),y=(E>>>16)+(this.i(x)>>>16)+(A.i(x)>>>16);b=y>>>16,E&=65535,y&=65535,v[x]=y<<16|E}return new a(v,v[v.length-1]&-2147483648?-1:0)};function W(A,g){return A.add(O(g))}n.j=function(A){if(T(this)||T(A))return p;if(F(this))return F(A)?O(this).j(O(A)):O(O(this).j(A));if(F(A))return O(this.j(O(A)));if(0>this.l(D)&&0>A.l(D))return h(this.m()*A.m());for(var g=this.g.length+A.g.length,v=[],b=0;b<2*g;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var x=0;x<A.g.length;x++){var E=this.i(b)>>>16,y=this.i(b)&65535,$e=A.i(x)>>>16,Er=A.i(x)&65535;v[2*b+2*x]+=y*Er,Y(v,2*b+2*x),v[2*b+2*x+1]+=E*Er,Y(v,2*b+2*x+1),v[2*b+2*x+1]+=y*$e,Y(v,2*b+2*x+1),v[2*b+2*x+2]+=E*$e,Y(v,2*b+2*x+2)}for(b=0;b<g;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=g;b<2*g;b++)v[b]=0;return new a(v,0)};function Y(A,g){for(;(A[g]&65535)!=A[g];)A[g+1]+=A[g]>>>16,A[g]&=65535,g++}function Q(A,g){this.g=A,this.h=g}function wt(A,g){if(T(g))throw Error("division by zero");if(T(A))return new Q(p,p);if(F(A))return g=wt(O(A),g),new Q(O(g.g),O(g.h));if(F(g))return g=wt(A,O(g)),new Q(O(g.g),g.h);if(30<A.g.length){if(F(A)||F(g))throw Error("slowDivide_ only works with positive integers.");for(var v=_,b=g;0>=b.l(A);)v=fe(v),b=fe(b);var x=mt(v,1),E=mt(b,1);for(b=mt(b,2),v=mt(v,2);!T(b);){var y=E.add(b);0>=y.l(A)&&(x=x.add(v),E=y),b=mt(b,1),v=mt(v,1)}return g=W(A,x.j(g)),new Q(x,g)}for(x=p;0<=A.l(g);){for(v=Math.max(1,Math.floor(A.m()/g.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),E=h(v),y=E.j(g);F(y)||0<y.l(A);)v-=b,E=h(v),y=E.j(g);T(E)&&(E=_),x=x.add(E),A=W(A,y)}return new Q(x,A)}n.A=function(A){return wt(this,A).h},n.and=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],b=0;b<g;b++)v[b]=this.i(b)&A.i(b);return new a(v,this.h&A.h)},n.or=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],b=0;b<g;b++)v[b]=this.i(b)|A.i(b);return new a(v,this.h|A.h)},n.xor=function(A){for(var g=Math.max(this.g.length,A.g.length),v=[],b=0;b<g;b++)v[b]=this.i(b)^A.i(b);return new a(v,this.h^A.h)};function fe(A){for(var g=A.g.length+1,v=[],b=0;b<g;b++)v[b]=A.i(b)<<1|A.i(b-1)>>>31;return new a(v,A.h)}function mt(A,g){var v=g>>5;g%=32;for(var b=A.g.length-v,x=[],E=0;E<b;E++)x[E]=0<g?A.i(E+v)>>>g|A.i(E+v+1)<<32-g:A.i(E+v);return new a(x,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Bd=Ov.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Pn=Ov.Integer=a}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var La=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dn={};var jd,dC,tr,Ud,Bs,Ba,Gd,zd,$d;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof La=="object"&&La];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=e(this);function r(o,u){if(u)t:{var d=i;o=o.split(".");for(var m=0;m<o.length-1;m++){var I=o[m];if(!(I in d))break t;d=d[I]}o=o[o.length-1],m=d[o],u=u(m),u!=m&&u!=null&&t(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,m=!1,I={next:function(){if(!m&&d<o.length){var C=d++;return{value:u(C,o[C]),done:!1}}return m=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,d){return o.call.apply(o.bind,arguments)}function p(o,u,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,m),o.apply(u,I)}}return function(){return o.apply(u,arguments)}}function _(o,u,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,_.apply(null,arguments)}function D(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function T(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,I,C){for(var P=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)P[ut-2]=arguments[ut];return u.prototype[I].apply(m,P)}}function F(o){let u=o.length;if(0<u){let d=Array(u);for(let m=0;m<u;m++)d[m]=o[m];return d}return[]}function O(o,u){for(let d=1;d<arguments.length;d++){let m=arguments[d];if(c(m)){let I=o.length||0,C=m.length||0;o.length=I+C;for(let P=0;P<C;P++)o[I+P]=m[P]}else o.push(m)}}class W{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function Y(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function wt(o){return wt[" "](o),o}wt[" "]=function(){};var fe=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function mt(o,u,d){for(let m in o)u.call(d,o[m],m,o)}function A(o,u){for(let d in o)u.call(void 0,o[d],d,o)}function g(o){let u={};for(let d in o)u[d]=o[d];return u}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(o,u){let d,m;for(let I=1;I<arguments.length;I++){m=arguments[I];for(d in m)o[d]=m[d];for(let C=0;C<v.length;C++)d=v[C],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function x(o){var u=1;o=o.split(":");let d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function E(o){l.setTimeout(()=>{throw o},0)}function y(){var o=Ul;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class $e{constructor(){this.h=this.g=null}add(u,d){let m=Er.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var Er=new W(()=>new nw,o=>o.reset());class nw{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Cr,Dr=!1,Ul=new $e,lm=()=>{let o=l.Promise.resolve(void 0);Cr=()=>{o.then(iw)}};var iw=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(d){E(d)}var u=Er;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}Dr=!1};function vn(){this.s=this.s,this.C=this.C}vn.prototype.s=!1,vn.prototype.ma=function(){this.s||(this.s=!0,this.N())},vn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var rw=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let d=()=>{};l.addEventListener("test",d,u),l.removeEventListener("test",d,u)}catch{}return o}();function Sr(o,u){if(Ut.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(fe){t:{try{wt(u.nodeName);var I=!0;break t}catch{}I=!1}I||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:sw[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Sr.aa.h.call(this)}}T(Sr,Ut);var sw={2:"touch",3:"pen",4:"mouse"};Sr.prototype.h=function(){Sr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Tr="closure_listenable_"+(1e6*Math.random()|0),ow=0;function aw(o,u,d,m,I){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=I,this.key=++ow,this.da=this.fa=!1}function so(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function oo(o){this.src=o,this.g={},this.h=0}oo.prototype.add=function(o,u,d,m,I){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var P=zl(o,u,m,I);return-1<P?(u=o[P],d||(u.fa=!1)):(u=new aw(u,this.src,C,!!m,I),u.fa=d,o.push(u)),u};function Gl(o,u){var d=u.type;if(d in o.g){var m=o.g[d],I=Array.prototype.indexOf.call(m,u,void 0),C;(C=0<=I)&&Array.prototype.splice.call(m,I,1),C&&(so(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function zl(o,u,d,m){for(var I=0;I<o.length;++I){var C=o[I];if(!C.da&&C.listener==u&&C.capture==!!d&&C.ha==m)return I}return-1}var $l="closure_lm_"+(1e6*Math.random()|0),Hl={};function cm(o,u,d,m,I){if(m&&m.once)return dm(o,u,d,m,I);if(Array.isArray(u)){for(var C=0;C<u.length;C++)cm(o,u[C],d,m,I);return null}return d=Ql(d),o&&o[Tr]?o.K(u,d,h(m)?!!m.capture:!!m,I):um(o,u,d,!1,m,I)}function um(o,u,d,m,I,C){if(!u)throw Error("Invalid event type");var P=h(I)?!!I.capture:!!I,ut=Wl(o);if(ut||(o[$l]=ut=new oo(o)),d=ut.add(u,d,m,P,C),d.proxy)return d;if(m=lw(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)rw||(I=P),I===void 0&&(I=!1),o.addEventListener(u.toString(),m,I);else if(o.attachEvent)o.attachEvent(fm(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function lw(){function o(d){return u.call(o.src,o.listener,d)}let u=cw;return o}function dm(o,u,d,m,I){if(Array.isArray(u)){for(var C=0;C<u.length;C++)dm(o,u[C],d,m,I);return null}return d=Ql(d),o&&o[Tr]?o.L(u,d,h(m)?!!m.capture:!!m,I):um(o,u,d,!0,m,I)}function hm(o,u,d,m,I){if(Array.isArray(u))for(var C=0;C<u.length;C++)hm(o,u[C],d,m,I);else m=h(m)?!!m.capture:!!m,d=Ql(d),o&&o[Tr]?(o=o.i,u=String(u).toString(),u in o.g&&(C=o.g[u],d=zl(C,d,m,I),-1<d&&(so(C[d]),Array.prototype.splice.call(C,d,1),C.length==0&&(delete o.g[u],o.h--)))):o&&(o=Wl(o))&&(u=o.g[u.toString()],o=-1,u&&(o=zl(u,d,m,I)),(d=-1<o?u[o]:null)&&ql(d))}function ql(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Tr])Gl(u.i,o);else{var d=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(d,m,o.capture):u.detachEvent?u.detachEvent(fm(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=Wl(u))?(Gl(d,o),d.h==0&&(d.src=null,u[$l]=null)):so(o)}}}function fm(o){return o in Hl?Hl[o]:Hl[o]="on"+o}function cw(o,u){if(o.da)o=!0;else{u=new Sr(u,this);var d=o.listener,m=o.ha||o.src;o.fa&&ql(o),o=d.call(m,u)}return o}function Wl(o){return o=o[$l],o instanceof oo?o:null}var Kl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ql(o){return typeof o=="function"?o:(o[Kl]||(o[Kl]=function(u){return o.handleEvent(u)}),o[Kl])}function Gt(){vn.call(this),this.i=new oo(this),this.M=this,this.F=null}T(Gt,vn),Gt.prototype[Tr]=!0,Gt.prototype.removeEventListener=function(o,u,d,m){hm(this,o,u,d,m)};function Kt(o,u){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new Ut(u,o);else if(u instanceof Ut)u.target=u.target||o;else{var I=u;u=new Ut(m,o),b(u,I)}if(I=!0,d)for(var C=d.length-1;0<=C;C--){var P=u.g=d[C];I=ao(P,m,!0,u)&&I}if(P=u.g=o,I=ao(P,m,!0,u)&&I,I=ao(P,m,!1,u)&&I,d)for(C=0;C<d.length;C++)P=u.g=d[C],I=ao(P,m,!1,u)&&I}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],m=0;m<d.length;m++)so(d[m]);delete o.g[u],o.h--}}this.F=null},Gt.prototype.K=function(o,u,d,m){return this.i.add(String(o),u,!1,d,m)},Gt.prototype.L=function(o,u,d,m){return this.i.add(String(o),u,!0,d,m)};function ao(o,u,d,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var I=!0,C=0;C<u.length;++C){var P=u[C];if(P&&!P.da&&P.capture==d){var ut=P.listener,Nt=P.ha||P.src;P.fa&&Gl(o.i,P),I=ut.call(Nt,m)!==!1&&I}}return I&&!m.defaultPrevented}function mm(o,u,d){if(typeof o=="function")d&&(o=_(o,d));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function pm(o){o.g=mm(()=>{o.g=null,o.i&&(o.i=!1,pm(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class uw extends vn{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:pm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(o){vn.call(this),this.h=o,this.g={}}T(Rr,vn);var gm=[];function ym(o){mt(o.g,function(u,d){this.g.hasOwnProperty(d)&&ql(u)},o),o.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),ym(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yl=l.JSON.stringify,dw=l.JSON.parse,hw=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Xl(){}Xl.prototype.h=null;function vm(o){return o.h||(o.h=o.i())}function _m(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zl(){Ut.call(this,"d")}T(Zl,Ut);function Jl(){Ut.call(this,"c")}T(Jl,Ut);var Un={},bm=null;function lo(){return bm=bm||new Gt}Un.La="serverreachability";function wm(o){Ut.call(this,Un.La,o)}T(wm,Ut);function kr(o){let u=lo();Kt(u,new wm(u))}Un.STAT_EVENT="statevent";function xm(o,u){Ut.call(this,Un.STAT_EVENT,o),this.stat=u}T(xm,Ut);function Qt(o){let u=lo();Kt(u,new xm(u,o))}Un.Ma="timingevent";function Am(o,u){Ut.call(this,Un.Ma,o),this.size=u}T(Am,Ut);function Or(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Fr(){this.g=!0}Fr.prototype.xa=function(){this.g=!1};function fw(o,u,d,m,I,C){o.info(function(){if(o.g)if(C)for(var P="",ut=C.split("&"),Nt=0;Nt<ut.length;Nt++){var rt=ut[Nt].split("=");if(1<rt.length){var zt=rt[0];rt=rt[1];var $t=zt.split("_");P=2<=$t.length&&$t[1]=="type"?P+(zt+"="+rt+"&"):P+(zt+"=redacted&")}}else P=null;else P=C;return"XMLHTTP REQ ("+m+") [attempt "+I+"]: "+u+`
`+d+`
`+P})}function mw(o,u,d,m,I,C,P){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+I+"]: "+u+`
`+d+`
`+C+" "+P})}function Ai(o,u,d,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+gw(o,d)+(m?" "+m:"")})}function pw(o,u){o.info(function(){return"TIMEOUT: "+u})}Fr.prototype.info=function(){};function gw(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var I=m[1];if(Array.isArray(I)&&!(1>I.length)){var C=I[0];if(C!="noop"&&C!="stop"&&C!="close")for(var P=1;P<I.length;P++)I[P]=""}}}}return Yl(d)}catch{return u}}var co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Im={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tc;function uo(){}T(uo,Xl),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},tc=new uo;function _n(o,u,d,m){this.j=o,this.i=u,this.l=d,this.R=m||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Em}function Em(){this.i=null,this.g="",this.h=!1}var Cm={},ec={};function nc(o,u,d){o.L=1,o.v=po(He(u)),o.m=d,o.P=!0,Dm(o,null)}function Dm(o,u){o.F=Date.now(),ho(o),o.A=He(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Um(d.i,"t",m),o.C=0,d=o.j.J,o.h=new Em,o.g=sp(o.j,d?u:null,!o.m),0<o.O&&(o.M=new uw(_(o.Y,o,o.g),o.O)),u=o.U,d=o.g,m=o.ca;var I="readystatechange";Array.isArray(I)||(I&&(gm[0]=I.toString()),I=gm);for(var C=0;C<I.length;C++){var P=cm(d,I[C],m||u.handleEvent,!1,u.h||u);if(!P)break;u.g[P.key]=P}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),kr(),fw(o.i,o.u,o.A,o.l,o.R,o.m)}_n.prototype.ca=function(o){o=o.target;let u=this.M;u&&qe(o)==3?u.j():this.Y(o)},_n.prototype.Y=function(o){try{if(o==this.g)t:{let $t=qe(this.g);var u=this.g.Ba();let Ci=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||Km(this.g)))){this.J||$t!=4||u==7||(u==8||0>=Ci?kr(3):kr(2)),ic(this);var d=this.g.Z();this.X=d;e:if(Sm(this)){var m=Km(this.g);o="";var I=m.length,C=qe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),Pr(this);var P="";break e}this.h.i=new l.TextDecoder}for(u=0;u<I;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(C&&u==I-1)});m.length=0,this.h.g+=o,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=d==200,mw(this.i,this.u,this.A,this.l,this.R,$t,d),this.o){if(this.T&&!this.K){e:{if(this.g){var ut,Nt=this.g;if((ut=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ut)){var rt=ut;break e}}rt=null}if(d=rt)Ai(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rc(this,d);else{this.o=!1,this.s=3,Qt(12),Gn(this),Pr(this);break t}}if(this.P){d=!0;let xe;for(;!this.J&&this.C<P.length;)if(xe=yw(this,P),xe==ec){$t==4&&(this.s=4,Qt(14),d=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(xe==Cm){this.s=4,Qt(15),Ai(this.i,this.l,P,"[Invalid Chunk]"),d=!1;break}else Ai(this.i,this.l,xe,null),rc(this,xe);if(Sm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||P.length!=0||this.h.h||(this.s=1,Qt(16),d=!1),this.o=this.o&&d,!d)Ai(this.i,this.l,P,"[Invalid Chunked Response]"),Gn(this),Pr(this);else if(0<P.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),uc(zt),zt.M=!0,Qt(11))}}else Ai(this.i,this.l,P,null),rc(this,P);$t==4&&Gn(this),this.o&&!this.J&&($t==4?ep(this.j,this):(this.o=!1,ho(this)))}else Fw(this.g),d==400&&0<P.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Gn(this),Pr(this)}}}catch{}finally{}};function Sm(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function yw(o,u){var d=o.C,m=u.indexOf(`
`,d);return m==-1?ec:(d=Number(u.substring(d,m)),isNaN(d)?Cm:(m+=1,m+d>u.length?ec:(u=u.slice(m,m+d),o.C=m+d,u)))}_n.prototype.cancel=function(){this.J=!0,Gn(this)};function ho(o){o.S=Date.now()+o.I,Tm(o,o.I)}function Tm(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Or(_(o.ba,o),u)}function ic(o){o.B&&(l.clearTimeout(o.B),o.B=null)}_n.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(pw(this.i,this.A),this.L!=2&&(kr(),Qt(17)),Gn(this),this.s=2,Pr(this)):Tm(this,this.S-o)};function Pr(o){o.j.G==0||o.J||ep(o.j,o)}function Gn(o){ic(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,ym(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function rc(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||sc(d.h,o))){if(!o.K&&sc(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var I=m;if(I[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)bo(d),vo(d);else break t;cc(d),Qt(18)}}else d.za=I[1],0<d.za-d.T&&37500>I[2]&&d.F&&d.v==0&&!d.C&&(d.C=Or(_(d.Za,d),6e3));if(1>=km(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else $n(d,11)}else if((o.K||d.g==o)&&bo(d),!Y(u))for(I=d.Da.g.parse(u),u=0;u<I.length;u++){let rt=I[u];if(d.T=rt[0],rt=rt[1],d.G==2)if(rt[0]=="c"){d.K=rt[1],d.ia=rt[2];let zt=rt[3];zt!=null&&(d.la=zt,d.j.info("VER="+d.la));let $t=rt[4];$t!=null&&(d.Aa=$t,d.j.info("SVER="+d.Aa));let Ci=rt[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(m=1.5*Ci,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;let xe=o.g;if(xe){let xo=xe.g?xe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var C=m.h;C.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(oc(C,C.h),C.h=null))}if(m.D){let dc=xe.g?xe.g.getResponseHeader("X-HTTP-Session-Id"):null;dc&&(m.ya=dc,pt(m.I,m.D,dc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var P=o;if(m.qa=rp(m,m.J?m.ia:null,m.W),P.K){Om(m.h,P);var ut=P,Nt=m.L;Nt&&(ut.I=Nt),ut.B&&(ic(ut),ho(ut)),m.g=P}else Jm(m);0<d.i.length&&_o(d)}else rt[0]!="stop"&&rt[0]!="close"||$n(d,7);else d.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?$n(d,7):lc(d):rt[0]!="noop"&&d.l&&d.l.ta(rt),d.v=0)}}kr(4)}catch{}}var vw=class{constructor(o,u){this.g=o,this.map=u}};function Rm(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mm(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function km(o){return o.h?1:o.g?o.g.size:0}function sc(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function oc(o,u){o.g?o.g.add(u):o.h=u}function Om(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Rm.prototype.cancel=function(){if(this.i=Fm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Fm(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let d of o.g.values())u=u.concat(d.D);return u}return F(o.i)}function _w(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],d=o.length,m=0;m<d;m++)u.push(o[m]);return u}u=[],d=0;for(m in o)u[d++]=o[m];return u}function bw(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(let m in o)u[d++]=m;return u}}}function Pm(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=bw(o),m=_w(o),I=m.length,C=0;C<I;C++)u.call(void 0,m[C],d&&d[C],o)}var Vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ww(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),I=null;if(0<=m){var C=o[d].substring(0,m);I=o[d].substring(m+1)}else C=o[d];u(C,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function zn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof zn){this.h=o.h,fo(this,o.j),this.o=o.o,this.g=o.g,mo(this,o.s),this.l=o.l;var u=o.i,d=new Lr;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),Nm(this,d),this.m=o.m}else o&&(u=String(o).match(Vm))?(this.h=!1,fo(this,u[1]||"",!0),this.o=Vr(u[2]||""),this.g=Vr(u[3]||"",!0),mo(this,u[4]),this.l=Vr(u[5]||"",!0),Nm(this,u[6]||"",!0),this.m=Vr(u[7]||"")):(this.h=!1,this.i=new Lr(null,this.h))}zn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Nr(u,Lm,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Nr(u,Lm,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Nr(d,d.charAt(0)=="/"?Iw:Aw,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Nr(d,Cw)),o.join("")};function He(o){return new zn(o)}function fo(o,u,d){o.j=d?Vr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function mo(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Nm(o,u,d){u instanceof Lr?(o.i=u,Dw(o.i,o.h)):(d||(u=Nr(u,Ew)),o.i=new Lr(u,o.h))}function pt(o,u,d){o.i.set(u,d)}function po(o){return pt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Vr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Nr(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,xw),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function xw(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Lm=/[#\/\?@]/g,Aw=/[#\?:]/g,Iw=/[#\?]/g,Ew=/[#\?@]/g,Cw=/#/g;function Lr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function bn(o){o.g||(o.g=new Map,o.h=0,o.i&&ww(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Lr.prototype,n.add=function(o,u){bn(this),this.i=null,o=Ii(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Bm(o,u){bn(o),u=Ii(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function jm(o,u){return bn(o),u=Ii(o,u),o.g.has(u)}n.forEach=function(o,u){bn(this),this.g.forEach(function(d,m){d.forEach(function(I){o.call(u,I,m,this)},this)},this)},n.na=function(){bn(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let m=0;m<u.length;m++){let I=o[m];for(let C=0;C<I.length;C++)d.push(u[m])}return d},n.V=function(o){bn(this);let u=[];if(typeof o=="string")jm(this,o)&&(u=u.concat(this.g.get(Ii(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return bn(this),this.i=null,o=Ii(this,o),jm(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Um(o,u,d){Bm(o,u),0<d.length&&(o.i=null,o.g.set(Ii(o,u),F(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var m=u[d];let C=encodeURIComponent(String(m)),P=this.V(m);for(m=0;m<P.length;m++){var I=C;P[m]!==""&&(I+="="+encodeURIComponent(String(P[m]))),o.push(I)}}return this.i=o.join("&")};function Ii(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Dw(o,u){u&&!o.j&&(bn(o),o.i=null,o.g.forEach(function(d,m){var I=m.toLowerCase();m!=I&&(Bm(this,m),Um(this,I,d))},o)),o.j=u}function Sw(o,u){let d=new Fr;if(l.Image){let m=new Image;m.onload=D(wn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=D(wn,d,"TestLoadImage: error",!1,u,m),m.onabort=D(wn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=D(wn,d,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function Tw(o,u){let d=new Fr,m=new AbortController,I=setTimeout(()=>{m.abort(),wn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(C=>{clearTimeout(I),C.ok?wn(d,"TestPingServer: ok",!0,u):wn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(I),wn(d,"TestPingServer: error",!1,u)})}function wn(o,u,d,m,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),m(d)}catch{}}function Rw(){this.g=new hw}function Mw(o,u,d){let m=d||"";try{Pm(o,function(I,C){let P=I;h(I)&&(P=Yl(I)),u.push(m+C+"="+encodeURIComponent(P))})}catch(I){throw u.push(m+"type="+encodeURIComponent("_badmap")),I}}function Br(o){this.l=o.Ub||null,this.j=o.eb||!1}T(Br,Xl),Br.prototype.g=function(){return new go(this.l,this.j)},Br.prototype.i=function(o){return function(){return o}}({});function go(o,u){Gt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(go,Gt),n=go.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Ur(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gm(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gm(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?jr(this):Ur(this),this.readyState==3&&Gm(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,jr(this))},n.Qa=function(o){this.g&&(this.response=o,jr(this))},n.ga=function(){this.g&&jr(this)};function jr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ur(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function Ur(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(go.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function zm(o){let u="";return mt(o,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function ac(o,u,d){t:{for(m in d){var m=!1;break t}m=!0}m||(d=zm(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):pt(o,u,d))}function xt(o){Gt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(xt,Gt);var kw=/^https?$/i,Ow=["POST","PUT"];n=xt.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tc.g(),this.v=this.o?vm(this.o):vm(tc),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(C){$m(this,C);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var I in m)d.set(I,m[I]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let C of m.keys())d.set(C,m.get(C));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(C=>C.toLowerCase()=="content-type"),I=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ow,u,void 0))||m||I||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,P]of d)this.g.setRequestHeader(C,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wm(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){$m(this,C)}};function $m(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Hm(o),yo(o)}function Hm(o){o.A||(o.A=!0,Kt(o,"complete"),Kt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Kt(this,"complete"),Kt(this,"abort"),yo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yo(this,!0)),xt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qm(this):this.bb())},n.bb=function(){qm(this)};function qm(o){if(o.h&&typeof a<"u"&&(!o.v[1]||qe(o)!=4||o.Z()!=2)){if(o.u&&qe(o)==4)mm(o.Ea,0,o);else if(Kt(o,"readystatechange"),qe(o)==4){o.h=!1;try{let P=o.Z();t:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var d;if(!(d=u)){var m;if(m=P===0){var I=String(o.D).match(Vm)[1]||null;!I&&l.self&&l.self.location&&(I=l.self.location.protocol.slice(0,-1)),m=!kw.test(I?I.toLowerCase():"")}d=m}if(d)Kt(o,"complete"),Kt(o,"success");else{o.m=6;try{var C=2<qe(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",Hm(o)}}finally{yo(o)}}}}function yo(o,u){if(o.g){Wm(o);let d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Kt(o,"ready");try{d.onreadystatechange=m}catch{}}}function Wm(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function qe(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<qe(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),dw(u)}};function Km(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Fw(o){let u={};o=(o.g&&2<=qe(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(Y(o[m]))continue;var d=x(o[m]);let I=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let C=u[I]||[];u[I]=C,C.push(d)}A(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Qm(o){this.Aa=0,this.i=[],this.j=new Fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,o),this.cb=Gr("retryDelaySeedMs",1e4,o),this.Wa=Gr("forwardChannelMaxRetries",2,o),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Rm(o&&o.concurrentRequestLimit),this.Da=new Rw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Qm.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,m){Qt(0),this.W=o,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=rp(this,null,this.W),_o(this)};function lc(o){if(Ym(o),o.G==3){var u=o.U++,d=He(o.I);if(pt(d,"SID",o.K),pt(d,"RID",u),pt(d,"TYPE","terminate"),zr(o,d),u=new _n(o,o.j,u),u.L=2,u.v=po(He(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=u.v,d=!0),d||(u.g=sp(u.j,null),u.g.ea(u.v)),u.F=Date.now(),ho(u)}ip(o)}function vo(o){o.g&&(uc(o),o.g.cancel(),o.g=null)}function Ym(o){vo(o),o.u&&(l.clearTimeout(o.u),o.u=null),bo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function _o(o){if(!Mm(o.h)&&!o.s){o.s=!0;var u=o.Ga;Cr||lm(),Dr||(Cr(),Dr=!0),Ul.add(u,o),o.B=0}}function Pw(o,u){return km(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Or(_(o.Ga,o,u),np(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let I=new _n(this,this.j,o),C=this.o;if(this.S&&(C?(C=g(C),b(C,this.S)):C=this.S),this.m!==null||this.O||(I.H=C,C=null),this.P)t:{for(var u=0,d=0;d<this.i.length;d++){e:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=d;break t}if(u===4096||d===this.i.length-1){u=d+1;break t}}u=1e3}else u=1e3;u=Zm(this,I,u),d=He(this.I),pt(d,"RID",o),pt(d,"CVER",22),this.D&&pt(d,"X-HTTP-Session-Id",this.D),zr(this,d),C&&(this.O?u="headers="+encodeURIComponent(String(zm(C)))+"&"+u:this.m&&ac(d,this.m,C)),oc(this.h,I),this.Ua&&pt(d,"TYPE","init"),this.P?(pt(d,"$req",u),pt(d,"SID","null"),I.T=!0,nc(I,d,null)):nc(I,d,u),this.G=2}}else this.G==3&&(o?Xm(this,o):this.i.length==0||Mm(this.h)||Xm(this))};function Xm(o,u){var d;u?d=u.l:d=o.U++;let m=He(o.I);pt(m,"SID",o.K),pt(m,"RID",d),pt(m,"AID",o.T),zr(o,m),o.m&&o.o&&ac(m,o.m,o.o),d=new _n(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Zm(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),oc(o.h,d),nc(d,m,u)}function zr(o,u){o.H&&mt(o.H,function(d,m){pt(u,m,d)}),o.l&&Pm({},function(d,m){pt(u,m,d)})}function Zm(o,u,d){d=Math.min(o.i.length,d);var m=o.l?_(o.l.Na,o.l,o):null;t:{var I=o.i;let C=-1;for(;;){let P=["count="+d];C==-1?0<d?(C=I[0].g,P.push("ofs="+C)):C=0:P.push("ofs="+C);let ut=!0;for(let Nt=0;Nt<d;Nt++){let rt=I[Nt].g,zt=I[Nt].map;if(rt-=C,0>rt)C=Math.max(0,I[Nt].g-100),ut=!1;else try{Mw(zt,P,"req"+rt+"_")}catch{m&&m(zt)}}if(ut){m=P.join("&");break t}}}return o=o.i.splice(0,d),u.D=o,m}function Jm(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Cr||lm(),Dr||(Cr(),Dr=!0),Ul.add(u,o),o.v=0}}function cc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Or(_(o.Fa,o),np(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,tp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Or(_(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),vo(this),tp(this))};function uc(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function tp(o){o.g=new _n(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=He(o.qa);pt(u,"RID","rpc"),pt(u,"SID",o.K),pt(u,"AID",o.T),pt(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&pt(u,"TO",o.ja),pt(u,"TYPE","xmlhttp"),zr(o,u),o.m&&o.o&&ac(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=po(He(u)),d.m=null,d.P=!0,Dm(d,o)}n.Za=function(){this.C!=null&&(this.C=null,vo(this),cc(this),Qt(19))};function bo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function ep(o,u){var d=null;if(o.g==u){bo(o),uc(o),o.g=null;var m=2}else if(sc(o.h,u))d=u.D,Om(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var I=o.B;m=lo(),Kt(m,new Am(m,d)),_o(o)}else Jm(o);else if(I=u.s,I==3||I==0&&0<u.X||!(m==1&&Pw(o,u)||m==2&&cc(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),I){case 1:$n(o,5);break;case 4:$n(o,10);break;case 3:$n(o,6);break;default:$n(o,2)}}}function np(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function $n(o,u){if(o.j.info("Error code "+u),u==2){var d=_(o.fb,o),m=o.Xa;let I=!m;m=new zn(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fo(m,"https"),po(m),I?Sw(m.toString(),d):Tw(m.toString(),d)}else Qt(2);o.G=0,o.l&&o.l.sa(u),ip(o),Ym(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function ip(o){if(o.G=0,o.ka=[],o.l){let u=Fm(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,F(o.i),o.i.length=0),o.l.ra()}}function rp(o,u,d){var m=d instanceof zn?He(d):new zn(d);if(m.g!="")u&&(m.g=u+"."+m.g),mo(m,m.s);else{var I=l.location;m=I.protocol,u=u?u+"."+I.hostname:I.hostname,I=+I.port;var C=new zn(null);m&&fo(C,m),u&&(C.g=u),I&&mo(C,I),d&&(C.l=d),m=C}return d=o.D,u=o.ya,d&&u&&pt(m,d,u),pt(m,"VER",o.la),zr(o,m),m}function sp(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new xt(new Br({eb:d})):new xt(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function op(){}n=op.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wo(){}wo.prototype.g=function(o,u){return new ne(o,u)};function ne(o,u){Gt.call(this),this.g=new Qm(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!Y(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!Y(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Ei(this)}T(ne,Gt),ne.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ne.prototype.close=function(){lc(this.g)},ne.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Yl(o),o=d);u.i.push(new vw(u.Ya++,o)),u.G==3&&_o(u)},ne.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,ne.aa.N.call(this)};function ap(o){Zl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(let d in u){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}T(ap,Zl);function lp(){Jl.call(this),this.status=1}T(lp,Jl);function Ei(o){this.g=o}T(Ei,op),Ei.prototype.ua=function(){Kt(this.g,"a")},Ei.prototype.ta=function(o){Kt(this.g,new ap(o))},Ei.prototype.sa=function(o){Kt(this.g,new lp)},Ei.prototype.ra=function(){Kt(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,ne.prototype.send=ne.prototype.o,ne.prototype.open=ne.prototype.m,ne.prototype.close=ne.prototype.close,$d=dn.createWebChannelTransport=function(){return new wo},zd=dn.getStatEventTarget=function(){return lo()},Gd=dn.Event=Un,Ba=dn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},co.NO_ERROR=0,co.TIMEOUT=8,co.HTTP_ERROR=6,Bs=dn.ErrorCode=co,Im.COMPLETE="complete",Ud=dn.EventType=Im,_m.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,tr=dn.WebChannel=_m,dC=dn.FetchXmlHttpFactory=Br,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,jd=dn.XhrIo=xt}).apply(typeof La<"u"?La:typeof self<"u"?self:typeof window<"u"?window:{});var Fv="@firebase/firestore";var Pt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");var wr="11.0.2";var hi=new kn("@firebase/firestore");function er(){return hi.logLevel}function V(n,...t){if(hi.logLevel<=et.DEBUG){let e=t.map(Df);hi.debug(`Firestore (${wr}): ${n}`,...e)}}function hn(n,...t){if(hi.logLevel<=et.ERROR){let e=t.map(Df);hi.error(`Firestore (${wr}): ${n}`,...e)}}function lr(n,...t){if(hi.logLevel<=et.WARN){let e=t.map(Df);hi.warn(`Firestore (${wr}): ${n}`,...e)}}function Df(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function U(n="Unexpected state"){let t=`FIRESTORE (${wr}) INTERNAL ASSERTION FAILED: `+n;throw hn(t),new Error(t)}function ct(n,t){n||U()}function z(n,t){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends ce{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ke=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var qa=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Qd=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Pt.UNAUTHENTICATED))}shutdown(){}},Yd=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Xd=class{constructor(t){this.t=t,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ct(this.o===void 0);let i=this.i,r=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve(),s=new ke;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ke,t.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let c=s;t.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},l=c=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?l(c):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ke)}},0),a()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string"),new qa(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string"),new Pt(t)}},Zd=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Jd=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Zd(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},th=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eh=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){ct(this.o===void 0);let i=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ct(typeof e.token=="string"),this.R=e.token,new th(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function hC(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Wa=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=hC(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}};function J(n,t){return n<t?-1:n>t?1:0}function cr(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var jt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?J(this.nanoseconds,t.nanoseconds):J(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class n{static fromTimestamp(t){return new n(t)}static min(){return new n(new jt(0,0))}static max(){return new n(new jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ka=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&U(),i===void 0?i=t.length-e:i>t.length-e&&U(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),a=e.get(r);if(s<a)return-1;if(s>a)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},It=class n extends Ka{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new L(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},fC=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ue=class n extends Ka{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return fC.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,s=()=>{if(i.length===0)throw new L(R.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},a=!1;for(;r<t.length;){let l=t[r];if(l==="\\"){if(r+1===t.length)throw new L(R.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new L(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new L(R.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var B=class n{constructor(t){this.path=t}static fromPath(t){return new n(It.fromString(t))}static fromName(t){return new n(It.fromString(t).popFirst(5))}static empty(){return new n(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return It.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new It(t.slice()))}};var nh=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};nh.UNKNOWN_ID=-1;function mC(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=q.fromTimestamp(i===1e9?new jt(e+1,0):new jt(e,i));return new fi(r,B.empty(),t)}function pC(n){return new fi(n.readTime,n.key,-1)}var fi=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(q.min(),B.empty(),-1)}static max(){return new n(q.max(),B.empty(),-1)}};function gC(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=B.comparator(n.documentKey,t.documentKey),e!==0?e:J(n.largestBatchId,t.largestBatchId))}var yC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ih=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function xr(n){return S(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==yC)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&U(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,s=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&e()},c=>i(c))}),a=!0,s===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let s=t.length,a=new Array(s),l=0;for(let c=0;c<s;c++){let h=c;e(t[h]).next(f=>{a[h]=f,++l,l===s&&i(a)},f=>r(f))}})}static doWhile(t,e){return new n((i,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}};function vC(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ar(n){return n.name==="IndexedDbTransactionError"}var Sf=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function Dl(n){return n==null}function Hs(n){return n===0&&1/n==-1/0}function _C(n){return typeof n=="number"&&Number.isInteger(n)&&!Hs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bC(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Pv(t)),t=wC(n.get(e),t);return Pv(t)}function wC(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":e+="";break;case"":e+="";break;default:e+=s}}return e}function Pv(n){return n+""}var xC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p1=[...xC,"documentOverlays"],AC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IC=AC,EC=[...IC,"indexConfiguration","indexState","indexEntries"];var g1=[...EC,"globals"];function Vv(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function vi(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function h_(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var Et=class n{constructor(t,e){this.comparator=t,this.root=e||Be.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Be.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sr(this.root,t,this.comparator,!1)}getReverseIterator(){return new sr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sr(this.root,t,this.comparator,!0)}},sr=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Be=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw U();let t=this.left.check();if(t!==this.right.check())throw U();return t+(this.isRed()?0:1)}};Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw U()}get value(){throw U()}get color(){throw U()}get left(){throw U()}get right(){throw U()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Be(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Vt=class n{constructor(t){this.comparator=t,this.data=new Et(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Qa(this.data.getIterator())}getIteratorFrom(t){return new Qa(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Qa=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Le=class n{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new n([])}unionWith(t){let e=new Vt(ue.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return cr(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var Ya=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Wt=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ya("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return J(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Wt.EMPTY_BYTE_STRING=new Wt("");var CC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fn(n){if(ct(!!n),typeof n=="string"){let t=0,e=CC.exec(n);if(ct(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mn(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}function Tf(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Sl(n){let t=n.mapValue.fields.__previous_value__;return Tf(t)?Sl(t):t}function qs(n){let t=fn(n.mapValue.fields.__local_write_time__.timestampValue);return new jt(t.seconds,t.nanos)}var rh=class{constructor(t,e,i,r,s,a,l,c,h){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}},Xa=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var ja={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ln(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tf(n)?4:m_(n)?9007199254740991:f_(n)?10:11:U()}function Ge(n,t){if(n===t)return!0;let e=Ln(n);if(e!==Ln(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return qs(n).isEqual(qs(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let a=fn(r.timestampValue),l=fn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return mn(r.bytesValue).isEqual(mn(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return _t(r.geoPointValue.latitude)===_t(s.geoPointValue.latitude)&&_t(r.geoPointValue.longitude)===_t(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return _t(r.integerValue)===_t(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let a=_t(r.doubleValue),l=_t(s.doubleValue);return a===l?Hs(a)===Hs(l):isNaN(a)&&isNaN(l)}return!1}(n,t);case 9:return cr(n.arrayValue.values||[],t.arrayValue.values||[],Ge);case 10:case 11:return function(r,s){let a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Vv(a)!==Vv(l))return!1;for(let c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Ge(a[c],l[c])))return!1;return!0}(n,t);default:return U()}}function Ws(n,t){return(n.values||[]).find(e=>Ge(e,t))!==void 0}function ur(n,t){if(n===t)return 0;let e=Ln(n),i=Ln(t);if(e!==i)return J(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return J(n.booleanValue,t.booleanValue);case 2:return function(s,a){let l=_t(s.integerValue||s.doubleValue),c=_t(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return Nv(n.timestampValue,t.timestampValue);case 4:return Nv(qs(n),qs(t));case 5:return J(n.stringValue,t.stringValue);case 6:return function(s,a){let l=mn(s),c=mn(a);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(s,a){let l=s.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){let f=J(l[h],c[h]);if(f!==0)return f}return J(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,a){let l=J(_t(s.latitude),_t(a.latitude));return l!==0?l:J(_t(s.longitude),_t(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Lv(n.arrayValue,t.arrayValue);case 10:return function(s,a){var l,c,h,f;let p=s.fields||{},_=a.fields||{},D=(l=p.value)===null||l===void 0?void 0:l.arrayValue,T=(c=_.value)===null||c===void 0?void 0:c.arrayValue,F=J(((h=D?.values)===null||h===void 0?void 0:h.length)||0,((f=T?.values)===null||f===void 0?void 0:f.length)||0);return F!==0?F:Lv(D,T)}(n.mapValue,t.mapValue);case 11:return function(s,a){if(s===ja.mapValue&&a===ja.mapValue)return 0;if(s===ja.mapValue)return 1;if(a===ja.mapValue)return-1;let l=s.fields||{},c=Object.keys(l),h=a.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){let _=J(c[p],f[p]);if(_!==0)return _;let D=ur(l[c[p]],h[f[p]]);if(D!==0)return D}return J(c.length,f.length)}(n.mapValue,t.mapValue);default:throw U()}}function Nv(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return J(n,t);let e=fn(n),i=fn(t),r=J(e.seconds,i.seconds);return r!==0?r:J(e.nanos,i.nanos)}function Lv(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let s=ur(e[r],i[r]);if(s)return s}return J(e.length,i.length)}function dr(n){return sh(n)}function sh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=fn(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return mn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return B.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let s of e.values||[])r?r=!1:i+=",",i+=sh(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let a of i)s?s=!1:r+=",",r+=`${a}:${sh(e.fields[a])}`;return r+"}"}(n.mapValue):U()}function za(n){switch(Ln(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Sl(n);return t?16+za(t):16;case 5:return 2*n.stringValue.length;case 6:return mn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+za(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return vi(i.fields,(s,a)=>{r+=s.length+za(a)}),r}(n.mapValue);default:throw U()}}function oh(n){return!!n&&"integerValue"in n}function Rf(n){return!!n&&"arrayValue"in n}function Bv(n){return!!n&&"nullValue"in n}function jv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $a(n){return!!n&&"mapValue"in n}function f_(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function Us(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return vi(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Us(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Us(n.arrayValue.values[e]);return t}return Object.assign({},n)}function m_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Me=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!$a(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Us(e)}setAll(t){let e=ue.emptyPath(),i={},r=[];t.forEach((a,l)=>{if(!e.isImmediateParentOf(l)){let c=this.getFieldsMap(e);this.applyChanges(c,i,r),i={},r=[],e=l.popLast()}a?i[l.lastSegment()]=Us(a):r.push(l.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){let e=this.field(t.popLast());$a(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ge(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];$a(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){vi(e,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new n(Us(this.value))}};function p_(n){let t=[];return vi(n.fields,(e,i)=>{let r=new ue([e]);if($a(i)){let s=p_(i.mapValue).fields;if(s.length===0)t.push(r);else for(let a of s)t.push(r.child(a))}else t.push(r)}),new Le(t)}var Oe=class n{constructor(t,e,i,r,s,a,l){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(t){return new n(t,0,q.min(),q.min(),q.min(),Me.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,q.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,q.min(),q.min(),Me.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,q.min(),q.min(),Me.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hr=class{constructor(t,e){this.position=t,this.inclusive=e}};function Uv(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let s=t[r],a=n.position[r];if(s.field.isKeyField()?i=B.comparator(B.fromName(a.referenceValue),e.key):i=ur(a,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gv(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ge(n.position[e],t.position[e]))return!1;return!0}var fr=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function DC(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var Za=class{},Ot=class n extends Za{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new lh(t,e,i):e==="array-contains"?new dh(t,i):e==="in"?new hh(t,i):e==="not-in"?new fh(t,i):e==="array-contains-any"?new mh(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new ch(t,i):new uh(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(ur(e,this.value)):e!==null&&Ln(this.value)===Ln(e)&&this.matchesComparison(ur(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return U()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ze=class n extends Za{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return g_(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function g_(n){return n.op==="and"}function y_(n){return SC(n)&&g_(n)}function SC(n){for(let t of n.filters)if(t instanceof ze)return!1;return!0}function ah(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+dr(n.value);if(y_(n))return n.filters.map(t=>ah(t)).join(",");{let t=n.filters.map(e=>ah(e)).join(",");return`${n.op}(${t})`}}function v_(n,t){return n instanceof Ot?function(i,r){return r instanceof Ot&&i.op===r.op&&i.field.isEqual(r.field)&&Ge(i.value,r.value)}(n,t):n instanceof ze?function(i,r){return r instanceof ze&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&v_(a,r.filters[l]),!0):!1}(n,t):void U()}function __(n){return n instanceof Ot?function(e){return`${e.field.canonicalString()} ${e.op} ${dr(e.value)}`}(n):n instanceof ze?function(e){return e.op.toString()+" {"+e.getFilters().map(__).join(" ,")+"}"}(n):"Filter"}var lh=class extends Ot{constructor(t,e,i){super(t,e,i),this.key=B.fromName(i.referenceValue)}matches(t){let e=B.comparator(t.key,this.key);return this.matchesComparison(e)}},ch=class extends Ot{constructor(t,e){super(t,"in",e),this.keys=b_("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},uh=class extends Ot{constructor(t,e){super(t,"not-in",e),this.keys=b_("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function b_(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>B.fromName(i.referenceValue))}var dh=class extends Ot{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Rf(e)&&Ws(e.arrayValue,this.value)}},hh=class extends Ot{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Ws(this.value.arrayValue,e)}},fh=class extends Ot{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ws(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Ws(this.value.arrayValue,e)}},mh=class extends Ot{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Rf(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Ws(this.value.arrayValue,i))}};var ph=class{constructor(t,e=null,i=[],r=[],s=null,a=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}};function zv(n,t=null,e=[],i=[],r=null,s=null,a=null){return new ph(n,t,e,i,r,s,a)}function Mf(n){let t=z(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>ah(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Dl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>dr(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>dr(i)).join(",")),t.ue=e}return t.ue}function kf(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!DC(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!v_(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Gv(n.startAt,t.startAt)&&Gv(n.endAt,t.endAt)}function gh(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var mr=class{constructor(t,e=null,i=[],r=[],s=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function TC(n,t,e,i,r,s,a,l){return new mr(n,t,e,i,r,s,a,l)}function Of(n){return new mr(n)}function $v(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RC(n){return n.collectionGroup!==null}function Gs(n){let t=z(n);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Vt(ue.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new fr(s,i))}),e.has(ue.keyField().canonicalString())||t.ce.push(new fr(ue.keyField(),i))}return t.ce}function je(n){let t=z(n);return t.le||(t.le=MC(t,Gs(n))),t.le}function MC(n,t){if(n.limitType==="F")return zv(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new fr(r.field,s)});let e=n.endAt?new hr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new hr(n.startAt.position,n.startAt.inclusive):null;return zv(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function yh(n,t,e){return new mr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Tl(n,t){return kf(je(n),je(t))&&n.limitType===t.limitType}function w_(n){return`${Mf(je(n))}|lt:${n.limitType}`}function nr(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>__(r)).join(", ")}]`),Dl(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>dr(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>dr(r)).join(",")),`Target(${i})`}(je(n))}; limitType=${n.limitType})`}function Rl(n,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):B.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(let s of Gs(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(a,l,c){let h=Uv(a,l,c);return a.inclusive?h<=0:h<0}(i.startAt,Gs(i),r)||i.endAt&&!function(a,l,c){let h=Uv(a,l,c);return a.inclusive?h>=0:h>0}(i.endAt,Gs(i),r))}(n,t)}function kC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function x_(n){return(t,e)=>{let i=!1;for(let r of Gs(n)){let s=OC(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function OC(n,t,e){let i=n.field.isKeyField()?B.comparator(t.key,e.key):function(s,a,l){let c=a.data.field(s),h=l.data.field(s);return c!==null&&h!==null?ur(c,h):U()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return U()}}var pn=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){vi(this.inner,(e,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return h_(this.inner)}size(){return this.innerSize}};var FC=new Et(B.comparator);function gn(){return FC}var A_=new Et(B.comparator);function js(...n){let t=A_;for(let e of n)t=t.insert(e.key,e);return t}function I_(n){let t=A_;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function ci(){return zs()}function E_(){return zs()}function zs(){return new pn(n=>n.toString(),(n,t)=>n.isEqual(t))}var PC=new Et(B.comparator),VC=new Vt(B.comparator);function Z(...n){let t=VC;for(let e of n)t=t.add(e);return t}var NC=new Vt(J);function LC(){return NC}function Ff(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hs(t)?"-0":t}}function C_(n){return{integerValue:""+n}}function BC(n,t){return _C(t)?C_(t):Ff(n,t)}var pr=class{constructor(){this._=void 0}};function jC(n,t,e){return n instanceof gr?function(r,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Tf(s)&&(s=Sl(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(e,t):n instanceof mi?S_(n,t):n instanceof pi?T_(n,t):function(r,s){let a=D_(r,s),l=Hv(a)+Hv(r.Pe);return oh(a)&&oh(r.Pe)?C_(l):Ff(r.serializer,l)}(n,t)}function UC(n,t,e){return n instanceof mi?S_(n,t):n instanceof pi?T_(n,t):e}function D_(n,t){return n instanceof yr?function(i){return oh(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var gr=class extends pr{},mi=class extends pr{constructor(t){super(),this.elements=t}};function S_(n,t){let e=R_(t);for(let i of n.elements)e.some(r=>Ge(r,i))||e.push(i);return{arrayValue:{values:e}}}var pi=class extends pr{constructor(t){super(),this.elements=t}};function T_(n,t){let e=R_(t);for(let i of n.elements)e=e.filter(r=>!Ge(r,i));return{arrayValue:{values:e}}}var yr=class extends pr{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function Hv(n){return _t(n.integerValue||n.doubleValue)}function R_(n){return Rf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GC(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof mi&&r instanceof mi||i instanceof pi&&r instanceof pi?cr(i.elements,r.elements,Ge):i instanceof yr&&r instanceof yr?Ge(i.Pe,r.Pe):i instanceof gr&&r instanceof gr}(n.transform,t.transform)}var vh=class{constructor(t,e){this.version=t,this.transformResults=e}},Vn=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Ha(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var vr=class{};function M_(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Ja(n.key,Vn.none()):new gi(n.key,n.data,Vn.none());{let e=n.data,i=Me.empty(),r=new Vt(ue.comparator);for(let s of t.fields)if(!r.has(s)){let a=e.field(s);a===null&&s.length>1&&(s=s.popLast(),a=e.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new yn(n.key,i,new Le(r.toArray()),Vn.none())}}function zC(n,t,e){n instanceof gi?function(r,s,a){let l=r.value.clone(),c=Wv(r.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):n instanceof yn?function(r,s,a){if(!Ha(r.precondition,s))return void s.convertToUnknownDocument(a.version);let l=Wv(r.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(k_(r)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function $s(n,t,e,i){return n instanceof gi?function(s,a,l,c){if(!Ha(s.precondition,a))return l;let h=s.value.clone(),f=Kv(s.fieldTransforms,c,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,i):n instanceof yn?function(s,a,l,c){if(!Ha(s.precondition,a))return l;let h=Kv(s.fieldTransforms,c,a),f=a.data;return f.setAll(k_(s)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,t,e,i):function(s,a,l){return Ha(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,t,e)}function $C(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),s=D_(i.transform,r||null);s!=null&&(e===null&&(e=Me.empty()),e.set(i.field,s))}return e||null}function qv(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&cr(i,r,(s,a)=>GC(s,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var gi=class extends vr{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},yn=class extends vr{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function k_(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function Wv(n,t,e){let i=new Map;ct(n.length===e.length);for(let r=0;r<e.length;r++){let s=n[r],a=s.transform,l=t.data.field(s.field);i.set(s.field,UC(a,l,e[r]))}return i}function Kv(n,t,e){let i=new Map;for(let r of n){let s=r.transform,a=e.data.field(r.field);i.set(r.field,jC(s,a,t))}return i}var Ja=class extends vr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_h=class extends vr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bh=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&zC(s,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=$s(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=$s(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=E_();return this.mutations.forEach(r=>{let s=t.get(r.key),a=s.overlayedDocument,l=this.applyToLocalView(a,s.mutatedFields);l=e.has(r.key)?null:l;let c=M_(a,l);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(q.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Z())}isEqual(t){return this.batchId===t.batchId&&cr(this.mutations,t.mutations,(e,i)=>qv(e,i))&&cr(this.baseMutations,t.baseMutations,(e,i)=>qv(e,i))}},wh=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){ct(t.mutations.length===i.length);let r=function(){return PC}(),s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new n(t,e,i,r)}};var xh=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ah=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Tt,nt;function HC(n){switch(n){default:return U();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function O_(n){if(n===void 0)return hn("GRPC error has no .code"),R.UNKNOWN;switch(n){case Tt.OK:return R.OK;case Tt.CANCELLED:return R.CANCELLED;case Tt.UNKNOWN:return R.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return R.INTERNAL;case Tt.UNAVAILABLE:return R.UNAVAILABLE;case Tt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Tt.NOT_FOUND:return R.NOT_FOUND;case Tt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Tt.ABORTED:return R.ABORTED;case Tt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Tt.DATA_LOSS:return R.DATA_LOSS;default:return U()}}(nt=Tt||(Tt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";var Qv=null;function qC(){return new TextEncoder}var WC=new Pn([4294967295,4294967295],0);function Yv(n){let t=qC().encode(n),e=new Bd;return e.update(t),new Uint8Array(e.digest())}function Xv(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Pn([e,i],0),new Pn([r,s],0)]}var Ih=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ui(`Invalid padding: ${e}`);if(i<0)throw new ui(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ui(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ui(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ie=Pn.fromNumber(this.Te)}Ee(t,e,i){let r=t.add(e.multiply(Pn.fromNumber(i)));return r.compare(WC)===1&&(r=new Pn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let e=Yv(t),[i,r]=Xv(e);for(let s=0;s<this.hashCount;s++){let a=this.Ee(i,r,s);if(!this.de(a))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new n(s,r,e);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.Te===0)return;let e=Yv(t),[i,r]=Xv(e);for(let s=0;s<this.hashCount;s++){let a=this.Ee(i,r,s);this.Ae(a)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var tl=class n{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,Ks.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(q.min(),r,new Et(J),gn(),Z())}},Ks=class n{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,Z(),Z(),Z())}};var or=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},el=class{constructor(t,e){this.targetId=t,this.me=e}},nl=class{constructor(t,e,i=Wt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},il=class{constructor(){this.fe=0,this.ge=Zv(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Z(),e=Z(),i=Z();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:U()}}),new Ks(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=Zv()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Eh=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=gn(),this.qe=Ua(),this.Qe=Ua(),this.Ke=new Et(J)}$e(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(e,t.Ve):this.We(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.We(e,t.key,t.Ve)}Ge(t){this.forEachTarget(t,e=>{let i=this.ze(e);switch(t.state){case 0:this.je(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.je(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),i.De(t.resumeToken));break;default:U()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.je(r)&&e(r)})}Je(t){let e=t.targetId,i=t.me.count,r=this.Ye(e);if(r){let s=r.target;if(gh(s))if(i===0){let a=new B(s.path);this.We(e,a,Oe.newNoDocument(a,q.min()))}else ct(i===1);else{let a=this.Ze(e);if(a!==i){let l=this.Xe(t),c=l?this.et(l,t,a):1;if(c!==0){this.He(e);let h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,h)}Qv?.tt(function(f,p,_,D,T){var F,O,W,Y,Q,wt;let fe={localCacheCount:f,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},mt=p.unchangedNames;return mt&&(fe.bloomFilter={applied:T===0,hashCount:(F=mt?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(Y=(W=(O=mt?.bits)===null||O===void 0?void 0:O.bitmap)===null||W===void 0?void 0:W.length)!==null&&Y!==void 0?Y:0,padding:(wt=(Q=mt?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&wt!==void 0?wt:0,mightContain:A=>{var g;return(g=D?.mightContain(A))!==null&&g!==void 0&&g}}),fe}(a,t.me,this.Le.nt(),l,c))}}}}Xe(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e,a,l;try{a=mn(i).toUint8Array()}catch(c){if(c instanceof Ya)return lr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ih(a,r,s)}catch(c){return lr(c instanceof ui?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Te===0?null:l}et(t,e,i){return e.me.count===i-this.rt(t,e.targetId)?0:2}rt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(s=>{let a=this.Le.nt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.We(e,s,null),r++)}),r}it(t){let e=new Map;this.Be.forEach((s,a)=>{let l=this.Ye(a);if(l){if(s.current&&gh(l.target)){let c=new B(l.target.path);this.st(c).has(a)||this.ot(a,c)||this.We(a,c,Oe.newNoDocument(c,t))}s.be&&(e.set(a,s.ve()),s.Ce())}});let i=Z();this.Qe.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{let h=this.Ye(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(t));let r=new tl(t,e,this.Ke,this.ke,i);return this.ke=gn(),this.qe=Ua(),this.Qe=Ua(),this.Ke=new Et(J),r}Ue(t,e){if(!this.je(t))return;let i=this.ot(t,e.key)?2:0;this.ze(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t)),this.Qe=this.Qe.insert(e.key,this._t(e.key).add(t))}We(t,e,i){if(!this.je(t))return;let r=this.ze(t);this.ot(t,e)?r.Fe(e,1):r.Me(e),this.Qe=this.Qe.insert(e,this._t(e).delete(t)),this.Qe=this.Qe.insert(e,this._t(e).add(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ze(t){let e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let e=this.Be.get(t);return e||(e=new il,this.Be.set(t,e)),e}_t(t){let e=this.Qe.get(t);return e||(e=new Vt(J),this.Qe=this.Qe.insert(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Vt(J),this.qe=this.qe.insert(t,e)),e}je(t){let e=this.Ye(t)!==null;return e||V("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ut(t)}He(t){this.Be.set(t,new il),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.We(t,e,null)})}ot(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function Ua(){return new Et(B.comparator)}function Zv(){return new Et(B.comparator)}var KC={asc:"ASCENDING",desc:"DESCENDING"},QC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YC={and:"AND",or:"OR"},Ch=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Dh(n,t){return n.useProto3Json||Dl(t)?t:{value:t}}function rl(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function F_(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function XC(n,t){return rl(n,t.toTimestamp())}function Ue(n){return ct(!!n),q.fromTimestamp(function(e){let i=fn(e);return new jt(i.seconds,i.nanos)}(n))}function Pf(n,t){return Sh(n,t).canonicalString()}function Sh(n,t){let e=function(r){return new It(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function P_(n){let t=It.fromString(n);return ct(j_(t)),t}function Th(n,t){return Pf(n.databaseId,t.path)}function Hd(n,t){let e=P_(t);if(e.get(1)!==n.databaseId.projectId)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new B(N_(e))}function V_(n,t){return Pf(n.databaseId,t)}function ZC(n){let t=P_(n);return t.length===4?It.emptyPath():N_(t)}function Rh(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function N_(n){return ct(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Jv(n,t,e){return{name:Th(n,t),fields:e.value.mapValue.fields}}function JC(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:U()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(ct(f===void 0||typeof f=="string"),Wt.fromBase64String(f||"")):(ct(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Wt.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){let f=h.code===void 0?R.UNKNOWN:O_(h.code);return new L(f,h.message||"")}(a);e=new nl(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=Hd(n,i.document.name),s=Ue(i.document.updateTime),a=i.document.createTime?Ue(i.document.createTime):q.min(),l=new Me({mapValue:{fields:i.document.fields}}),c=Oe.newFoundDocument(r,s,a,l),h=i.targetIds||[],f=i.removedTargetIds||[];e=new or(h,f,c.key,c)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=Hd(n,i.document),s=i.readTime?Ue(i.readTime):q.min(),a=Oe.newNoDocument(r,s),l=i.removedTargetIds||[];e=new or([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=Hd(n,i.document),s=i.removedTargetIds||[];e=new or([],s,r,null)}else{if(!("filter"in t))return U();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,a=new Ah(r,s),l=i.targetId;e=new el(l,a)}}return e}function tD(n,t){let e;if(t instanceof gi)e={update:Jv(n,t.key,t.value)};else if(t instanceof Ja)e={delete:Th(n,t.key)};else if(t instanceof yn)e={update:Jv(n,t.key,t.data),updateMask:cD(t.fieldMask)};else{if(!(t instanceof _h))return U();e={verify:Th(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,a){let l=a.transform;if(l instanceof gr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof mi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yr)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw U()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:XC(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:U()}(n,t.precondition)),e}function eD(n,t){return n&&n.length>0?(ct(t!==void 0),n.map(e=>function(r,s){let a=r.updateTime?Ue(r.updateTime):Ue(s);return a.isEqual(q.min())&&(a=Ue(s)),new vh(a,r.transformResults||[])}(e,t))):[]}function nD(n,t){return{documents:[V_(n,t.path)]}}function iD(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=V_(n,r);let s=function(h){if(h.length!==0)return B_(ze.create(h,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let a=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:ir(_.field),direction:oD(_.dir)}}(f))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);let l=Dh(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ct:e,parent:r}}function rD(n){let t=ZC(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){ct(i===1);let f=e.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(p){let _=L_(p);return _ instanceof ze&&y_(_)?_.getFilters():[_]}(e.where));let a=[];e.orderBy&&(a=function(p){return p.map(_=>function(T){return new fr(rr(T.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(e.orderBy));let l=null;e.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,Dl(_)?null:_}(e.limit));let c=null;e.startAt&&(c=function(p){let _=!!p.before,D=p.values||[];return new hr(D,_)}(e.startAt));let h=null;return e.endAt&&(h=function(p){let _=!p.before,D=p.values||[];return new hr(D,_)}(e.endAt)),TC(t,r,a,s,l,"F",c,h)}function sD(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return U()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function L_(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=rr(e.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=rr(e.unaryFilter.field);return Ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=rr(e.unaryFilter.field);return Ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=rr(e.unaryFilter.field);return Ot.create(a,"!=",{nullValue:"NULL_VALUE"});default:return U()}}(n):n.fieldFilter!==void 0?function(e){return Ot.create(rr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return U()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ze.create(e.compositeFilter.filters.map(i=>L_(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return U()}}(e.compositeFilter.op))}(n):U()}function oD(n){return KC[n]}function aD(n){return QC[n]}function lD(n){return YC[n]}function ir(n){return{fieldPath:n.canonicalString()}}function rr(n){return ue.fromServerFormat(n.fieldPath)}function B_(n){return n instanceof Ot?function(e){if(e.op==="=="){if(jv(e.value))return{unaryFilter:{field:ir(e.field),op:"IS_NAN"}};if(Bv(e.value))return{unaryFilter:{field:ir(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(jv(e.value))return{unaryFilter:{field:ir(e.field),op:"IS_NOT_NAN"}};if(Bv(e.value))return{unaryFilter:{field:ir(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ir(e.field),op:aD(e.op),value:e.value}}}(n):n instanceof ze?function(e){let i=e.getFilters().map(r=>B_(r));return i.length===1?i[0]:{compositeFilter:{op:lD(e.op),filters:i}}}(n):U()}function cD(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function j_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Qs=class n{constructor(t,e,i,r,s=q.min(),a=q.min(),l=Wt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Mh=class{constructor(t){this.ht=t}};function uD(n){let t=rD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yh(t,t.limit,"L"):t}var sl=class{constructor(){}Et(t,e){this.dt(t,e),e.At()}dt(t,e){if("nullValue"in t)this.Rt(e,5);else if("booleanValue"in t)this.Rt(e,10),e.Vt(t.booleanValue?1:0);else if("integerValue"in t)this.Rt(e,15),e.Vt(_t(t.integerValue));else if("doubleValue"in t){let i=_t(t.doubleValue);isNaN(i)?this.Rt(e,13):(this.Rt(e,15),Hs(i)?e.Vt(0):e.Vt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Rt(e,20),typeof i=="string"&&(i=fn(i)),e.ft(`${i.seconds||""}`),e.Vt(i.nanos||0)}else if("stringValue"in t)this.gt(t.stringValue,e),this.yt(e);else if("bytesValue"in t)this.Rt(e,30),e.wt(mn(t.bytesValue)),this.yt(e);else if("referenceValue"in t)this.St(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Rt(e,45),e.Vt(i.latitude||0),e.Vt(i.longitude||0)}else"mapValue"in t?m_(t)?this.Rt(e,Number.MAX_SAFE_INTEGER):f_(t)?this.bt(t.mapValue,e):(this.Dt(t.mapValue,e),this.yt(e)):"arrayValue"in t?(this.vt(t.arrayValue,e),this.yt(e)):U()}gt(t,e){this.Rt(e,25),this.Ct(t,e)}Ct(t,e){e.ft(t)}Dt(t,e){let i=t.fields||{};this.Rt(e,55);for(let r of Object.keys(i))this.gt(r,e),this.dt(i[r],e)}bt(t,e){var i,r;let s=t.fields||{};this.Rt(e,53);let a="value",l=((r=(i=s[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Rt(e,15),e.Vt(_t(l)),this.gt(a,e),this.dt(s[a],e)}vt(t,e){let i=t.values||[];this.Rt(e,50);for(let r of i)this.dt(r,e)}St(t,e){this.Rt(e,37),B.fromName(t).path.forEach(i=>{this.Rt(e,60),this.Ct(i,e)})}Rt(t,e){t.Vt(e)}yt(t){t.Vt(2)}};sl.Ft=new sl;var kh=class{constructor(){this.ln=new Oh}addToCollectionParentIndex(t,e){return this.ln.add(e),M.resolve()}getCollectionParents(t,e){return M.resolve(this.ln.getEntries(e))}addFieldIndex(t,e){return M.resolve()}deleteFieldIndex(t,e){return M.resolve()}deleteAllFieldIndexes(t){return M.resolve()}createTargetIndexes(t,e){return M.resolve()}getDocumentsMatchingTarget(t,e){return M.resolve(null)}getIndexType(t,e){return M.resolve(0)}getFieldIndexes(t,e){return M.resolve([])}getNextCollectionGroupToUpdate(t){return M.resolve(null)}getMinOffset(t,e){return M.resolve(fi.min())}getMinOffsetFromCollectionGroup(t,e){return M.resolve(fi.min())}updateCollectionGroup(t,e,i){return M.resolve()}updateIndexEntries(t,e){return M.resolve()}},Oh=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Vt(It.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Vt(It.comparator)).toArray()}};var v1=new Uint8Array(0);var t_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},we=class n{static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}};we.DEFAULT_COLLECTION_PERCENTILE=10,we.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,we.DEFAULT=new we(41943040,we.DEFAULT_COLLECTION_PERCENTILE,we.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),we.DISABLED=new we(-1,0,0);var Ys=class n{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function e_([n,t],[e,i]){let r=J(n,e);return r===0?J(t,i):r}var Fh=class{constructor(t){this.Gn=t,this.buffer=new Vt(e_),this.zn=0}jn(){return++this.zn}Hn(t){let e=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();e_(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},Ph=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){V("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>S(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ar(e)?V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield xr(e)}yield this.Yn(3e5)}))}},Vh=class{constructor(t,e){this.Zn=t,this.params=e}calculateTargetCount(t,e){return this.Zn.Xn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return M.resolve(Sf.oe);let i=new Fh(e);return this.Zn.forEachTarget(t,r=>i.Hn(r.sequenceNumber)).next(()=>this.Zn.er(t,r=>i.Hn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Zn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Zn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(t_)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t_):this.tr(t,e))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,e){let i,r,s,a,l,c,h,f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(i=p,l=Date.now(),this.removeTargets(t,i,e))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),er()<=et.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}};function dD(n,t){return new Vh(n,t)}var Nh=class{constructor(){this.changes=new pn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Oe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?M.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Lh=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var Bh=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&$s(i.mutation,r,Le.empty(),jt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Z()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Z()){let r=ci();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let a=js();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){let i=ci();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Z()))}populateOverlays(t,e,i){let r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,l)=>{e.set(a,l)})})}computeViews(t,e,i,r){let s=gn(),a=zs(),l=function(){return zs()}();return e.forEach((c,h)=>{let f=i.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof yn)?s=s.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),$s(f.mutation,h,f.mutation.getFieldMask(),jt.now())):a.set(h.key,Le.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((h,f)=>a.set(h,f)),e.forEach((h,f)=>{var p;return l.set(h,new Lh(f,(p=a.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,e){let i=zs(),r=new Et((a,l)=>a-l),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(let l of a)l.keys().forEach(c=>{let h=e.get(c);if(h===null)return;let f=i.get(c)||Le.empty();f=l.applyToLocalView(h,f),i.set(c,f);let p=(r.get(l.batchId)||Z()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let c=l.getNext(),h=c.key,f=c.value,p=E_();f.forEach(_=>{if(!s.has(_)){let D=M_(e.get(_),i.get(_));D!==null&&p.set(_,D),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return M.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(a){return B.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):RC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{let a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):M.resolve(ci()),l=-1,c=s;return a.next(h=>M.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(t,f).next(_=>{c=c.insert(f,_)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,c,h,Z())).next(f=>({batchId:l,changes:I_(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new B(e)).next(i=>{let r=js();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let s=e.collectionGroup,a=js();return this.indexManager.getCollectionParents(t,s).next(l=>M.forEach(l,c=>{let h=function(p,_){return new mr(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(f=>{f.forEach((p,_)=>{a=a.insert(p,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(a=>{s.forEach((c,h)=>{let f=h.getKey();a.get(f)===null&&(a=a.insert(f,Oe.newInvalidDocument(f)))});let l=js();return a.forEach((c,h)=>{let f=s.get(c);f!==void 0&&$s(f.mutation,h,Le.empty(),jt.now()),Rl(e,h)&&(l=l.insert(c,h))}),l})}};var jh=class{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,e){return M.resolve(this.Tr.get(e))}saveBundleMetadata(t,e){return this.Tr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Ue(r.createTime)}}(e)),M.resolve()}getNamedQuery(t,e){return M.resolve(this.Ir.get(e))}saveNamedQuery(t,e){return this.Ir.set(e.name,function(r){return{name:r.name,query:uD(r.bundledQuery),readTime:Ue(r.readTime)}}(e)),M.resolve()}};var Uh=class{constructor(){this.overlays=new Et(B.comparator),this.Er=new Map}getOverlay(t,e){return M.resolve(this.overlays.get(e))}getOverlays(t,e){let i=ci();return M.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.Tt(t,e,s)}),M.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Er.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(i)),M.resolve()}getOverlaysForCollection(t,e,i){let r=ci(),s=e.length+1,a=new B(e.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let c=l.getNext().value,h=c.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return M.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Et((h,f)=>h-f),a=this.overlays.getIterator();for(;a.hasNext();){let h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>i){let f=s.get(h.largestBatchId);f===null&&(f=ci(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let l=ci(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=r)););return M.resolve(l)}Tt(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Er.get(r.largestBatchId).delete(i.key);this.Er.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new xh(e,i));let s=this.Er.get(e);s===void 0&&(s=Z(),this.Er.set(e,s)),this.Er.set(e,s.add(i.key))}};var Gh=class{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(t){return M.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,M.resolve()}};var Xs=class{constructor(){this.dr=new Vt(Rt.Ar),this.Rr=new Vt(Rt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(t,e){let i=new Rt(t,e);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.gr(new Rt(t,e))}pr(t,e){t.forEach(i=>this.removeReference(i,e))}yr(t){let e=new B(new It([])),i=new Rt(e,t),r=new Rt(e,t+1),s=[];return this.Rr.forEachInRange([i,r],a=>{this.gr(a),s.push(a.key)}),s}wr(){this.dr.forEach(t=>this.gr(t))}gr(t){this.dr=this.dr.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){let e=new B(new It([])),i=new Rt(e,t),r=new Rt(e,t+1),s=Z();return this.Rr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){let e=new Rt(t,0),i=this.dr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},Rt=class{constructor(t,e){this.key=t,this.br=e}static Ar(t,e){return B.comparator(t.key,e.key)||J(t.br,e.br)}static Vr(t,e){return J(t.br,e.br)||B.comparator(t.key,e.key)}};var zh=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Dr=1,this.vr=new Vt(Rt.Ar)}checkEmpty(t){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new bh(s,e,i,r);this.mutationQueue.push(a);for(let l of r)this.vr=this.vr.add(new Rt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(t,e){return M.resolve(this.Cr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.Fr(i),s=r<0?0:r;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new Rt(e,0),r=new Rt(e,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([i,r],a=>{let l=this.Cr(a.br);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Vt(J);return e.forEach(r=>{let s=new Rt(r,0),a=new Rt(r,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,a],l=>{i=i.add(l.br)})}),M.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=i;B.isDocumentKey(s)||(s=s.child(""));let a=new Rt(new B(s),0),l=new Vt(J);return this.vr.forEachWhile(c=>{let h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.br)),!0)},a),M.resolve(this.Mr(l))}Mr(t){let e=[];return t.forEach(i=>{let r=this.Cr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){ct(this.Or(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return M.forEach(e.mutations,r=>{let s=new Rt(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.vr=i})}Ln(t){}containsKey(t,e){let i=new Rt(e,0),r=this.vr.firstAfterOrEqual(i);return M.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,M.resolve()}Or(t,e){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){let e=this.Fr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var $h=class{constructor(t){this.Nr=t,this.docs=function(){return new Et(B.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),s=r?r.size:0,a=this.Nr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return M.resolve(i?i.document.mutableCopy():Oe.newInvalidDocument(e))}getEntries(t,e){let i=gn();return e.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Oe.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=gn(),a=e.path,l=new B(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){let{key:h,value:{document:f}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||gC(pC(f),i)<=0||(r.has(f.key)||Rl(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(t,e,i,r){U()}Lr(t,e){return M.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Hh(this)}getSize(t){return M.resolve(this.size)}},Hh=class extends Nh{constructor(t){super(),this.hr=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.hr.addEntry(t,r)):this.hr.removeEntry(i)}),M.waitFor(e)}getFromCache(t,e){return this.hr.getEntry(t,e)}getAllFromCache(t,e){return this.hr.getEntries(t,e)}};var qh=class{constructor(t){this.persistence=t,this.Br=new pn(e=>Mf(e),kf),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.kr=0,this.qr=new Xs,this.targetCount=0,this.Qr=Ys.qn()}forEachTarget(t,e){return this.Br.forEach((i,r)=>e(r)),M.resolve()}getLastRemoteSnapshotVersion(t){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return M.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.kr&&(this.kr=e),M.resolve()}Un(t){this.Br.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Qr=new Ys(e),this.highestTargetId=e),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,e){return this.Un(e),this.targetCount+=1,M.resolve()}updateTargetData(t,e){return this.Un(e),M.resolve()}removeTargetData(t,e){return this.Br.delete(e.target),this.qr.yr(e.targetId),this.targetCount-=1,M.resolve()}removeTargets(t,e,i){let r=0,s=[];return this.Br.forEach((a,l)=>{l.sequenceNumber<=e&&i.get(l.targetId)===null&&(this.Br.delete(a),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),M.waitFor(s).next(()=>r)}getTargetCount(t){return M.resolve(this.targetCount)}getTargetData(t,e){let i=this.Br.get(e)||null;return M.resolve(i)}addMatchingKeys(t,e,i){return this.qr.mr(e,i),M.resolve()}removeMatchingKeys(t,e,i){this.qr.pr(e,i);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.qr.yr(e),M.resolve()}getMatchingKeysForTargetId(t,e){let i=this.qr.Sr(e);return M.resolve(i)}containsKey(t,e){return M.resolve(this.qr.containsKey(e))}};var ol=class{constructor(t,e){this.Kr={},this.overlays={},this.$r=new Sf(0),this.Ur=!1,this.Ur=!0,this.Wr=new Gh,this.referenceDelegate=t(this),this.Gr=new qh(this),this.indexManager=new kh,this.remoteDocumentCache=function(r){return new $h(r)}(i=>this.referenceDelegate.zr(i)),this.serializer=new Mh(e),this.jr=new jh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Uh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Kr[t.toKey()];return i||(i=new zh(e,this.referenceDelegate),this.Kr[t.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,e,i){V("MemoryPersistence","Starting transaction:",t);let r=new Wh(this.$r.next());return this.referenceDelegate.Hr(),i(r).next(s=>this.referenceDelegate.Jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Yr(t,e){return M.or(Object.values(this.Kr).map(i=>()=>i.containsKey(t,e)))}},Wh=class extends ih{constructor(t){super(),this.currentSequenceNumber=t}},Kh=class n{constructor(t){this.persistence=t,this.Zr=new Xs,this.Xr=null}static ei(t){return new n(t)}get ti(){if(this.Xr)return this.Xr;throw U()}addReference(t,e,i){return this.Zr.addReference(i,e),this.ti.delete(i.toString()),M.resolve()}removeReference(t,e,i){return this.Zr.removeReference(i,e),this.ti.add(i.toString()),M.resolve()}markPotentiallyOrphaned(t,e){return this.ti.add(e.toString()),M.resolve()}removeTarget(t,e){this.Zr.yr(e.targetId).forEach(r=>this.ti.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.ti.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Hr(){this.Xr=new Set}Jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.ti,i=>{let r=B.fromPath(i);return this.ni(t,r).next(s=>{s||e.removeEntry(r,q.min())})}).next(()=>(this.Xr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ni(t,e).next(i=>{i?this.ti.delete(e.toString()):this.ti.add(e.toString())})}zr(t){return 0}ni(t,e){return M.or([()=>M.resolve(this.Zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Yr(t,e)])}},al=class n{constructor(t,e){this.persistence=t,this.ri=new pn(i=>bC(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=dD(this,e)}static ei(t,e){return new n(t,e)}Hr(){}Jr(t){return M.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}Xn(t){let e=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}nr(t){let e=0;return this.er(t,i=>{e++}).next(()=>e)}er(t,e){return M.forEach(this.ri,(i,r)=>this.ir(t,i,r).next(s=>s?M.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Lr(t,a=>this.ir(t,a,e).next(l=>{l||(i++,s.removeEntry(a,q.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.ri.set(e,t.currentSequenceNumber),M.resolve()}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.ri.set(i,t.currentSequenceNumber),M.resolve()}removeReference(t,e,i){return this.ri.set(i,t.currentSequenceNumber),M.resolve()}updateLimboDocument(t,e){return this.ri.set(e,t.currentSequenceNumber),M.resolve()}zr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=za(t.data.value)),e}ir(t,e,i){return M.or([()=>this.persistence.Yr(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{let r=this.ri.get(e);return M.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}};var Qh=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Wi=i,this.Gi=r}static zi(t,e){let i=Z(),r=Z();for(let s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(t,e.fromCache,i,r)}};var Yh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Xh=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return gv()?8:vC(mv())>0?6:4}()}initialize(t,e){this.Zi=t,this.indexManager=e,this.ji=!0}getDocumentsMatchingQuery(t,e,i,r){let s={result:null};return this.Xi(t,e).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.es(t,e,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new Yh;return this.ts(t,e,a).next(l=>{if(s.result=l,this.Hi)return this.ns(t,e,a,l.size)})}).next(()=>s.result)}ns(t,e,i,r){return i.documentReadCount<this.Ji?(er()<=et.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",nr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),M.resolve()):(er()<=et.DEBUG&&V("QueryEngine","Query:",nr(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Yi*r?(er()<=et.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",nr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,je(e))):M.resolve())}Xi(t,e){if($v(e))return M.resolve(null);let i=je(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=yh(e,null,"F"),i=je(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let a=Z(...s);return this.Zi.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(c=>{let h=this.rs(e,l);return this.ss(e,h,a,c.readTime)?this.Xi(t,yh(e,null,"F")):this.os(t,h,e,c)}))})))}es(t,e,i,r){return $v(e)||r.isEqual(q.min())?M.resolve(null):this.Zi.getDocuments(t,i).next(s=>{let a=this.rs(e,s);return this.ss(e,a,i,r)?M.resolve(null):(er()<=et.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nr(e)),this.os(t,a,e,mC(r,-1)).next(l=>l))})}rs(t,e){let i=new Vt(x_(t));return e.forEach((r,s)=>{Rl(t,s)&&(i=i.add(s))}),i}ss(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ts(t,e,i){return er()<=et.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",nr(e)),this.Zi.getDocumentsMatchingQuery(t,e,fi.min(),i)}os(t,e,i,r){return this.Zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}};var Zh=class{constructor(t,e,i,r){this.persistence=t,this._s=e,this.serializer=r,this.us=new Et(J),this.cs=new pn(s=>Mf(s),kf),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(i)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Bh(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.us))}};function hD(n,t,e,i){return new Zh(n,t,e,i)}function U_(n,t){return S(this,null,function*(){let e=z(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Ps(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{let a=[],l=[],c=Z();for(let h of r){a.push(h.batchId);for(let f of h.mutations)c=c.add(f.key)}for(let h of s){l.push(h.batchId);for(let f of h.mutations)c=c.add(f.key)}return e.localDocuments.getDocuments(i,c).next(h=>({Ts:h,removedBatchIds:a,addedBatchIds:l}))})})})}function fD(n,t){let e=z(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=e.hs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){let p=h.batch,_=p.keys(),D=M.resolve();return _.forEach(T=>{D=D.next(()=>f.getEntry(c,T)).next(F=>{let O=h.docVersions.get(T);ct(O!==null),F.version.compareTo(O)<0&&(p.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),f.addEntry(F)))})}),D.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=Z();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function G_(n){let t=z(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Gr.getLastRemoteSnapshotVersion(e))}function mD(n,t){let e=z(n),i=t.snapshotVersion,r=e.us;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=e.hs.newChangeBuffer({trackRemovals:!0});r=e.us;let l=[];t.targetChanges.forEach((f,p)=>{let _=r.get(p);if(!_)return;l.push(e.Gr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>e.Gr.addMatchingKeys(s,f.addedDocuments,p)));let D=_.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?D=D.withResumeToken(Wt.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):f.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(f.resumeToken,i)),r=r.insert(p,D),function(F,O,W){return F.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(_,D,f)&&l.push(e.Gr.updateTargetData(s,D))});let c=gn(),h=Z();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(pD(s,a,t.documentUpdates).next(f=>{c=f.Is,h=f.Es})),!i.isEqual(q.min())){let f=e.Gr.getLastRemoteSnapshotVersion(s).next(p=>e.Gr.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(f)}return M.waitFor(l).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(e.us=r,s))}function pD(n,t,e){let i=Z(),r=Z();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let a=gn();return e.forEach((l,c)=>{let h=s.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(q.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):V("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Is:a,Es:r}})}function gD(n,t){let e=z(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function yD(n,t){let e=z(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Gr.getTargetData(i,t).next(s=>s?(r=s,M.resolve(r)):e.Gr.allocateTargetId(i).next(a=>(r=new Qs(t,a,"TargetPurposeListen",i.currentSequenceNumber),e.Gr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.us.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.us=e.us.insert(i.targetId,i),e.cs.set(t,i.targetId)),i})}function Jh(n,t,e){return S(this,null,function*(){let i=z(n),r=i.us.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Ar(a))throw a;V("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}i.us=i.us.remove(t),i.cs.delete(r.target)})}function n_(n,t,e){let i=z(n),r=q.min(),s=Z();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,f){let p=z(c),_=p.cs.get(f);return _!==void 0?M.resolve(p.us.get(_)):p.Gr.getTargetData(h,f)}(i,a,je(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>i._s.getDocumentsMatchingQuery(a,t,e?r:q.min(),e?s:Z())).next(l=>(vD(i,kC(t),l),{documents:l,ds:s})))}function vD(n,t,e){let i=n.ls.get(t)||q.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ls.set(t,i)}var ll=class{constructor(){this.activeTargetIds=LC()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var tf=class{constructor(){this._o=new ll,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,e,i){this.ao[t]=e}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new ll,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var ef=class{uo(t){}shutdown(){}};var cl=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.To)t(0)}Po(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ga=null;function qd(){return Ga===null?Ga=function(){return 268435456+Math.round(2147483648*Math.random())}():Ga++,"0x"+Ga.toString(16)}var _D={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nf=class{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}};var qt="WebChannelConnection",rf=class extends class{get Co(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+e.host,this.Mo=`projects/${r}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Oo(e,i,r,s,a){let l=qd(),c=this.No(e,i.toUriEncodedString());V("RestConnection",`Sending RPC '${e}' ${l}:`,c,r);let h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(h,s,a),this.Bo(e,c,h,r).then(f=>(V("RestConnection",`Received RPC '${e}' ${l}: `,f),f),f=>{throw lr("RestConnection",`RPC '${e}' ${l} failed with error: `,f,"url: ",c,"request:",r),f})}ko(e,i,r,s,a,l){return this.Oo(e,i,r,s,a)}Lo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}No(e,i){let r=_D[e];return`${this.Fo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Bo(t,e,i,r){let s=qd();return new Promise((a,l)=>{let c=new jd;c.setWithCredentials(!0),c.listenOnce(Ud.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Bs.NO_ERROR:let f=c.getResponseJson();V(qt,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),a(f);break;case Bs.TIMEOUT:V(qt,`RPC '${t}' ${s} timed out`),l(new L(R.DEADLINE_EXCEEDED,"Request time out"));break;case Bs.HTTP_ERROR:let p=c.getStatus();if(V(qt,`RPC '${t}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);let D=_?.error;if(D&&D.status&&D.message){let T=function(O){let W=O.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(W)>=0?W:R.UNKNOWN}(D.status);l(new L(T,D.message))}else l(new L(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new L(R.UNAVAILABLE,"Connection failed."));break;default:U()}}finally{V(qt,`RPC '${t}' ${s} completed.`)}});let h=JSON.stringify(r);V(qt,`RPC '${t}' ${s} sending request:`,r),c.send(e,"POST",h,i,15)})}qo(t,e,i){let r=qd(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=$d(),l=zd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,e,i),c.encodeInitMessageHeaders=!0;let f=s.join("");V(qt,`Creating RPC '${t}' stream ${r}: ${f}`,c);let p=a.createWebChannel(f,c),_=!1,D=!1,T=new nf({Eo:O=>{D?V(qt,`Not sending because RPC '${t}' stream ${r} is closed:`,O):(_||(V(qt,`Opening RPC '${t}' stream ${r} transport.`),p.open(),_=!0),V(qt,`RPC '${t}' stream ${r} sending:`,O),p.send(O))},Ao:()=>p.close()}),F=(O,W,Y)=>{O.listen(W,Q=>{try{Y(Q)}catch(wt){setTimeout(()=>{throw wt},0)}})};return F(p,tr.EventType.OPEN,()=>{D||(V(qt,`RPC '${t}' stream ${r} transport opened.`),T.So())}),F(p,tr.EventType.CLOSE,()=>{D||(D=!0,V(qt,`RPC '${t}' stream ${r} transport closed`),T.Do())}),F(p,tr.EventType.ERROR,O=>{D||(D=!0,lr(qt,`RPC '${t}' stream ${r} transport errored:`,O),T.Do(new L(R.UNAVAILABLE,"The operation could not be completed")))}),F(p,tr.EventType.MESSAGE,O=>{var W;if(!D){let Y=O.data[0];ct(!!Y);let Q=Y,wt=Q?.error||((W=Q[0])===null||W===void 0?void 0:W.error);if(wt){V(qt,`RPC '${t}' stream ${r} received error:`,wt);let fe=wt.status,mt=function(v){let b=Tt[v];if(b!==void 0)return O_(b)}(fe),A=wt.message;mt===void 0&&(mt=R.INTERNAL,A="Unknown error status: "+fe+" with message "+wt.message),D=!0,T.Do(new L(mt,A)),p.close()}else V(qt,`RPC '${t}' stream ${r} received:`,Y),T.vo(Y)}}),F(l,Gd.STAT_EVENT,O=>{O.stat===Ba.PROXY?V(qt,`RPC '${t}' stream ${r} detected buffering proxy`):O.stat===Ba.NOPROXY&&V(qt,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.bo()},0),T}};function Wd(){return typeof document<"u"?document:null}function Ml(n){return new Ch(n,!0)}var ul=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.li=t,this.timerId=e,this.Qo=i,this.Ko=r,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();let e=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),r=Math.max(0,e-i);r>0&&V("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var dl=class{constructor(t,e,i,r,s,a,l,c){this.li=t,this.Yo=i,this.Zo=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ul(t,e)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return S(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}u_(){return S(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(t,e){return S(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():e&&e.code===R.RESOURCE_EXHAUSTED?(hn(e.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):e&&e.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.po(e)})}P_(){}auth(){this.state=1;let t=this.T_(this.Xo),e=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Xo===e&&this.I_(i,r)},i=>{t(()=>{let r=new L(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(r)})})}I_(t,e){let i=this.T_(this.Xo);this.stream=this.d_(t,e),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(r=>{i(()=>this.E_(r))}),this.stream.onMessage(r=>{i(()=>++this.n_==1?this.A_(r):this.onNext(r))})}o_(){this.state=5,this.r_.jo(()=>S(this,null,function*(){this.state=0,this.start()}))}E_(t){return V("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return e=>{this.li.enqueueAndForget(()=>this.Xo===t?e():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sf=class extends dl{constructor(t,e,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s}d_(t,e){return this.connection.qo("Listen",t,e)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();let e=JC(this.serializer,t),i=function(s){if(!("targetChange"in s))return q.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?q.min():a.readTime?Ue(a.readTime):q.min()}(t);return this.listener.R_(e,i)}V_(t){let e={};e.database=Rh(this.serializer),e.addTarget=function(s,a){let l,c=a.target;if(l=gh(c)?{documents:nD(s,c)}:{query:iD(s,c).ct},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=F_(s,a.resumeToken);let h=Dh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(q.min())>0){l.readTime=rl(s,a.snapshotVersion.toTimestamp());let h=Dh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);let i=sD(this.serializer,t);i&&(e.labels=i),this.c_(e)}m_(t){let e={};e.database=Rh(this.serializer),e.removeTarget=t,this.c_(e)}},of=class extends dl{constructor(t,e,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(t,e){return this.connection.qo("Write",t,e)}A_(t){return ct(!!t.streamToken),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){ct(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();let e=eD(t.writeResults,t.commitTime),i=Ue(t.commitTime);return this.listener.y_(i,e)}w_(){let t={};t.database=Rh(this.serializer),this.c_(t)}g_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>tD(this.serializer,i))};this.c_(e)}};var af=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,e,i,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Oo(t,Sh(e,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(R.UNKNOWN,s.toString())})}ko(t,e,i,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.ko(t,Sh(e,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new L(R.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},lf=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(hn(e),this.C_=!1):V("OnlineStateTracker",e)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var cf=class{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(a=>{i.enqueueAndForget(()=>S(this,null,function*(){_i(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let h=z(c);h.k_.add(4),yield no(h),h.K_.set("Unknown"),h.k_.delete(4),yield kl(h)})}(this))}))}),this.K_=new lf(i,r)}};function kl(n){return S(this,null,function*(){if(_i(n))for(let t of n.q_)yield t(!0)})}function no(n){return S(this,null,function*(){for(let t of n.q_)yield t(!1)})}function z_(n,t){let e=z(n);e.B_.has(t.targetId)||(e.B_.set(t.targetId,t),Bf(e)?Lf(e):Ir(e).s_()&&Nf(e,t))}function Vf(n,t){let e=z(n),i=Ir(e);e.B_.delete(t),i.s_()&&$_(e,t),e.B_.size===0&&(i.s_()?i.a_():_i(e)&&e.K_.set("Unknown"))}function Nf(n,t){if(n.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(q.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Ir(n).V_(t)}function $_(n,t){n.U_.xe(t),Ir(n).m_(t)}function Lf(n){n.U_=new Eh({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>n.B_.get(t)||null,nt:()=>n.datastore.serializer.databaseId}),Ir(n).start(),n.K_.F_()}function Bf(n){return _i(n)&&!Ir(n).i_()&&n.B_.size>0}function _i(n){return z(n).k_.size===0}function H_(n){n.U_=void 0}function bD(n){return S(this,null,function*(){n.K_.set("Online")})}function wD(n){return S(this,null,function*(){n.B_.forEach((t,e)=>{Nf(n,t)})})}function xD(n,t){return S(this,null,function*(){H_(n),Bf(n)?(n.K_.O_(t),Lf(n)):n.K_.set("Unknown")})}function AD(n,t,e){return S(this,null,function*(){if(n.K_.set("Online"),t instanceof nl&&t.state===2&&t.cause)try{yield function(r,s){return S(this,null,function*(){let a=s.cause;for(let l of s.targetIds)r.B_.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.B_.delete(l),r.U_.removeTarget(l))})}(n,t)}catch(i){V("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield hl(n,i)}else if(t instanceof or?n.U_.$e(t):t instanceof el?n.U_.Je(t):n.U_.Ge(t),!e.isEqual(q.min()))try{let i=yield G_(n.localStore);e.compareTo(i)>=0&&(yield function(s,a){let l=s.U_.it(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){let f=s.B_.get(h);f&&s.B_.set(h,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{let f=s.B_.get(c);if(!f)return;s.B_.set(c,f.withResumeToken(Wt.EMPTY_BYTE_STRING,f.snapshotVersion)),$_(s,c);let p=new Qs(f.target,c,h,f.sequenceNumber);Nf(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(n,e))}catch(i){V("RemoteStore","Failed to raise snapshot:",i),yield hl(n,i)}})}function hl(n,t,e){return S(this,null,function*(){if(!Ar(t))throw t;n.k_.add(1),yield no(n),n.K_.set("Offline"),e||(e=()=>G_(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield e(),n.k_.delete(1),yield kl(n)}))})}function q_(n,t){return t().catch(e=>hl(n,e,t))}function Ol(n){return S(this,null,function*(){let t=z(n),e=Bn(t),i=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;ID(t);)try{let r=yield gD(t.localStore,i);if(r===null){t.L_.length===0&&e.a_();break}i=r.batchId,ED(t,r)}catch(r){yield hl(t,r)}W_(t)&&K_(t)})}function ID(n){return _i(n)&&n.L_.length<10}function ED(n,t){n.L_.push(t);let e=Bn(n);e.s_()&&e.f_&&e.g_(t.mutations)}function W_(n){return _i(n)&&!Bn(n).i_()&&n.L_.length>0}function K_(n){Bn(n).start()}function CD(n){return S(this,null,function*(){Bn(n).w_()})}function DD(n){return S(this,null,function*(){let t=Bn(n);for(let e of n.L_)t.g_(e.mutations)})}function SD(n,t,e){return S(this,null,function*(){let i=n.L_.shift(),r=wh.from(i,t,e);yield q_(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Ol(n)})}function TD(n,t){return S(this,null,function*(){t&&Bn(n).f_&&(yield function(i,r){return S(this,null,function*(){if(function(a){return HC(a)&&a!==R.ABORTED}(r.code)){let s=i.L_.shift();Bn(i).__(),yield q_(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Ol(i)}})}(n,t)),W_(n)&&K_(n)})}function i_(n,t){return S(this,null,function*(){let e=z(n);e.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let i=_i(e);e.k_.add(3),yield no(e),i&&e.K_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.k_.delete(3),yield kl(e)})}function RD(n,t){return S(this,null,function*(){let e=z(n);t?(e.k_.delete(2),yield kl(e)):t||(e.k_.add(2),yield no(e),e.K_.set("Unknown"))})}function Ir(n){return n.W_||(n.W_=function(e,i,r){let s=z(e);return s.b_(),new sf(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Ro:bD.bind(null,n),mo:wD.bind(null,n),po:xD.bind(null,n),R_:AD.bind(null,n)}),n.q_.push(t=>S(this,null,function*(){t?(n.W_.__(),Bf(n)?Lf(n):n.K_.set("Unknown")):(yield n.W_.stop(),H_(n))}))),n.W_}function Bn(n){return n.G_||(n.G_=function(e,i,r){let s=z(e);return s.b_(),new of(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:CD.bind(null,n),po:TD.bind(null,n),p_:DD.bind(null,n),y_:SD.bind(null,n)}),n.q_.push(t=>S(this,null,function*(){t?(n.G_.__(),yield Ol(n)):(yield n.G_.stop(),n.L_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))}))),n.G_}var uf=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ke,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let a=Date.now()+i,l=new n(t,e,a,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(R.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jf(n,t){if(hn("AsyncQueue",`${t}: ${n}`),Ar(n))return new L(R.UNAVAILABLE,`${t}: ${n}`);throw n}var fl=class n{static emptySet(t){return new n(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||B.comparator(e.key,i.key):(e,i)=>B.comparator(e.key,i.key),this.keyedMap=js(),this.sortedSet=new Et(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var ml=class{constructor(){this.z_=new Et(B.comparator)}track(t){let e=t.doc.key,i=this.z_.get(e);i?t.type!==0&&i.type===3?this.z_=this.z_.insert(e,t):t.type===3&&i.type!==1?this.z_=this.z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.z_=this.z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.z_=this.z_.remove(e):t.type===1&&i.type===2?this.z_=this.z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):U():this.z_=this.z_.insert(e,t)}j_(){let t=[];return this.z_.inorderTraversal((e,i)=>{t.push(i)}),t}},_r=class n{constructor(t,e,i,r,s,a,l,c,h){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,e,i,r,s){let a=[];return e.forEach(l=>{a.push({type:0,doc:l})}),new n(t,e,fl.emptySet(e),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Tl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var df=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}},hf=class{constructor(){this.queries=r_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(e,i){let r=z(e),s=r.queries;r.queries=r_(),s.forEach((a,l)=>{for(let c of l.J_)c.onError(i)})})(this,new L(R.ABORTED,"Firestore shutting down"))}};function r_(){return new pn(n=>w_(n),Tl)}function Q_(n,t){return S(this,null,function*(){let e=z(n),i=3,r=t.query,s=e.queries.get(r);s?!s.Y_()&&t.Z_()&&(i=2):(s=new df,i=t.Z_()?0:1);try{switch(i){case 0:s.H_=yield e.onListen(r,!0);break;case 1:s.H_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(a){let l=jf(a,`Initialization of query '${nr(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.J_.push(t),t.ea(e.onlineState),s.H_&&t.ta(s.H_)&&Uf(e)})}function Y_(n,t){return S(this,null,function*(){let e=z(n),i=t.query,r=3,s=e.queries.get(i);if(s){let a=s.J_.indexOf(t);a>=0&&(s.J_.splice(a,1),s.J_.length===0?r=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function MD(n,t){let e=z(n),i=!1;for(let r of t){let s=r.query,a=e.queries.get(s);if(a){for(let l of a.J_)l.ta(r)&&(i=!0);a.H_=r}}i&&Uf(e)}function kD(n,t,e){let i=z(n),r=i.queries.get(t);if(r)for(let s of r.J_)s.onError(e);i.queries.delete(t)}function Uf(n){n.X_.forEach(t=>{t.next()})}var ff,s_;(s_=ff||(ff={})).na="default",s_.Cache="cache";var pl=class{constructor(t,e,i){this.query=t,this.ra=e,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new _r(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ia?this.oa(t)&&(this.ra.next(t),e=!0):this._a(t,this.onlineState)&&(this.aa(t),e=!0),this.sa=t,e}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let e=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),e=!0),e}_a(t,e){if(!t.fromCache||!this.Z_())return!0;let i=e!=="Offline";return(!this.options.ua||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}oa(t){if(t.docChanges.length>0)return!0;let e=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}aa(t){t=_r.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==ff.Cache}};var gl=class{constructor(t){this.key=t}},yl=class{constructor(t){this.key=t}},mf=class{constructor(t,e){this.query=t,this.da=e,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Z(),this.mutatedKeys=Z(),this.Va=x_(t),this.ma=new fl(this.Va)}get fa(){return this.da}ga(t,e){let i=e?e.pa:new ml,r=e?e.ma:this.ma,s=e?e.mutatedKeys:this.mutatedKeys,a=r,l=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,p)=>{let _=r.get(f),D=Rl(this.query,p)?p:null,T=!!_&&this.mutatedKeys.has(_.key),F=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations),O=!1;_&&D?_.data.isEqual(D.data)?T!==F&&(i.track({type:3,doc:D}),O=!0):this.ya(_,D)||(i.track({type:2,doc:D}),O=!0,(c&&this.Va(D,c)>0||h&&this.Va(D,h)<0)&&(l=!0)):!_&&D?(i.track({type:0,doc:D}),O=!0):_&&!D&&(i.track({type:1,doc:_}),O=!0,(c||h)&&(l=!0)),O&&(D?(a=a.add(D),s=F?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{ma:a,pa:i,ss:l,mutatedKeys:s}}ya(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;let a=t.pa.j_();a.sort((f,p)=>function(D,T){let F=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U()}};return F(D)-F(T)}(f.type,p.type)||this.Va(f.doc,p.doc)),this.wa(i),r=r!=null&&r;let l=e&&!r?this.Sa():[],c=this.Ra.size===0&&this.current&&!r?1:0,h=c!==this.Aa;return this.Aa=c,a.length!==0||h?{snapshot:new _r(this.query,t.ma,s,a,t.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:l}:{ba:l}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ml,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.da.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(e=>this.da=this.da.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.da=this.da.delete(e)),this.current=t.current)}Sa(){if(!this.current)return[];let t=this.Ra;this.Ra=Z(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});let e=[];return t.forEach(i=>{this.Ra.has(i)||e.push(new yl(i))}),this.Ra.forEach(i=>{t.has(i)||e.push(new gl(i))}),e}va(t){this.da=t.ds,this.Ra=Z();let e=this.ga(t.documents);return this.applyChanges(e,!0)}Ca(){return _r.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},pf=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},gf=class{constructor(t){this.key=t,this.Fa=!1}},yf=class{constructor(t,e,i,r,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new pn(l=>w_(l),Tl),this.Oa=new Map,this.Na=new Set,this.La=new Et(B.comparator),this.Ba=new Map,this.ka=new Xs,this.qa={},this.Qa=new Map,this.Ka=Ys.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function OD(n,t,e=!0){return S(this,null,function*(){let i=nb(n),r,s=i.xa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Ca()):r=yield X_(i,t,e,!0),r})}function FD(n,t){return S(this,null,function*(){let e=nb(n);yield X_(e,t,!0,!1)})}function X_(n,t,e,i){return S(this,null,function*(){let r=yield yD(n.localStore,je(t)),s=r.targetId,a=n.sharedClientState.addLocalQueryTarget(s,e),l;return i&&(l=yield PD(n,t,s,a==="current",r.resumeToken)),n.isPrimaryClient&&e&&z_(n.remoteStore,r),l})}function PD(n,t,e,i,r){return S(this,null,function*(){n.Ua=(p,_,D)=>function(F,O,W,Y){return S(this,null,function*(){let Q=O.view.ga(W);Q.ss&&(Q=yield n_(F.localStore,O.query,!1).then(({documents:A})=>O.view.ga(A,Q)));let wt=Y&&Y.targetChanges.get(O.targetId),fe=Y&&Y.targetMismatches.get(O.targetId)!=null,mt=O.view.applyChanges(Q,F.isPrimaryClient,wt,fe);return a_(F,O.targetId,mt.ba),mt.snapshot})}(n,p,_,D);let s=yield n_(n.localStore,t,!0),a=new mf(t,s.ds),l=a.ga(s.documents),c=Ks.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),h=a.applyChanges(l,n.isPrimaryClient,c);a_(n,e,h.ba);let f=new pf(t,e,a);return n.xa.set(t,f),n.Oa.has(e)?n.Oa.get(e).push(t):n.Oa.set(e,[t]),h.snapshot})}function VD(n,t,e){return S(this,null,function*(){let i=z(n),r=i.xa.get(t),s=i.Oa.get(r.targetId);if(s.length>1)return i.Oa.set(r.targetId,s.filter(a=>!Tl(a,t))),void i.xa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jh(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Vf(i.remoteStore,r.targetId),vf(i,r.targetId)}).catch(xr))):(vf(i,r.targetId),yield Jh(i.localStore,r.targetId,!0))})}function ND(n,t){return S(this,null,function*(){let e=z(n),i=e.xa.get(t),r=e.Oa.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Vf(e.remoteStore,i.targetId))})}function LD(n,t,e){return S(this,null,function*(){let i=HD(n);try{let r=yield function(a,l){let c=z(a),h=jt.now(),f=l.reduce((D,T)=>D.add(T.key),Z()),p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",D=>{let T=gn(),F=Z();return c.hs.getEntries(D,f).next(O=>{T=O,T.forEach((W,Y)=>{Y.isValidDocument()||(F=F.add(W))})}).next(()=>c.localDocuments.getOverlayedDocuments(D,T)).next(O=>{p=O;let W=[];for(let Y of l){let Q=$C(Y,p.get(Y.key).overlayedDocument);Q!=null&&W.push(new yn(Y.key,Q,p_(Q.value.mapValue),Vn.exists(!0)))}return c.mutationQueue.addMutationBatch(D,h,W,l)}).next(O=>{_=O;let W=O.applyToLocalDocumentSet(p,F);return c.documentOverlayCache.saveOverlays(D,O.batchId,W)})}).then(()=>({batchId:_.batchId,changes:I_(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let h=a.qa[a.currentUser.toKey()];h||(h=new Et(J)),h=h.insert(l,c),a.qa[a.currentUser.toKey()]=h}(i,r.batchId,e),yield io(i,r.changes),yield Ol(i.remoteStore)}catch(r){let s=jf(r,"Failed to persist write");e.reject(s)}})}function Z_(n,t){return S(this,null,function*(){let e=z(n);try{let i=yield mD(e.localStore,t);t.targetChanges.forEach((r,s)=>{let a=e.Ba.get(s);a&&(ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Fa=!0:r.modifiedDocuments.size>0?ct(a.Fa):r.removedDocuments.size>0&&(ct(a.Fa),a.Fa=!1))}),yield io(e,i,t)}catch(i){yield xr(i)}})}function o_(n,t,e){let i=z(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.xa.forEach((s,a)=>{let l=a.view.ea(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){let c=z(a);c.onlineState=l;let h=!1;c.queries.forEach((f,p)=>{for(let _ of p.J_)_.ea(l)&&(h=!0)}),h&&Uf(c)}(i.eventManager,t),r.length&&i.Ma.R_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function BD(n,t,e){return S(this,null,function*(){let i=z(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Ba.get(t),s=r&&r.key;if(s){let a=new Et(B.comparator);a=a.insert(s,Oe.newNoDocument(s,q.min()));let l=Z().add(s),c=new tl(q.min(),new Map,new Et(J),a,l);yield Z_(i,c),i.La=i.La.remove(s),i.Ba.delete(t),Gf(i)}else yield Jh(i.localStore,t,!1).then(()=>vf(i,t,e)).catch(xr)})}function jD(n,t){return S(this,null,function*(){let e=z(n),i=t.batch.batchId;try{let r=yield fD(e.localStore,t);tb(e,i,null),J_(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield io(e,r)}catch(r){yield xr(r)}})}function UD(n,t,e){return S(this,null,function*(){let i=z(n);try{let r=yield function(a,l){let c=z(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(ct(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(i.localStore,t);tb(i,t,e),J_(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield io(i,r)}catch(r){yield xr(r)}})}function J_(n,t){(n.Qa.get(t)||[]).forEach(e=>{e.resolve()}),n.Qa.delete(t)}function tb(n,t,e){let i=z(n),r=i.qa[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.qa[i.currentUser.toKey()]=r}}function vf(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Oa.get(t))n.xa.delete(i),e&&n.Ma.Wa(i,e);n.Oa.delete(t),n.isPrimaryClient&&n.ka.yr(t).forEach(i=>{n.ka.containsKey(i)||eb(n,i)})}function eb(n,t){n.Na.delete(t.path.canonicalString());let e=n.La.get(t);e!==null&&(Vf(n.remoteStore,e),n.La=n.La.remove(t),n.Ba.delete(e),Gf(n))}function a_(n,t,e){for(let i of e)i instanceof gl?(n.ka.addReference(i.key,t),GD(n,i)):i instanceof yl?(V("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,t),n.ka.containsKey(i.key)||eb(n,i.key)):U()}function GD(n,t){let e=t.key,i=e.path.canonicalString();n.La.get(e)||n.Na.has(i)||(V("SyncEngine","New document in limbo: "+e),n.Na.add(i),Gf(n))}function Gf(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){let t=n.Na.values().next().value;n.Na.delete(t);let e=new B(It.fromString(t)),i=n.Ka.next();n.Ba.set(i,new gf(e)),n.La=n.La.insert(e,i),z_(n.remoteStore,new Qs(je(Of(e.path)),i,"TargetPurposeLimboResolution",Sf.oe))}}function io(n,t,e){return S(this,null,function*(){let i=z(n),r=[],s=[],a=[];i.xa.isEmpty()||(i.xa.forEach((l,c)=>{a.push(i.Ua(c,t,e).then(h=>{var f;if((h||e)&&i.isPrimaryClient){let p=h?!h.fromCache:(f=e?.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){r.push(h);let p=Qh.zi(c.targetId,h);s.push(p)}}))}),yield Promise.all(a),i.Ma.R_(r),yield function(c,h){return S(this,null,function*(){let f=z(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(h,_=>M.forEach(_.Wi,D=>f.persistence.referenceDelegate.addReference(p,_.targetId,D)).next(()=>M.forEach(_.Gi,D=>f.persistence.referenceDelegate.removeReference(p,_.targetId,D)))))}catch(p){if(!Ar(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of h){let _=p.targetId;if(!p.fromCache){let D=f.us.get(_),T=D.snapshotVersion,F=D.withLastLimboFreeSnapshotVersion(T);f.us=f.us.insert(_,F)}}})}(i.localStore,s))})}function zD(n,t){return S(this,null,function*(){let e=z(n);if(!e.currentUser.isEqual(t)){V("SyncEngine","User change. New user:",t.toKey());let i=yield U_(e.localStore,t);e.currentUser=t,function(s,a){s.Qa.forEach(l=>{l.forEach(c=>{c.reject(new L(R.CANCELLED,a))})}),s.Qa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield io(e,i.Ts)}})}function $D(n,t){let e=z(n),i=e.Ba.get(t);if(i&&i.Fa)return Z().add(i.key);{let r=Z(),s=e.Oa.get(t);if(!s)return r;for(let a of s){let l=e.xa.get(a);r=r.unionWith(l.view.fa)}return r}}function nb(n){let t=z(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Z_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$D.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BD.bind(null,t),t.Ma.R_=MD.bind(null,t.eventManager),t.Ma.Wa=kD.bind(null,t.eventManager),t}function HD(n){let t=z(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=UD.bind(null,t),t}var ib=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return S(this,null,function*(){this.serializer=Ml(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),yield this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)})}Ja(e,i){return null}Ya(e,i){return null}Ha(e){return hD(this.persistence,new Xh,e.initialUser,this.serializer)}ja(e){return new ol(Kh.ei,this.serializer)}za(e){return new tf}terminate(){return S(this,null,function*(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),_f=class extends ib{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,e){ct(this.persistence.referenceDelegate instanceof al);let i=this.persistence.referenceDelegate.garbageCollector;return new Ph(i,t.asyncQueue,e)}ja(t){let e=this.cacheSizeBytes!==void 0?we.withCacheSize(this.cacheSizeBytes):we.DEFAULT;return new ol(i=>al.ei(i,e),this.serializer)}};var qD=(()=>{class n{initialize(e,i){return S(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zD.bind(null,this.syncEngine),yield RD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new hf}()}createDatastore(e){let i=Ml(e.databaseInfo.databaseId),r=function(a){return new rf(a)}(e.databaseInfo);return function(a,l,c,h){return new af(a,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return function(r,s,a,l,c){return new cf(r,s,a,l,c)}(this.localStore,this.datastore,e.asyncQueue,i=>o_(this.syncEngine,i,0),function(){return cl.p()?new cl:new ef}())}createSyncEngine(e,i){return function(s,a,l,c,h,f,p){let _=new yf(s,a,l,c,h,f);return p&&(_.$a=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return S(this,null,function*(){var e,i;yield function(s){return S(this,null,function*(){let a=z(s);V("RemoteStore","RemoteStore shutting down."),a.k_.add(5),yield no(a),a.Q_.shutdown(),a.K_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var vl=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):hn("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,e){setTimeout(()=>{this.muted||t(e)},0)}};var bf=class{constructor(t,e,i,r,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Pt.UNAUTHENTICATED,this.clientId=Wa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,a=>S(this,null,function*(){V("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(V("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new ke;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=jf(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Kd(n,t){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>S(this,null,function*(){i.isEqual(r)||(yield U_(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function l_(n,t){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield WD(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>i_(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>i_(t.remoteStore,r)),n._onlineComponents=t})}function WD(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kd(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!function(r){return r.name==="FirebaseError"?r.code===R.FAILED_PRECONDITION||r.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;lr("Error using user provided cache. Falling back to memory cache: "+e),yield Kd(n,new ib)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Kd(n,new _f(void 0));return n._offlineComponents})}function rb(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield l_(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield l_(n,new qD))),n._onlineComponents})}function KD(n){return rb(n).then(t=>t.syncEngine)}function sb(n){return S(this,null,function*(){let t=yield rb(n),e=t.eventManager;return e.onListen=OD.bind(null,t.syncEngine),e.onUnlisten=VD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=FD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=ND.bind(null,t.syncEngine),e})}function QD(n,t,e={}){let i=new ke;return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(s,a,l,c,h){let f=new vl({next:_=>{f.eu(),a.enqueueAndForget(()=>Y_(s,p));let D=_.docs.has(l);!D&&_.fromCache?h.reject(new L(R.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&_.fromCache&&c&&c.source==="server"?h.reject(new L(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new pl(Of(l.path),f,{includeMetadataChanges:!0,ua:!0});return Q_(s,p)}(yield sb(n),n.asyncQueue,t,e,i)})),i.promise}function YD(n,t,e={}){let i=new ke;return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(s,a,l,c,h){let f=new vl({next:_=>{f.eu(),a.enqueueAndForget(()=>Y_(s,p)),_.fromCache&&c.source==="server"?h.reject(new L(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new pl(l,f,{includeMetadataChanges:!0,ua:!0});return Q_(s,p)}(yield sb(n),n.asyncQueue,t,e,i)})),i.promise}function ob(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var c_=new Map;function ab(n,t,e){if(!e)throw new L(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function XD(n,t,e,i){if(t===!0&&i===!0)throw new L(R.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function u_(n){if(!B.isDocumentKey(n))throw new L(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function d_(n){if(B.isDocumentKey(n))throw new L(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":U()}function jn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new L(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=zf(n);throw new L(R.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var _l=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new L(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new L(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}XD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ob((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},br=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _l({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new L(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _l(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Qd;switch(i.type){case"firstParty":return new Jd(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new L(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=c_.get(e);i&&(V("ComponentProvider","Removing Datastore"),c_.delete(e),i.terminate())}(this),Promise.resolve()}};function ZD(n,t,e,i={}){var r;let s=(n=jn(n,br))._getSettings(),a=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let l,c;if(typeof i.mockUserToken=="string")l=i.mockUserToken,c=Pt.MOCK_USER;else{l=fv(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new L(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Pt(h)}n._authCredentials=new Yd(new qa(l,c))}}var bl=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},de=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},Nn=class n extends bl{constructor(t,e,i){super(t,e,Of(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new de(this.firestore,null,new B(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function $f(n,t,...e){if(n=cn(n),ab("collection","path",t),n instanceof br){let i=It.fromString(t,...e);return d_(i),new Nn(n,null,i)}{if(!(n instanceof de||n instanceof Nn))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(It.fromString(t,...e));return d_(i),new Nn(n.firestore,null,i)}}function Hf(n,t,...e){if(n=cn(n),arguments.length===1&&(t=Wa.newId()),ab("doc","path",t),n instanceof br){let i=It.fromString(t,...e);return u_(i),new de(n,null,new B(i))}{if(!(n instanceof de||n instanceof Nn))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(It.fromString(t,...e));return u_(i),new de(n.firestore,n instanceof Nn?n.converter:null,new B(i))}}var wl=class{constructor(t=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ul(this,"async_queue_retry"),this.fu=()=>{let i=Wd();i&&V("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=t;let e=Wd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.Eu){this.Eu=!0,this.Vu=t||!1;let e=Wd();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.Eu)return new Promise(()=>{});let e=new ke;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}wu(){return S(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!Ar(t))throw t;V("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(t){let e=this.gu.then(()=>(this.Ru=!0,t().catch(i=>{this.Au=i,this.Ru=!1;let r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw hn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Ru=!1,i))));return this.gu=e,e}enqueueAfterDelay(t,e,i){this.pu(),this.mu.indexOf(t)>-1&&(e=0);let r=uf.createAndSchedule(this,t,e,i,s=>this.Su(s));return this.du.push(r),r}pu(){this.Au&&U()}verifyOperationInProgress(){}bu(){return S(this,null,function*(){let t;do t=this.gu,yield t;while(t!==this.gu)})}Du(t){for(let e of this.du)if(e.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.du.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.du)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){let e=this.du.indexOf(t);this.du.splice(e,1)}};var yi=class extends br{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new wl,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new wl(t),this._firestoreClient=void 0,yield t}})}};function lb(n,t){let e=typeof n=="object"?n:Ls(),i=typeof n=="string"?n:t||"(default)",r=Fn(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=hv("firestore");s&&ZD(r,...s)}return r}function qf(n){if(n._terminated)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JD(n),n._firestoreClient}function JD(n){var t,e,i;let r=n._freezeSettings(),s=function(l,c,h,f){return new rh(l,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ob(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new bf(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){let c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}}(n._componentsProvider))}var Zs=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Wt.fromBase64String(t))}catch(e){throw new L(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Wt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Js=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new L(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var xl=class{constructor(t){this._methodName=t}};var to=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new L(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new L(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return J(this._lat,t._lat)||J(this._long,t._long)}};var eo=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}};var tS=/^__.*__$/,wf=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new yn(t,this.data,this.fieldMask,e,this.fieldTransforms):new gi(t,this.data,e,this.fieldTransforms)}};function cb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U()}}var xf=class n{constructor(t,e,i,r,s,a){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.xu({path:i,Nu:!1});return r.Lu(t),r}Bu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.xu({path:i,Nu:!1});return r.Fu(),r}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return Al(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lu(this.path.get(t))}Lu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(cb(this.Mu)&&tS.test(t))throw this.qu('Document fields cannot begin and end with "__"')}},Af=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Ml(t)}$u(t,e,i,r=!1){return new xf({Mu:t,methodName:e,Ku:i,path:ue.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ub(n){let t=n._freezeSettings(),e=Ml(n._databaseId);return new Af(n._databaseId,!!t.ignoreUndefinedProperties,e)}function db(n,t,e,i,r,s={}){let a=n.$u(s.merge||s.mergeFields?2:0,t,e,r);pb("Data must be an object, but it was:",a,i);let l=fb(i,a),c,h;if(s.merge)c=new Le(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let _=eS(t,p,e);if(!a.contains(_))throw new L(R.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);iS(f,_)||f.push(_)}c=new Le(f),h=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=a.fieldTransforms;return new wf(new Me(l),c,h)}function hb(n,t){if(mb(n=cn(n)))return pb("Unsupported field value:",t,n),fb(n,t);if(n instanceof xl)return function(i,r){if(!cb(r.Mu))throw r.qu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(i,r){let s=[],a=0;for(let l of i){let c=hb(l,r.ku(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=cn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BC(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=jt.fromDate(i);return{timestampValue:rl(r.serializer,s)}}if(i instanceof jt){let s=new jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rl(r.serializer,s)}}if(i instanceof to)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zs)return{bytesValue:F_(r.serializer,i._byteString)};if(i instanceof de){let s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.qu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pf(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof eo)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.qu("VectorValues must only contain numeric values.");return Ff(l.serializer,c)})}}}}}}(i,r);throw r.qu(`Unsupported field value: ${zf(i)}`)}(n,t)}function fb(n,t){let e={};return h_(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vi(n,(i,r)=>{let s=hb(r,t.Ou(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function mb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jt||n instanceof to||n instanceof Zs||n instanceof de||n instanceof xl||n instanceof eo)}function pb(n,t,e){if(!mb(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=zf(e);throw i==="an object"?t.qu(n+" a custom object"):t.qu(n+" "+i)}}function eS(n,t,e){if((t=cn(t))instanceof Js)return t._internalPath;if(typeof t=="string")return gb(n,t);throw Al("Field path arguments must be of type string or ",n,!1,void 0,e)}var nS=new RegExp("[~\\*/\\[\\]]");function gb(n,t,e){if(t.search(nS)>=0)throw Al(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Js(...t.split("."))._internalPath}catch{throw Al(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Al(n,t,e,i,r){let s=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new L(R.INVALID_ARGUMENT,l+n+c)}function iS(n,t){return n.some(e=>e.isEqual(t))}var Il=class{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new de(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new If(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(yb("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},If=class extends Il{data(){return super.data()}};function yb(n,t){return typeof t=="string"?gb(n,t):t instanceof Js?t._internalPath:t._delegate._internalPath}function rS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ef=class{convertValue(t,e="none"){switch(Ln(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _t(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(mn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw U()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return vi(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertVectorValue(t){var e,i,r;let s=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>_t(a.doubleValue));return new eo(s)}convertGeoPoint(t){return new to(_t(t.latitude),_t(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=Sl(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(qs(t));default:return null}}convertTimestamp(t){let e=fn(t);return new jt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=It.fromString(t);ct(j_(i));let r=new Xa(i.get(1),i.get(3)),s=new B(i.popFirst(5));return r.isEqual(e)||hn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function vb(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var di=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},El=class extends Il{constructor(t,e,i,r,s,a){super(t,e,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new ar(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(yb("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},ar=class extends El{data(t={}){return super.data(t)}},Cf=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new di(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new ar(this._firestore,this._userDataWriter,i.key,i,new di(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let c=new ar(r._firestore,r._userDataWriter,l.doc.key,l.doc,new di(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{let c=new ar(r._firestore,r._userDataWriter,l.doc.key,l.doc,new di(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:sS(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function sS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return U()}}function _b(n){n=jn(n,de);let t=jn(n.firestore,yi);return QD(qf(t),n._key).then(e=>oS(t,n,e))}var Cl=class extends Ef{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zs(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new de(this.firestore,null,e)}};function bb(n){n=jn(n,bl);let t=jn(n.firestore,yi),e=qf(t),i=new Cl(t);return rS(n._query),YD(e,n._query).then(r=>new Cf(t,i,n,r))}function wb(n,t,e){n=jn(n,de);let i=jn(n.firestore,yi),r=vb(n.converter,t,e);return Ab(i,[db(ub(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Vn.none())])}function xb(n,t){let e=jn(n.firestore,yi),i=Hf(n),r=vb(n.converter,t);return Ab(e,[db(ub(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Vn.exists(!1))]).then(()=>i)}function Ab(n,t){return function(i,r){let s=new ke;return i.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return LD(yield KD(i),r,s)})),s.promise}(qf(n),t)}function oS(n,t,e){let i=e.docs.get(t._key),r=new Cl(n);return new El(n,r,t._key,i,new di(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){wr=r})(Tv),Re(new Yt("firestore",(i,{instanceIdentifier:r,options:s})=>{let a=i.getProvider("app").getImmediate(),l=new yi(new Xd(i.getProvider("auth-internal")),new eh(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new L(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(h.options.projectId,f)}(a,r),a);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),te(Fv,"4.7.5",t),te(Fv,"4.7.5","esm2017")})();var aS="firebase",lS="11.1.0";te(aS,lS,"app");var Cb="@firebase/installations",Yf="0.6.11";var Db=1e4,Sb=`w:${Yf}`,Tb="FIS_v2",cS="https://firebaseinstallations.googleapis.com/v1",uS=60*60*1e3,dS="installations",hS="Installations";var fS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wi=new ln(dS,hS,fS);function Rb(n){return n instanceof ce&&n.code.includes("request-failed")}function Mb({projectId:n}){return`${cS}/projects/${n}/installations`}function kb(n){return{token:n.token,requestStatus:2,expiresIn:pS(n.expiresIn),creationTime:Date.now()}}function Ob(n,t){return S(this,null,function*(){let i=(yield t.json()).error;return wi.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function Fb({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function mS(n,{refreshToken:t}){let e=Fb(n);return e.append("Authorization",gS(t)),e}function Pb(n){return S(this,null,function*(){let t=yield n();return t.status>=500&&t.status<600?n():t})}function pS(n){return Number(n.replace("s","000"))}function gS(n){return`${Tb} ${n}`}function yS(i,r){return S(this,arguments,function*({appConfig:n,heartbeatServiceProvider:t},{fid:e}){let s=Mb(n),a=Fb(n),l=t.getImmediate({optional:!0});if(l){let p=yield l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}let c={fid:e,authVersion:Tb,appId:n.appId,sdkVersion:Sb},h={method:"POST",headers:a,body:JSON.stringify(c)},f=yield Pb(()=>fetch(s,h));if(f.ok){let p=yield f.json();return{fid:p.fid||e,registrationStatus:2,refreshToken:p.refreshToken,authToken:kb(p.authToken)}}else throw yield Ob("Create Installation",f)})}function Vb(n){return new Promise(t=>{setTimeout(t,n)})}function vS(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var _S=/^[cdef][\w-]{21}$/,Qf="";function bS(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let e=wS(n);return _S.test(e)?e:Qf}catch{return Qf}}function wS(n){return vS(n).substr(0,22)}function Pl(n){return`${n.appName}!${n.appId}`}var Nb=new Map;function Lb(n,t){let e=Pl(n);Bb(e,t),xS(e,t)}function Bb(n,t){let e=Nb.get(n);if(e)for(let i of e)i(t)}function xS(n,t){let e=AS();e&&e.postMessage({key:n,fid:t}),IS()}var bi=null;function AS(){return!bi&&"BroadcastChannel"in self&&(bi=new BroadcastChannel("[Firebase] FID Change"),bi.onmessage=n=>{Bb(n.data.key,n.data.fid)}),bi}function IS(){Nb.size===0&&bi&&(bi.close(),bi=null)}var ES="firebase-installations-database",CS=1,xi="firebase-installations-store",Wf=null;function Xf(){return Wf||(Wf=Va(ES,CS,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(xi)}}})),Wf}function Fl(n,t){return S(this,null,function*(){let e=Pl(n),r=(yield Xf()).transaction(xi,"readwrite"),s=r.objectStore(xi),a=yield s.get(e);return yield s.put(t,e),yield r.done,(!a||a.fid!==t.fid)&&Lb(n,t.fid),t})}function jb(n){return S(this,null,function*(){let t=Pl(n),i=(yield Xf()).transaction(xi,"readwrite");yield i.objectStore(xi).delete(t),yield i.done})}function Vl(n,t){return S(this,null,function*(){let e=Pl(n),r=(yield Xf()).transaction(xi,"readwrite"),s=r.objectStore(xi),a=yield s.get(e),l=t(a);return l===void 0?yield s.delete(e):yield s.put(l,e),yield r.done,l&&(!a||a.fid!==l.fid)&&Lb(n,l.fid),l})}function Zf(n){return S(this,null,function*(){let t,e=yield Vl(n.appConfig,i=>{let r=DS(i),s=SS(n,r);return t=s.registrationPromise,s.installationEntry});return e.fid===Qf?{installationEntry:yield t}:{installationEntry:e,registrationPromise:t}})}function DS(n){let t=n||{fid:bS(),registrationStatus:0};return Ub(t)}function SS(n,t){if(t.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(wi.create("app-offline"));return{installationEntry:t,registrationPromise:r}}let e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=TS(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:RS(n)}:{installationEntry:t}}function TS(n,t){return S(this,null,function*(){try{let e=yield yS(n,t);return Fl(n.appConfig,e)}catch(e){throw Rb(e)&&e.customData.serverCode===409?yield jb(n.appConfig):yield Fl(n.appConfig,{fid:t.fid,registrationStatus:0}),e}})}function RS(n){return S(this,null,function*(){let t=yield Ib(n.appConfig);for(;t.registrationStatus===1;)yield Vb(100),t=yield Ib(n.appConfig);if(t.registrationStatus===0){let{installationEntry:e,registrationPromise:i}=yield Zf(n);return i||e}return t})}function Ib(n){return Vl(n,t=>{if(!t)throw wi.create("installation-not-found");return Ub(t)})}function Ub(n){return MS(n)?{fid:n.fid,registrationStatus:0}:n}function MS(n){return n.registrationStatus===1&&n.registrationTime+Db<Date.now()}function kS(i,r){return S(this,arguments,function*({appConfig:n,heartbeatServiceProvider:t},e){let s=OS(n,e),a=mS(n,e),l=t.getImmediate({optional:!0});if(l){let p=yield l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}let c={installation:{sdkVersion:Sb,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(c)},f=yield Pb(()=>fetch(s,h));if(f.ok){let p=yield f.json();return kb(p)}else throw yield Ob("Generate Auth Token",f)})}function OS(n,{fid:t}){return`${Mb(n)}/${t}/authTokens:generate`}function Jf(n,t=!1){return S(this,null,function*(){let e,i=yield Vl(n.appConfig,s=>{if(!Gb(s))throw wi.create("not-registered");let a=s.authToken;if(!t&&VS(a))return s;if(a.requestStatus===1)return e=FS(n,t),s;{if(!navigator.onLine)throw wi.create("app-offline");let l=LS(s);return e=PS(n,l),l}});return e?yield e:i.authToken})}function FS(n,t){return S(this,null,function*(){let e=yield Eb(n.appConfig);for(;e.authToken.requestStatus===1;)yield Vb(100),e=yield Eb(n.appConfig);let i=e.authToken;return i.requestStatus===0?Jf(n,t):i})}function Eb(n){return Vl(n,t=>{if(!Gb(t))throw wi.create("not-registered");let e=t.authToken;return BS(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function PS(n,t){return S(this,null,function*(){try{let e=yield kS(n,t),i=Object.assign(Object.assign({},t),{authToken:e});return yield Fl(n.appConfig,i),e}catch(e){if(Rb(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))yield jb(n.appConfig);else{let i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield Fl(n.appConfig,i)}throw e}})}function Gb(n){return n!==void 0&&n.registrationStatus===2}function VS(n){return n.requestStatus===2&&!NS(n)}function NS(n){let t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+uS}function LS(n){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function BS(n){return n.requestStatus===1&&n.requestTime+Db<Date.now()}function jS(n){return S(this,null,function*(){let t=n,{installationEntry:e,registrationPromise:i}=yield Zf(t);return i?i.catch(console.error):Jf(t).catch(console.error),e.fid})}function US(n,t=!1){return S(this,null,function*(){let e=n;return yield GS(e),(yield Jf(e,t)).token})}function GS(n){return S(this,null,function*(){let{registrationPromise:t}=yield Zf(n);t&&(yield t)})}function zS(n){if(!n||!n.options)throw Kf("App Configuration");if(!n.name)throw Kf("App Name");let t=["projectId","apiKey","appId"];for(let e of t)if(!n.options[e])throw Kf(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Kf(n){return wi.create("missing-app-config-values",{valueName:n})}var zb="installations",$S="installations-internal",HS=n=>{let t=n.getProvider("app").getImmediate(),e=zS(t),i=Fn(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},qS=n=>{let t=n.getProvider("app").getImmediate(),e=Fn(t,zb).getImmediate();return{getId:()=>jS(e),getToken:r=>US(e,r)}};function WS(){Re(new Yt(zb,HS,"PUBLIC")),Re(new Yt($S,qS,"PRIVATE"))}WS();te(Cb,Yf);te(Cb,Yf,"esm2017");var Nl="analytics",KS="firebase_id",QS="origin",YS=60*1e3,XS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",om="https://www.googletagmanager.com/gtag/js";var ee=new kn("@firebase/analytics");var ZS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},he=new ln("analytics","Analytics",ZS);function JS(n){if(!n.startsWith(om)){let t=he.create("invalid-gtag-resource",{gtagURL:n});return ee.warn(t.message),""}return n}function Yb(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function tT(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function eT(n,t){let e=tT("firebase-js-sdk-policy",{createScriptURL:JS}),i=document.createElement("script"),r=`${om}?l=${n}&id=${t}`;i.src=e?e?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function nT(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}function iT(n,t,e,i,r,s){return S(this,null,function*(){let a=i[r];try{if(a)yield t[a];else{let c=(yield Yb(e)).find(h=>h.measurementId===r);c&&(yield t[c.appId])}}catch(l){ee.error(l)}n("config",r,s)})}function rT(n,t,e,i,r){return S(this,null,function*(){try{let s=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);let l=yield Yb(e);for(let c of a){let h=l.find(p=>p.measurementId===c),f=h&&t[h.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(t)),yield Promise.all(s),n("event",i,r||{})}catch(s){ee.error(s)}})}function sT(n,t,e,i){function r(s,...a){return S(this,null,function*(){try{if(s==="event"){let[l,c]=a;yield rT(n,t,e,l,c)}else if(s==="config"){let[l,c]=a;yield iT(n,t,e,i,l,c)}else if(s==="consent"){let[l,c]=a;n("consent",l,c)}else if(s==="get"){let[l,c,h]=a;n("get",l,c,h)}else if(s==="set"){let[l]=a;n("set",l)}else n(s,...a)}catch(l){ee.error(l)}})}return r}function oT(n,t,e,i,r){let s=function(...a){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=sT(s,n,t,e),{gtagCore:s,wrappedGtag:window[r]}}function aT(n){let t=window.document.getElementsByTagName("script");for(let e of Object.values(t))if(e.src&&e.src.includes(om)&&e.src.includes(n))return e;return null}var lT=30,cT=1e3,em=class{constructor(t={},e=cT){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},Xb=new em;function uT(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function dT(n){return S(this,null,function*(){var t;let{appId:e,apiKey:i}=n,r={method:"GET",headers:uT(i)},s=XS.replace("{app-id}",e),a=yield fetch(s,r);if(a.status!==200&&a.status!==304){let l="";try{let c=yield a.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch{}throw he.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()})}function hT(i){return S(this,arguments,function*(n,t=Xb,e){let{appId:r,apiKey:s,measurementId:a}=n.options;if(!r)throw he.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw he.create("no-api-key")}let l=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new nm;return setTimeout(()=>S(this,null,function*(){c.abort()}),e!==void 0?e:YS),Zb({appId:r,apiKey:s,measurementId:a},l,c,t)})}function Zb(s,a,l){return S(this,arguments,function*(n,{throttleEndTimeMillis:t,backoffCount:e},i,r=Xb){var c;let{appId:h,measurementId:f}=n;try{yield fT(i,t)}catch(p){if(f)return ee.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:h,measurementId:f};throw p}try{let p=yield dT(n);return r.deleteThrottleMetadata(h),p}catch(p){let _=p;if(!mT(_)){if(r.deleteThrottleMetadata(h),f)return ee.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:h,measurementId:f};throw p}let D=Number((c=_?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Ad(e,r.intervalMillis,lT):Ad(e,r.intervalMillis),T={throttleEndTimeMillis:Date.now()+D,backoffCount:e+1};return r.setThrottleMetadata(h,T),ee.debug(`Calling attemptFetch again in ${D} millis`),Zb(n,T,i,r)}})}function fT(n,t){return new Promise((e,i)=>{let r=Math.max(t-Date.now(),0),s=setTimeout(e,r);n.addEventListener(()=>{clearTimeout(s),i(he.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function mT(n){if(!(n instanceof ce)||!n.customData)return!1;let t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}var nm=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var im;function pT(n,t,e,i,r){return S(this,null,function*(){if(r&&r.global){n("event",e,i);return}else{let s=yield t,a=Object.assign(Object.assign({},i),{send_to:s});n("event",e,a)}})}var rm;function gT(n){rm=n}function yT(n){im=n}function vT(){return S(this,null,function*(){if(Vs())try{yield Oa()}catch(n){return ee.warn(he.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return ee.warn(he.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function _T(n,t,e,i,r,s,a){return S(this,null,function*(){var l;let c=hT(n);c.then(D=>{e[D.measurementId]=D.appId,n.options.measurementId&&D.measurementId!==n.options.measurementId&&ee.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${D.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(D=>ee.error(D)),t.push(c);let h=vT().then(D=>{if(D)return i.getId()}),[f,p]=yield Promise.all([c,h]);aT(s)||eT(s,f.measurementId),rm&&(r("consent","default",rm),gT(void 0)),r("js",new Date);let _=(l=a?.config)!==null&&l!==void 0?l:{};return _[QS]="firebase",_.update=!0,p!=null&&(_[KS]=p),r("config",f.measurementId,_),im&&(r("set",im),yT(void 0)),f.measurementId})}var sm=class{constructor(t){this.app=t}_delete(){return delete ro[this.app.options.appId],Promise.resolve()}},ro={},$b=[],Hb={},tm="dataLayer",bT="gtag",qb,Jb,Wb=!1;function wT(){let n=[];if(pv()&&n.push("This is a browser extension environment."),yv()||n.push("Cookies are not available."),n.length>0){let t=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),e=he.create("invalid-analytics-context",{errorInfo:t});ee.warn(e.message)}}function xT(n,t,e){wT();let i=n.options.appId;if(!i)throw he.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ee.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw he.create("no-api-key");if(ro[i]!=null)throw he.create("already-exists",{id:i});if(!Wb){nT(tm);let{wrappedGtag:s,gtagCore:a}=oT(ro,$b,Hb,tm,bT);Jb=s,qb=a,Wb=!0}return ro[i]=_T(n,$b,Hb,t,qb,tm,e),new sm(n)}function tw(n=Ls()){n=cn(n);let t=Fn(n,Nl);return t.isInitialized()?t.getImmediate():AT(n)}function AT(n,t={}){let e=Fn(n,Nl);if(e.isInitialized()){let r=e.getImmediate();if(ai(t,e.getOptions()))return r;throw he.create("already-initialized")}return e.initialize({options:t})}function IT(n,t,e,i){n=cn(n),pT(Jb,ro[n.app.options.appId],t,e,i).catch(r=>ee.error(r))}var Kb="@firebase/analytics",Qb="0.10.10";function ET(){Re(new Yt(Nl,(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return xT(i,r,e)},"PUBLIC")),Re(new Yt("analytics-internal",n,"PRIVATE")),te(Kb,Qb),te(Kb,Qb,"esm2017");function n(t){try{let e=t.getProvider(Nl).getImmediate();return{logEvent:(i,r,s)=>IT(e,i,r,s)}}catch(e){throw he.create("interop-component-reg-failed",{reason:e})}}}ET();var CT={apiKey:"AIzaSyAoyJb_nIOXDnbTxYD6MSz0LslQ6lI1Sh0",authDomain:"card-deck-manager-21f48.firebaseapp.com",projectId:"card-deck-manager-21f48",storageBucket:"card-deck-manager-21f48.firebasestorage.app",messagingSenderId:"983460789414",appId:"1:983460789414:web:5640d02de351c4e24b8867",measurementId:"G-R19SQ6HMPC"},ew=Ld(CT),q1=tw(ew),am=lb(ew);var Ll=class n{ranks=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];suits=["Hearts","Diamonds","Clubs","Spades"];deck=[];dealtCards=[];deskCollection=$f(am,"decks");deckDoc=Hf(this.deskCollection,"currentDeck");historyCollection=$f(am,"dealtCardsHistory");constructor(){this.resetDeck()}resetDeck(){return S(this,null,function*(){this.deck=[],this.dealtCards=[];for(let t of this.ranks)for(let e of this.suits)this.deck.push({rank:t,suit:e});yield this.saveDeckState()})}shuffleDeck(){return S(this,null,function*(){for(let t=this.deck.length-1;t>0;t--){let e=Math.floor(Math.random()*(t+1));[this.deck[t],this.deck[e]]=[this.deck[e],this.deck[t]]}yield this.saveDeckState()})}dealCards(t){return S(this,null,function*(){let e=this.deck.splice(0,t);return this.dealtCards.push(...e),yield this.saveDeckState(),yield this.saveDealtCardsHistory(e),e})}getRemainingDeck(){return this.deck}saveDeckState(){return S(this,null,function*(){let t={deck:this.deck,dealtCards:this.dealtCards};try{yield wb(this.deckDoc,t),console.log("Deck state saved successfully")}catch(e){console.error("Error saving deck state: ",e)}})}getDeckState(){return S(this,null,function*(){try{let t=yield _b(this.deckDoc);if(t.exists()){let e=t.data();this.deck=e.deck||[],this.dealtCards=e.dealtCards||[],console.log("Deck state loaded successfully")}else console.log("No such document!")}catch(t){console.error("Error getting deck state: ",t)}})}saveDealtCardsHistory(t){return S(this,null,function*(){try{yield xb(this.historyCollection,{dealtCards:t,timestamp:new Date}),console.log("Dealt cards history saved successfully")}catch(e){console.error("Error saving dealt cards history: ",e)}})}getDealtCardsHistory(){return S(this,null,function*(){try{return(yield bb(this.historyCollection)).docs.map(i=>i.data())}catch(t){return console.error("Error getting dealt cards history: ",t),[]}})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function ST(n,t){if(n&1&&(yt(0,"mat-card")(1,"mat-card-content"),Zt(2),vt()()),n&2){let e=t.$implicit;Xe("@cardAnimation",void 0),se(2),Fo(" ",e.rank," of ",e.suit," ")}}function TT(n,t){n&1&&(yt(0,"div",8)(1,"p"),Zt(2,"Shuffling..."),vt()()),n&2&&Xe("@shuffleAnimation",void 0)}var Bl=class n{constructor(t,e){this.deckService=t;this.dialog=e}dealtCards=[];remainingDeckSize=0;dealcount=0;isShuffling=!1;ngOnInit(){this.loadDeckState()}loadDeckState(){return S(this,null,function*(){yield this.deckService.getDeckState(),this.dealtCards=yield this.deckService.dealCards(this.dealcount),this.remainingDeckSize=this.deckService.getRemainingDeck().length})}shuffleDeck(){return S(this,null,function*(){this.isShuffling=!0,this.deckService.shuffleDeck(),this.updateDeckSize(),setTimeout(()=>{this.isShuffling=!1},2e3)})}dealCards(t){return S(this,null,function*(){if(t>this.remainingDeckSize){alert("Not enough cards left in the deck");return}let e=yield this.deckService.dealCards(t);this.dealtCards.push(...e),this.dealcount=t,this.updateDeckSize()})}resetDeck(){return S(this,null,function*(){yield this.deckService.resetDeck(),this.dealtCards=[],this.dealcount=0,this.updateDeckSize()})}updateDeckSize(){this.remainingDeckSize=this.deckService.getRemainingDeck().length}openHistoryDialog(){return S(this,null,function*(){let t=yield this.deckService.getDealtCardsHistory();this.dialog.open(Ta,{data:{history:t},width:"80%",maxWidth:"600px"})})}static \u0275fac=function(e){return new(e||n)(bt(Ll),bt(pd))};static \u0275cmp=ft({type:n,selectors:[["app-deck"]],decls:19,vars:4,consts:[["color","primary"],[1,"controls"],["mat-raised-button","","color","primary",3,"click"],["type","number","placeholder","Number of Cards to Deal","min","1","max","remainingDeckSize",3,"ngModelChange","ngModel"],[1,"remaining"],[1,"dealt-cards"],[4,"ngFor","ngForOf"],["class","shuffle-text",4,"ngIf"],[1,"shuffle-text"]],template:function(e,i){e&1&&(yt(0,"mat-toolbar",0)(1,"span"),Zt(2,"Card Deck Manager"),vt()(),yt(3,"div",1)(4,"button",2),De("click",function(){return i.shuffleDeck()}),Zt(5,"Shuffle Deck"),vt(),yt(6,"button",2),De("click",function(){return i.resetDeck()}),Zt(7,"Reset Deck"),vt(),yt(8,"button",2),De("click",function(){return i.dealCards(i.dealcount)}),Zt(9,"Deal Cards"),vt(),yt(10,"input",3),Rp("ngModelChange",function(s){return Tp(i.dealcount,s)||(i.dealcount=s),s}),vt()(),yt(11,"div",4)(12,"p"),Zt(13),vt()(),yt(14,"div",5),Ce(15,ST,3,3,"mat-card",6),vt(),Ce(16,TT,3,1,"div",7),yt(17,"button",2),De("click",function(){return i.openHistoryDialog()}),Zt(18,"View Dealt Cards History"),vt()),e&2&&(se(10),Sp("ngModel",i.dealcount),se(3),Ec("Remaining Cards: ",i.remainingDeckSize,""),se(2),Xe("ngForOf",i.dealtCards),se(),Xe("ngIf",i.isShuffling))},dependencies:[ts,No,Lp,ay,oy,hy,uy,dy,cy,ly,Py,ba,Qu,Ry,Xu,Yu,Ku,Sa,lv],styles:[".controls[_ngcontent-%COMP%]{margin:1em 0}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.remaining[_ngcontent-%COMP%]{margin:1em 0}.dealt-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:10}mat-card[_ngcontent-%COMP%]{width:80px;height:120px;display:flex;justify-content:center;align-items:center;text-align:center;background:#f9f9f9;border-radius:5px;margin:10px}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin:1rem 0}.card[_ngcontent-%COMP%]{width:120px;text-align:center}.shuffle-text[_ngcontent-%COMP%]{text-align:center;font-size:2em;margin-top:20px}@media (max-width: 600px){.controls[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.dealt-cards[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%}}"],data:{animation:[Dc("cardAnimation",[Rc(":enter",[Tn({opacity:0,transform:"translateY(100%)"}),Sc("500ms",Tc([Tn({opacity:0,transform:"translateY(100%)",offset:0}),Tn({opacity:1,transform:"translateY(0)",offset:1})]))])]),Dc("shuffleAnimation",[Rc(":enter",[Sc("2000ms",Tc([Tn({opacity:0,offset:0}),Tn({opacity:1,offset:.25}),Tn({opacity:1,offset:.75}),Tn({opacity:0,offset:1})]))])])]}})};var jl=class n{title="Card-Deck-Manager";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ft({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(e,i){e&1&&Ze(0,"app-deck")(1,"router-outlet")},dependencies:[yu,Bl,Sa],encapsulation:2})};Yp(jl,Ng).catch(n=>console.error(n));
